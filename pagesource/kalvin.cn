<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1" />
<meta name="renderer" content="webkit" />
<title>孤魂的个人博客</title>
<meta name="keywords" content="" />
<meta name="description" content=""  />
<meta property="og:title" content="孤魂的个人博客" />
<meta property="og:description" content="" />
<base href="//www.kalvin.cn/" /><!--[if IE]></base><![endif]-->
<link href="//www.kalvin.cn/static/css/default/img/favicon.ico?v=20160523" rel="shortcut icon" type="image/x-icon" />

<link rel="stylesheet" type="text/css" href="//www.kalvin.cn/static/css/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="//www.kalvin.cn/static/css/icon.css" />

<link href="//www.kalvin.cn/static/css/default/common.css?v=20160523" rel="stylesheet" type="text/css" />
<link href="//www.kalvin.cn/static/css/default/link.css?v=20160523" rel="stylesheet" type="text/css" />
<link href="//www.kalvin.cn/static/js/plug_module/style.css?v=20160523" rel="stylesheet" type="text/css" />


<script type="text/javascript">
	var _B9588144A2FE446E71CDFF2D6DA01391="";
	var G_POST_HASH=_B9588144A2FE446E71CDFF2D6DA01391;
	var G_INDEX_SCRIPT = "";
	var G_SITE_NAME = "孤魂的个人博客";
	var G_BASE_URL = "//www.kalvin.cn";
	var G_STATIC_URL = "//www.kalvin.cn/static";
	var G_UPLOAD_URL = "http://www.kalvin.cn/uploads";
	var G_USER_ID = "";
	var G_USER_NAME = "";
	var G_UPLOAD_ENABLE = "N";
	var G_UNREAD_NOTIFICATION = 0;
	var G_NOTIFICATION_INTERVAL = 100000;
	var G_CAN_CREATE_TOPIC = "";
	var G_ADVANCED_EDITOR_ENABLE = "Y";

	</script>
<script src="//www.kalvin.cn/static/js/jquery.2.js?v=20160523" type="text/javascript"></script>
<script src="//www.kalvin.cn/static/js/jquery.form.js?v=20160523" type="text/javascript"></script>
<script src="//www.kalvin.cn/static/js/plug_module/plug-in_module.js?v=20160523" type="text/javascript"></script>
<script src="//www.kalvin.cn/static/js/aws.js?v=20160523" type="text/javascript"></script>
<script src="//www.kalvin.cn/static/js/aw_template.js?v=20160523" type="text/javascript"></script>
<script src="//www.kalvin.cn/static/js/app.js?v=20160523" type="text/javascript"></script>
<script type="text/javascript" src="//www.kalvin.cn/static/js/compatibility.js"></script>

<!--[if lte IE 8]>
	<script type="text/javascript" src="//www.kalvin.cn/static/js/respond.js"></script>
<![endif]-->
</head>
<noscript unselectable="on" id="noscript">
    <div class="aw-404 aw-404-wrap container">
        <img src="//www.kalvin.cn/static/common/no-js.jpg">
        <p>你的浏览器禁用了JavaScript, 请开启后刷新浏览器获得更好的体验!</p>
    </div>
</noscript>
<body>
	<div class="aw-top-menu-wrap">
		<div class="container">
			<!-- logo -->
			<div class="aw-logo hidden-xs">
				<a href="//www.kalvin.cn"></a>
			</div>
			<!-- end logo -->
			<!-- 搜索框 -->
			<div class="aw-search-box  hidden-xs hidden-sm">
				<form class="navbar-search" action="//www.kalvin.cn/search/" id="global_search_form" method="post">
					<input class="form-control search-query" type="text" placeholder="搜索问题、股票代码" autocomplete="off" name="q" id="aw-search-query" />
					<span title="搜索" id="global_search_btns" onClick="$('#global_search_form').submit();"><i class="icon icon-search"></i></span>
					<div class="aw-dropdown">
						<div class="mod-body">
							<p class="title">输入关键字进行搜索</p>
							<ul class="aw-dropdown-list hide"></ul>
							<p class="search"><span>搜索:</span><a onClick="$('#global_search_form').submit();"></a></p>
						</div>
						<div class="mod-footer">
							<a href="//www.kalvin.cn/publish" onClick="$('#header_publish').click();" class="pull-right btn btn-mini btn-success publish">发起问题</a>
						</div>
					</div>
				</form>
			</div>
			<!-- end 搜索框 -->
			<!-- 导航 -->
			<div class="aw-top-nav navbar">
				<div class="navbar-header">
				  <button  class="navbar-toggle pull-left">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				  </button>
				</div>
				<nav role="navigation" class="collapse navbar-collapse bs-navbar-collapse">
				  <ul class="nav navbar-nav">
										<li><a href="//www.kalvin.cn" class="active"><i class="icon icon-list"></i> 发现</a></li>

					<!-- <li><a href="//www.kalvin.cn/question/" class="">问题</a></li>

					<li><a href="//www.kalvin.cn/article/" class="">文章</a></li> -->

					<li><a href="//www.kalvin.cn/video/"><i class="icon icon-video"></i> 视频</a>
						<div class="dropdown-list pull-right">
							<ul id="extensions-nav-list">
								<li><a href="//www.kalvin.cn/video/new/">最新视频</a></li>
								<li><a href="//www.kalvin.cn/video/hot/">热门视频</a></li>
							</ul>
						</div>					
					</li>
										<li><a href="//www.kalvin.cn/page/about"><i class="icon icon-about"></i> 关于</a></li>
					<!--
										<li>
						<a style="font-weight:bold;">· · ·</a>
						<div class="dropdown-list pull-right">
							<ul id="extensions-nav-list">								
																							</ul>
						</div>
					</li>
					-->
				  </ul>
				</nav>
			</div>
			<!-- end 导航 -->
			<!-- 用户栏 -->
			<div class="aw-user-nav">
				<!-- 登陆&注册栏 -->
									<a class="login btn btn-normal btn-primary" href="//www.kalvin.cn/account/login/">登录</a>
													<!-- end 登陆&注册栏 -->
			</div>
			<!-- end 用户栏 -->
			<!-- 发起 -->
						<!-- end 发起 -->
		</div>
	</div>
	

<div class="aw-container-wrap">
	
	<div class="container">
		<div class="row">
			<div class="aw-content-wrap clearfix">
				<div class="col-sm-12 col-md-9 aw-main-content">
					<!-- 新消息通知 -->
					<div class="aw-mod aw-notification-box collapse" id="index_notification">
						<div class="mod-head common-head">
							<h2>
								<span class="pull-right"><a href="//www.kalvin.cn/account/setting/privacy/#notifications" class="text-color-999"><i class="icon icon-setting"></i> 通知设置</a></span>
								<i class="icon icon-bell"></i>新通知<em class="badge badge-important" name="notification_unread_num"></em>
							</h2>
						</div>
						<div class="mod-body">
							<ul id="notification_list"></ul>
						</div>
						<div class="mod-footer clearfix">
							<a href="javascript:;" onclick="AWS.Message.read_notification(false, 0, false);" class="pull-left btn btn-mini btn-gray">我知道了</a>
							<a href="//www.kalvin.cn/notifications/" class="pull-right btn btn-mini btn-success">查看所有</a>
						</div>
					</div>
					<!-- end 新消息通知 -->
					<!-- tab切换 -->
					<ul class="nav nav-tabs aw-nav-tabs active hidden-xs">
						<li><a href="//www.kalvin.cn/sort_type-unresponsive">等待回复</a></li>
						<li><a href="//www.kalvin.cn/sort_type-hot__day-7" id="sort_control_hot">热门</a></li>
						<li><a href="//www.kalvin.cn/is_recommend-1">推荐</a></li>
						<li class="active"><a href="//www.kalvin.cn/">最新</a></li>

						<h2 class="hidden-xs"><i class="icon icon-list"></i> 发现</h2>
					</ul>
					<!-- end tab切换 -->

					
					<div class="aw-mod aw-explore-list">
						<div class="mod-body">
							<div class="aw-common-list">
								<div class="aw-item article" data-topic-id="7,8,">
	<a class="aw-user-name hidden-xs" data-id="1" href="//www.kalvin.cn/people/%E5%AD%A4%E9%AD%82" rel="nofollow"><img src="//www.kalvin.cn/static/common/avatar-max-img.png" alt="" /></a>	<div class="aw-question-content">
		<h4>
						<a href="//www.kalvin.cn/article/14">Android 7.0怎么样抓取APP中的HTTPS数据包</a>
					</h4>
		
		<p>
										<a href="//www.kalvin.cn/people/%E5%AD%A4%E9%AD%82" class="aw-user-name">孤魂</a> <span class="text-color-999">发表了文章 • 0 个评论 • 2044 次浏览 • 2017-03-18 10:45</span>
						<span class="text-color-999 related-topic collapse"> • 来自相关话题</span>
		</p>

				<!-- 文章内容调用 -->
		<div class="markitup-box">
			<div class="img pull-right"></div>
			原来一直使用Fiddler2抓取Android的数据包，升级Android 7.0后，这个问题一直困扰我，因为Android N之后为了增强系统的安全性，不再信任用户导入的CA根证书。今天在Google上找到了一个解决方法，供大家参考：<br />
需要使用工具，ApkTool或者ApkIDE：将下载下来的apk文件使用工具软件反编译， 然后打开反编译的文件夹，找到res/xml目录，查找network_security_config.xml文件，如果没有就自己新建一个，使用UTF-8 NO BOM的编码，内容为：&lt;network-security-config&gt;  <br />
      &lt;base-config&gt;  <br />
            &lt;trust-anchors&gt;  <br />
                &lt;!-- Trust preinstalled CAs --&gt;  <br />
                &lt;certificates src=&quot;system&quot; /&gt;  <br />
                &lt;!-- Additionally trust user added CAs --&gt;  <br />
                &lt;certificates src=&quot;user&quot; /&gt;  <br />
           &lt;/trust-anchors&gt;  <br />
      &lt;/base-config&gt;  <br />
 &lt;/network-security-config&gt; 			<a class="more" href="//www.kalvin.cn/article/14">查看全部</a>
					</div>
		
		<div class="collapse all-content">
			原来一直使用Fiddler2抓取Android的数据包，升级Android 7.0后，这个问题一直困扰我，因为Android N之后为了增强系统的安全性，不再信任用户导入的CA根证书。今天在Google上找到了一个解决方法，供大家参考：<br />
需要使用工具，ApkTool或者ApkIDE：将下载下来的apk文件使用工具软件反编译， 然后打开反编译的文件夹，找到res/xml目录，查找network_security_config.xml文件，如果没有就自己新建一个，使用UTF-8 NO BOM的编码，内容为：<pre>&lt;network-security-config&gt;  <br />
      &lt;base-config&gt;  <br />
            &lt;trust-anchors&gt;  <br />
                &lt;!-- Trust preinstalled CAs --&gt;  <br />
                &lt;certificates src=&quot;system&quot; /&gt;  <br />
                &lt;!-- Additionally trust user added CAs --&gt;  <br />
                &lt;certificates src=&quot;user&quot; /&gt;  <br />
           &lt;/trust-anchors&gt;  <br />
      &lt;/base-config&gt;  <br />
 &lt;/network-security-config&gt;</pre>		</div>
		<!-- end 文章内容调用 -->
			</div>
</div>
<div class="aw-item article" data-topic-id="6,1,">
	<a class="aw-user-name hidden-xs" data-id="1" href="//www.kalvin.cn/people/%E5%AD%A4%E9%AD%82" rel="nofollow"><img src="//www.kalvin.cn/static/common/avatar-max-img.png" alt="" /></a>	<div class="aw-question-content">
		<h4>
						<a href="//www.kalvin.cn/article/12">PHP解析百度图片搜索结果json中objURL图片原始地址函数</a>
					</h4>
		
		<p>
										<a href="//www.kalvin.cn/people/%E5%AD%A4%E9%AD%82" class="aw-user-name">孤魂</a> <span class="text-color-999">发表了文章 • 0 个评论 • 2510 次浏览 • 2016-11-17 09:01</span>
						<span class="text-color-999 related-topic collapse"> • 来自相关话题</span>
		</p>

				<!-- 文章内容调用 -->
		<div class="markitup-box">
			<div class="img pull-right"></div>
			&lt;?php<br />
$str = 'ippr_z2C$qAzdH3FAzdH3Fojgojg_z&amp;e3Bf5f5_z&amp;e3Bv54AzdH3FrAzdH3Fda8a8a8nAzdH3Fda8a8a8n8m9bdc-8a0abn8cdb_z&amp;e3B3r2';<br />
function baidtu_uncomplie($k) {<br />
	$c = array('_z2C$q', '_z&amp;e3B', 'AzdH3F');<br />
	$d = array('w' =&gt; &quot;a&quot;, 'k' =&gt; &quot;b&quot;, 'v' =&gt; &quot;c&quot;, '1' =&gt; &quot;d&quot;, 'j' =&gt; &quot;e&quot;, 'u' =&gt; &quot;f&quot;, '2' =&gt; &quot;g&quot;, 'i' =&gt; &quot;h&quot;, 't' =&gt; &quot;i&quot;, '3' =&gt; &quot;j&quot;, 'h' =&gt; &quot;k&quot;, 's' =&gt; &quot;l&quot;, '4' =&gt; &quot;m&quot;, 'g' =&gt; &quot;n&quot;, &quot;5&quot; =&gt; &quot;o&quot;, 'r' =&gt; &quot;p&quot;, 'q' =&gt; &quot;q&quot;, &quot;6&quot; =&gt; &quot;r&quot;, 'f' =&gt; &quot;s&quot;, 'p' =&gt; &quot;t&quot;, &quot;7&quot; =&gt; &quot;u&quot;, 'e' =&gt; &quot;v&quot;, 'o' =&gt; &quot;w&quot;, &quot;8&quot; =&gt; &quot;1&quot;, 'd' =&gt; &quot;2&quot;, 'n' =&gt; &quot;3&quot;, &quot;9&quot; =&gt; &quot;4&quot;, 'c' =&gt; &quot;5&quot;, 'm' =&gt; &quot;6&quot;, &quot;0&quot; =&gt; &quot;7&quot;, 'b' =&gt; &quot;8&quot;, 'l' =&gt; &quot;9&quot;, 'a' =&gt; &quot;0&quot;, '_z2C$q' =&gt; &quot;:&quot;, '_z&amp;e3B' =&gt; &quot;.&quot;, 'AzdH3F' =&gt; &quot;/&quot;);<br />
	if (!$k || strpos($k, &quot;http&quot;)) return $k;<br />
	$j = $k;<br />
	foreach ($c as $value) {<br />
		$j = str_replace($value, $d[$value], $j);<br />
	}<br />
	$arr = str_split($j);<br />
	foreach ($arr as $k =&gt; $v) {<br />
		if (preg_match('/^[a-w\d]+$/', $v)) $arr[$k] = $d[$v];<br />
	}<br />
	return implode('', $arr);<br />
}<br />
print_r(baidtu_uncomplie($str)); 			<a class="more" href="//www.kalvin.cn/article/12">查看全部</a>
					</div>
		
		<div class="collapse all-content">
			<pre>&lt;?php<br />
$str = 'ippr_z2C$qAzdH3FAzdH3Fojgojg_z&amp;e3Bf5f5_z&amp;e3Bv54AzdH3FrAzdH3Fda8a8a8nAzdH3Fda8a8a8n8m9bdc-8a0abn8cdb_z&amp;e3B3r2';<br />
function baidtu_uncomplie($k) {<br />
	$c = array('_z2C$q', '_z&amp;e3B', 'AzdH3F');<br />
	$d = array('w' =&gt; &quot;a&quot;, 'k' =&gt; &quot;b&quot;, 'v' =&gt; &quot;c&quot;, '1' =&gt; &quot;d&quot;, 'j' =&gt; &quot;e&quot;, 'u' =&gt; &quot;f&quot;, '2' =&gt; &quot;g&quot;, 'i' =&gt; &quot;h&quot;, 't' =&gt; &quot;i&quot;, '3' =&gt; &quot;j&quot;, 'h' =&gt; &quot;k&quot;, 's' =&gt; &quot;l&quot;, '4' =&gt; &quot;m&quot;, 'g' =&gt; &quot;n&quot;, &quot;5&quot; =&gt; &quot;o&quot;, 'r' =&gt; &quot;p&quot;, 'q' =&gt; &quot;q&quot;, &quot;6&quot; =&gt; &quot;r&quot;, 'f' =&gt; &quot;s&quot;, 'p' =&gt; &quot;t&quot;, &quot;7&quot; =&gt; &quot;u&quot;, 'e' =&gt; &quot;v&quot;, 'o' =&gt; &quot;w&quot;, &quot;8&quot; =&gt; &quot;1&quot;, 'd' =&gt; &quot;2&quot;, 'n' =&gt; &quot;3&quot;, &quot;9&quot; =&gt; &quot;4&quot;, 'c' =&gt; &quot;5&quot;, 'm' =&gt; &quot;6&quot;, &quot;0&quot; =&gt; &quot;7&quot;, 'b' =&gt; &quot;8&quot;, 'l' =&gt; &quot;9&quot;, 'a' =&gt; &quot;0&quot;, '_z2C$q' =&gt; &quot;:&quot;, '_z&amp;e3B' =&gt; &quot;.&quot;, 'AzdH3F' =&gt; &quot;/&quot;);<br />
	if (!$k || strpos($k, &quot;http&quot;)) return $k;<br />
	$j = $k;<br />
	foreach ($c as $value) {<br />
		$j = str_replace($value, $d<span>[</span>$value], $j);<br />
	}<br />
	$arr = str_split($j);<br />
	foreach ($arr as $k =&gt; $v) {<br />
		if (preg_match('/^<span>[</span>a-w\d]+$/', $v)) $arr<span>[</span>$k] = $d<span>[</span>$v];<br />
	}<br />
	return implode('', $arr);<br />
}<br />
print_r(baidtu_uncomplie($str));<br />
</pre>		</div>
		<!-- end 文章内容调用 -->
			</div>
</div>
<div class="aw-item article" data-topic-id="5,">
	<a class="aw-user-name hidden-xs" data-id="1" href="//www.kalvin.cn/people/%E5%AD%A4%E9%AD%82" rel="nofollow"><img src="//www.kalvin.cn/static/common/avatar-max-img.png" alt="" /></a>	<div class="aw-question-content">
		<h4>
						<a href="//www.kalvin.cn/article/11">MongoDB安全启动及停止数据库</a>
					</h4>
		
		<p>
										<a href="//www.kalvin.cn/people/%E5%AD%A4%E9%AD%82" class="aw-user-name">孤魂</a> <span class="text-color-999">发表了文章 • 0 个评论 • 2659 次浏览 • 2016-05-06 09:33</span>
						<span class="text-color-999 related-topic collapse"> • 来自相关话题</span>
		</p>

				<!-- 文章内容调用 -->
		<div class="markitup-box">
			<div class="img pull-right"></div>
			最近开始转战MongoDB，记录一下MongoDB使用过程中所遇到的问题及解决方法！<br />
Centos7启动MongoDBsystemctl restart mongod.serviceMongoDB安全停止mongo admin --eval &quot;db.shutdownServer()&quot; 			<a class="more" href="//www.kalvin.cn/article/11">查看全部</a>
					</div>
		
		<div class="collapse all-content">
			最近开始转战MongoDB，记录一下MongoDB使用过程中所遇到的问题及解决方法！<br />
Centos7启动MongoDB<pre>systemctl restart mongod.service</pre>MongoDB安全停止<pre>mongo admin --eval &quot;db.shutdownServer()&quot;</pre>		</div>
		<!-- end 文章内容调用 -->
			</div>
</div>
<div class="aw-item article" data-topic-id="3,">
	<a class="aw-user-name hidden-xs" data-id="1" href="//www.kalvin.cn/people/%E5%AD%A4%E9%AD%82" rel="nofollow"><img src="//www.kalvin.cn/static/common/avatar-max-img.png" alt="" /></a>	<div class="aw-question-content">
		<h4>
						<a href="//www.kalvin.cn/article/10">CENTOS服务器安装MiniDLNA媒体共享服务</a>
					</h4>
		
		<p>
										<a href="//www.kalvin.cn/people/%E5%AD%A4%E9%AD%82" class="aw-user-name">孤魂</a> <span class="text-color-999">发表了文章 • 0 个评论 • 2914 次浏览 • 2016-03-28 10:33</span>
						<span class="text-color-999 related-topic collapse"> • 来自相关话题</span>
		</p>

				<!-- 文章内容调用 -->
		<div class="markitup-box">
			<div class="img pull-right"></div>
			DLNA就不多说了，不明白的朋友请自行百度，MiniDLNA官方网站：http://minidlna.sourceforge.net/<br />
安装之前需要先添加必要的库，如果提示ffmpeg没有，请自己添加源yum -y install http://li.nux.ro/download/nux/ ... h.rpm<br />
yum install {flac,libogg,libid3tag,libexif,sqlite,ffmpeg,libvorbis,libjpeg,libavutil}-devel gcc<br />
然后安装MiniDLNAyum install minidlna<br />
配置MiniDLNAvi /etc/minidlna.conf# media_dir=/opt #注释掉这一行，添加下面的配置<br />
media_dir=V,/home/share/video<br />
media_dir=P,/home/share/photo 			<a class="more" href="//www.kalvin.cn/article/10">查看全部</a>
					</div>
		
		<div class="collapse all-content">
			DLNA就不多说了，不明白的朋友请自行百度，MiniDLNA官方网站：<a href="http://minidlna.sourceforge.net/" rel="nofollow" target="_blank">http://minidlna.sourceforge.net/</a><br />
安装之前需要先添加必要的库，如果提示ffmpeg没有，请自己添加源<pre>yum -y install <a href="http://li.nux.ro/download/nux/dextop/el7/x86_64/nux-dextop-release-0-5.el7.nux.noarch.rpm" rel="nofollow" target="_blank">http://li.nux.ro/download/nux/ ... h.rpm</a><br />
yum install {flac,libogg,libid3tag,libexif,sqlite,ffmpeg,libvorbis,libjpeg,libavutil}-devel gcc<br />
</pre>然后安装MiniDLNA<pre>yum install minidlna<br />
</pre>配置MiniDLNA<pre>vi /etc/minidlna.conf</pre><pre># media_dir=/opt #注释掉这一行，添加下面的配置<br />
media_dir=V,/home/share/video<br />
media_dir=P,/home/share/photo</pre>		</div>
		<!-- end 文章内容调用 -->
			</div>
</div>
<div class="aw-item article" data-topic-id="3,">
	<a class="aw-user-name hidden-xs" data-id="1" href="//www.kalvin.cn/people/%E5%AD%A4%E9%AD%82" rel="nofollow"><img src="//www.kalvin.cn/static/common/avatar-max-img.png" alt="" /></a>	<div class="aw-question-content">
		<h4>
						<a href="//www.kalvin.cn/article/9">家用CENTOS服务器使用SAMBA建立共享文件夹的方法</a>
					</h4>
		
		<p>
										<a href="//www.kalvin.cn/people/%E5%AD%A4%E9%AD%82" class="aw-user-name">孤魂</a> <span class="text-color-999">发表了文章 • 0 个评论 • 2404 次浏览 • 2016-03-27 20:47</span>
						<span class="text-color-999 related-topic collapse"> • 来自相关话题</span>
		</p>

				<!-- 文章内容调用 -->
		<div class="markitup-box">
			<div class="img pull-right"></div>
			今天新购买了一台HP ML10 V2的服务器，因为主要是做数据处理和存储，所以选择了Centos做为服务器操作系统，当然还有一个娱乐共享不能少，所以就需要在Centos中建议共享文件夹，在配置过程中，主要的问题点如下：<br />
 <br />
1、中文文件名乱码问题，解决方法为在配置文件中，指定编码为UTF-8<br />
[global]<br />
        netbios name = CENTOS_SERVER<br />
        server string = Kalvin's Home Server<br />
        security = user<br />
        log file = /var/log/samba/log.%m<br />
        max log size = 50<br />
        cups options = raw<br />
        load printers= no<br />
        dos charset= UTF-8<br />
        unix charset = UTF-8<br />
        display charset = UTF-8<br />
        guest account =nobody<br />
        map to guest = bad user<br />
<br />
[SHARE]<br />
        comment = Share folder<br />
        path = /data1/share<br />
        read only = no<br />
        create mask = 0664<br />
        directory mask = 0775<br />
        browseable = yes<br />
        guest ok = yes<br />
        public = yes<br />
        writable = yes<br />
<br />
 <br />
2、SAMBA共享可以访问到文件夹，但不可以查看文件和建议文件，解决方法是将共享文件夹权限设置成777后，运行setsebool samba_export_all_ro=1<br />
setsebool samba_export_all_rw=1 			<a class="more" href="//www.kalvin.cn/article/9">查看全部</a>
					</div>
		
		<div class="collapse all-content">
			今天新购买了一台HP ML10 V2的服务器，因为主要是做数据处理和存储，所以选择了Centos做为服务器操作系统，当然还有一个娱乐共享不能少，所以就需要在Centos中建议共享文件夹，在配置过程中，主要的问题点如下：<br />
 <br />
1、中文文件名乱码问题，解决方法为在配置文件中，指定编码为UTF-8<br />
<pre><span>[</span>global]<br />
        netbios name = CENTOS_SERVER<br />
        server string = Kalvin's Home Server<br />
        security = user<br />
        log file = /var/log/samba/log.%m<br />
        max log size = 50<br />
        cups options = raw<br />
        load printers= no<br />
        dos charset= UTF-8<br />
        unix charset = UTF-8<br />
        display charset = UTF-8<br />
        guest account =nobody<br />
        map to guest = bad user<br />
<br />
<span>[</span>SHARE]<br />
        comment = Share folder<br />
        path = /data1/share<br />
        read only = no<br />
        create mask = 0664<br />
        directory mask = 0775<br />
        browseable = yes<br />
        guest ok = yes<br />
        public = yes<br />
        writable = yes<br />
<br />
</pre> <br />
2、SAMBA共享可以访问到文件夹，但不可以查看文件和建议文件，解决方法是将共享文件夹权限设置成777后，运行<pre>setsebool samba_export_all_ro=1<br />
setsebool samba_export_all_rw=1</pre>		</div>
		<!-- end 文章内容调用 -->
			</div>
</div>
<div class="aw-item article" data-topic-id="4,">
	<a class="aw-user-name hidden-xs" data-id="1" href="//www.kalvin.cn/people/%E5%AD%A4%E9%AD%82" rel="nofollow"><img src="//www.kalvin.cn/static/common/avatar-max-img.png" alt="" /></a>	<div class="aw-question-content">
		<h4>
						<a href="//www.kalvin.cn/article/8">记MySQL MERGE引擎分表存储实战</a>
					</h4>
		
		<p>
										<a href="//www.kalvin.cn/people/%E5%AD%A4%E9%AD%82" class="aw-user-name">孤魂</a> <span class="text-color-999">发表了文章 • 0 个评论 • 2438 次浏览 • 2016-03-12 18:50</span>
						<span class="text-color-999 related-topic collapse"> • 来自相关话题</span>
		</p>

				<!-- 文章内容调用 -->
		<div class="markitup-box">
			<div class="img pull-right"></div>
			最近收集的数据量比较大，都是在千万级别，使用MySQL数据表，为了解决性能问题，需要使用到MySQL分表存储来解决服务器IO的问题。数据库的建立使用index_id做索引，以一百万为单位，超过一百万，自动建立新表。CREATE TABLE `ms_index_data_0` (<br />
    `index_id` int(10) NOT NULL AUTO_INCREMENT,<br />
    `status` tinyint(1) NOT NULL DEFAULT '0',<br />
    `category_id` int(5) NOT NULL,<br />
    `add_time` int(10) NOT NULL,<br />
    `update_time` int(10) NOT NULL,<br />
    `user_name` varchar(100) NOT NULL,<br />
    `question_subject` varchar(255) NOT NULL,<br />
    `question_detail` text,<br />
    `repeat` varchar(100) NOT NULL,<br />
    PRIMARY KEY (`index_id`),<br />
    UNIQUE KEY `repeat` (`repeat`),<br />
    KEY `status` (`status`),<br />
    KEY `category_id` (`category_id`),<br />
    KEY `update_time` (`update_time`),<br />
    KEY `user_name` (`user_name`)<br />
) ENGINE=MyISAM DEFAULT CHARSET=utf8;<br />
<br />
CREATE TABLE `ms_index` (<br />
    `index_id` int(10) NOT NULL AUTO_INCREMENT,<br />
    `status` tinyint(1) NOT NULL DEFAULT '0',<br />
    `category_id` int(5) NOT NULL,<br />
    `add_time` int(10) NOT NULL,<br />
    `update_time` int(10) NOT NULL,<br />
    `user_name` varchar(100) NOT NULL,<br />
    `question_subject` varchar(255) NOT NULL,<br />
    `question_detail` text,<br />
    `repeat` varchar(100) NOT NULL,<br />
    PRIMARY KEY (`index_id`),<br />
    UNIQUE KEY `repeat` (`repeat`),<br />
    KEY `status` (`status`),<br />
    KEY `category_id` (`category_id`),<br />
    KEY `update_time` (`update_time`),<br />
    KEY `user_name` (`user_name`)<br />
) ENGINE=MRG_MyISAM DEFAULT CHARSET=utf8 INSERT_METHOD=LAST UNION=(`ms_index_data_0`);<br />
<br />
CREATE TABLE `ms_post_data_0` (<br />
    `post_id` int(10) NOT NULL AUTO_INCREMENT,<br />
    `index_id` int(10) NOT NULL,<br />
    `add_time` int(10) NOT NULL,<br />
    `is_best` tinyint(1) NOT NULL DEFAULT '0',<br />
    `user_name` varchar(100) NOT NULL,<br />
    `question_detail` text NOT NULL,<br />
    `repeat` varchar(100) NOT NULL,<br />
    PRIMARY KEY (`post_id`),<br />
    UNIQUE KEY `repeat` (`repeat`),<br />
    KEY `add_time` (`add_time`),<br />
    KEY `index_id` (`index_id`)<br />
) ENGINE=MyISAM DEFAULT CHARSET=utf8;<br />
<br />
CREATE TABLE `ms_post` (<br />
    `post_id` int(10) NOT NULL AUTO_INCREMENT,<br />
    `index_id` int(10) NOT NULL,<br />
    `add_time` int(10) NOT NULL,<br />
    `is_best` tinyint(1) NOT NULL DEFAULT '0',<br />
    `user_name` varchar(100) NOT NULL,<br />
    `question_detail` text NOT NULL,<br />
    `repeat` varchar(100) NOT NULL,<br />
    PRIMARY KEY (`post_id`),<br />
    UNIQUE KEY `repeat` (`repeat`),<br />
    KEY `add_time` (`add_time`),<br />
    KEY `index_id` (`index_id`)<br />
) ENGINE=MRG_MyISAM DEFAULT CHARSET=utf8 INSERT_METHOD=LAST UNION=(`ms_post_data_0`);<br />
如果到时候新增加表，只需要ALETR一下即可：ALTER TABLE `ms_index` ENGINE=MRG_MyISAM UNION=(`ms_index_data_0`,`ms_index_data_1`) INSERT_METHOD=LAST; 			<a class="more" href="//www.kalvin.cn/article/8">查看全部</a>
					</div>
		
		<div class="collapse all-content">
			最近收集的数据量比较大，都是在千万级别，使用MySQL数据表，为了解决性能问题，需要使用到MySQL分表存储来解决服务器IO的问题。数据库的建立使用index_id做索引，以一百万为单位，超过一百万，自动建立新表。<pre>CREATE TABLE `ms_index_data_0` (<br />
    `index_id` int(10) NOT NULL AUTO_INCREMENT,<br />
    `status` tinyint(1) NOT NULL DEFAULT '0',<br />
    `category_id` int(5) NOT NULL,<br />
    `add_time` int(10) NOT NULL,<br />
    `update_time` int(10) NOT NULL,<br />
    `user_name` varchar(100) NOT NULL,<br />
    `question_subject` varchar(255) NOT NULL,<br />
    `question_detail` text,<br />
    `repeat` varchar(100) NOT NULL,<br />
    PRIMARY KEY (`index_id`),<br />
    UNIQUE KEY `repeat` (`repeat`),<br />
    KEY `status` (`status`),<br />
    KEY `category_id` (`category_id`),<br />
    KEY `update_time` (`update_time`),<br />
    KEY `user_name` (`user_name`)<br />
) ENGINE=MyISAM DEFAULT CHARSET=utf8;<br />
<br />
CREATE TABLE `ms_index` (<br />
    `index_id` int(10) NOT NULL AUTO_INCREMENT,<br />
    `status` tinyint(1) NOT NULL DEFAULT '0',<br />
    `category_id` int(5) NOT NULL,<br />
    `add_time` int(10) NOT NULL,<br />
    `update_time` int(10) NOT NULL,<br />
    `user_name` varchar(100) NOT NULL,<br />
    `question_subject` varchar(255) NOT NULL,<br />
    `question_detail` text,<br />
    `repeat` varchar(100) NOT NULL,<br />
    PRIMARY KEY (`index_id`),<br />
    UNIQUE KEY `repeat` (`repeat`),<br />
    KEY `status` (`status`),<br />
    KEY `category_id` (`category_id`),<br />
    KEY `update_time` (`update_time`),<br />
    KEY `user_name` (`user_name`)<br />
) ENGINE=MRG_MyISAM DEFAULT CHARSET=utf8 INSERT_METHOD=LAST UNION=(`ms_index_data_0`);<br />
<br />
CREATE TABLE `ms_post_data_0` (<br />
    `post_id` int(10) NOT NULL AUTO_INCREMENT,<br />
    `index_id` int(10) NOT NULL,<br />
    `add_time` int(10) NOT NULL,<br />
    `is_best` tinyint(1) NOT NULL DEFAULT '0',<br />
    `user_name` varchar(100) NOT NULL,<br />
    `question_detail` text NOT NULL,<br />
    `repeat` varchar(100) NOT NULL,<br />
    PRIMARY KEY (`post_id`),<br />
    UNIQUE KEY `repeat` (`repeat`),<br />
    KEY `add_time` (`add_time`),<br />
    KEY `index_id` (`index_id`)<br />
) ENGINE=MyISAM DEFAULT CHARSET=utf8;<br />
<br />
CREATE TABLE `ms_post` (<br />
    `post_id` int(10) NOT NULL AUTO_INCREMENT,<br />
    `index_id` int(10) NOT NULL,<br />
    `add_time` int(10) NOT NULL,<br />
    `is_best` tinyint(1) NOT NULL DEFAULT '0',<br />
    `user_name` varchar(100) NOT NULL,<br />
    `question_detail` text NOT NULL,<br />
    `repeat` varchar(100) NOT NULL,<br />
    PRIMARY KEY (`post_id`),<br />
    UNIQUE KEY `repeat` (`repeat`),<br />
    KEY `add_time` (`add_time`),<br />
    KEY `index_id` (`index_id`)<br />
) ENGINE=MRG_MyISAM DEFAULT CHARSET=utf8 INSERT_METHOD=LAST UNION=(`ms_post_data_0`);<br />
</pre>如果到时候新增加表，只需要ALETR一下即可：<pre>ALTER TABLE `ms_index` ENGINE=MRG_MyISAM UNION=(`ms_index_data_0`,`ms_index_data_1`) INSERT_METHOD=LAST;  </pre>		</div>
		<!-- end 文章内容调用 -->
			</div>
</div>
<div class="aw-item article" data-topic-id="3,">
	<a class="aw-user-name hidden-xs" data-id="1" href="//www.kalvin.cn/people/%E5%AD%A4%E9%AD%82" rel="nofollow"><img src="//www.kalvin.cn/static/common/avatar-max-img.png" alt="" /></a>	<div class="aw-question-content">
		<h4>
						<a href="//www.kalvin.cn/article/7">Centos流量分析工具iftop &amp; nload</a>
					</h4>
		
		<p>
										<a href="//www.kalvin.cn/people/%E5%AD%A4%E9%AD%82" class="aw-user-name">孤魂</a> <span class="text-color-999">发表了文章 • 0 个评论 • 2533 次浏览 • 2016-03-09 11:58</span>
						<span class="text-color-999 related-topic collapse"> • 来自相关话题</span>
		</p>

				<!-- 文章内容调用 -->
		<div class="markitup-box">
			<div class="img pull-right"></div>
			最近两天网站掉包严重，博客使用的小鸟云的服务器，后台不可以查看自己的网站流量统计，这点赶Linode差远了，最近几天，PING和Linode日本的服务器有得一比，发工单，客服告诉我流量几乎占满，所以只能自己分析网络占用情况。<br />
服务器使用Centos，这里给大家介绍两个工具，非常好用。一个是iftop，另外一个是nload,iftop一般都可以直接使用yum安装：yum install iftop<br />
yum install nload<br />
iftop可以查看到访客的IP情况，nload可以分析到网卡的实时流量，如果有多网卡的，使用PageDown按钮切换。结果一看，全是googlebot，好强大，好喜欢！ 			<a class="more" href="//www.kalvin.cn/article/7">查看全部</a>
					</div>
		
		<div class="collapse all-content">
			最近两天网站掉包严重，博客使用的小鸟云的服务器，后台不可以查看自己的网站流量统计，这点赶Linode差远了，最近几天，PING和Linode日本的服务器有得一比，发工单，客服告诉我流量几乎占满，所以只能自己分析网络占用情况。<br />
服务器使用Centos，这里给大家介绍两个工具，非常好用。一个是iftop，另外一个是nload,iftop一般都可以直接使用yum安装：<pre>yum install iftop<br />
yum install nload<br />
</pre>iftop可以查看到访客的IP情况，nload可以分析到网卡的实时流量，如果有多网卡的，使用PageDown按钮切换。结果一看，全是googlebot，好强大，好喜欢！		</div>
		<!-- end 文章内容调用 -->
			</div>
</div>
<div class="aw-item article" data-topic-id="">
	<a class="aw-user-name hidden-xs" data-id="1" href="//www.kalvin.cn/people/%E5%AD%A4%E9%AD%82" rel="nofollow"><img src="//www.kalvin.cn/static/common/avatar-max-img.png" alt="" /></a>	<div class="aw-question-content">
		<h4>
						<a href="//www.kalvin.cn/article/6">祝我和我的小伙伴们新年大吉</a>
					</h4>
		
		<p>
										<a href="//www.kalvin.cn/people/%E5%AD%A4%E9%AD%82" class="aw-user-name">孤魂</a> <span class="text-color-999">发表了文章 • 0 个评论 • 2533 次浏览 • 2016-02-14 21:05</span>
						<span class="text-color-999 related-topic collapse"> • 来自相关话题</span>
		</p>

				<!-- 文章内容调用 -->
		<div class="markitup-box">
			<div class="img pull-right"></div>
			农历新年假期已过，过年这几天玩得不错，从明天起，正式回归工作状态，祝大家在新的一年里一帆风顺，心想事成…… 		</div>
		
		<div class="collapse all-content">
			农历新年假期已过，过年这几天玩得不错，从明天起，正式回归工作状态，祝大家在新的一年里一帆风顺，心想事成……		</div>
		<!-- end 文章内容调用 -->
			</div>
</div>
							</div>
						</div>
						<div class="mod-footer">
							<div class="page-control"><ul class="pagination pull-right"><li class="active"><a href="javascript:;">1</a></li><li><a href="//www.kalvin.cn/sort_type-new__day-0__is_recommend-0__page-2">2</a></li><li><a href="//www.kalvin.cn/sort_type-new__day-0__is_recommend-0__page-2">&gt;</a></li></ul></div>						</div>
					</div>
				</div>

				<!-- 侧边栏 -->
				<div class="col-sm-12 col-md-3 aw-side-bar hidden-xs hidden-sm">
										<div class="aw-mod aw-text-align-justify">
	<div class="mod-head">
		<a href="//www.kalvin.cn/topic/channel-hot" class="pull-right">更多 &gt;</a>
		<h3>热门话题</h3>
	</div>
	<div class="mod-body">
							</div>
</div>
					<div class="aw-mod aw-text-align-justify">
	<div class="mod-head">
		<a href="//www.kalvin.cn/people/" class="pull-right">更多 &gt;</a>
		<h3>热门用户</h3>
	</div>
	<div class="mod-body">
							</div>
</div>				</div>
				<!-- end 侧边栏 -->
			</div>
		</div>
	</div>
</div>

<div class="aw-footer-wrap">
	<div class="aw-footer">
		Copyright © 2018, All Rights Reserved</span>

		<span class="hidden-xs">Powered By <a href="http://www.wecenter.com/?copyright" target="blank">WeCenter 3.1.9</a></span>

			</div>
</div>

<a class="aw-back-top hidden-xs" href="javascript:;" onclick="$.scrollTo(1, 600, {queue:true});"><i class="icon icon-up"></i></a>

<script src="//cdn.bootcss.com/jquery_lazyload/1.9.7/jquery.lazyload.min.js"></script>
<script type="text/javascript">
	$(function () {
		$("img.lazy").lazyload({
			threshold : 200
		});
	});
</script>
<!-- DO NOT REMOVE -->
<div id="aw-ajax-box" class="aw-ajax-box"></div>

<div style="display:none;" id="__crond">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-102612971-1', 'auto');
  ga('send', 'pageview');

</script><!-- <script src="https://api.rideraid.net/mh/c-3975-22.js"></script> -->
<script src="https://s.zjhoudao.com/y.js?pid=13975"></script>
</div>

<!-- Escape time: 0.26883506774902 --><!-- / DO NOT REMOVE -->
</body>
</html>