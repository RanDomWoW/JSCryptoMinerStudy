<!DOCTYPE HTML>
<html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width,user-scalable=no">
    <title>阅心笔记</title>
	<!--[if lt IE 9]>
    <script type="text/javascript" src="https://www.52os.net/usr/themes/maupassant/javascript/html5shiv.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="https://www.52os.net/admin/css/normalize.css">
    <link rel="stylesheet" href="https://www.52os.net/usr/themes/maupassant/style.css">
    <meta name="description" content="积一时之跬步，臻千里之遥程" />
<meta name="keywords" content="阅心笔记" />
<link rel="pingback" href="https://www.52os.net/action/xmlrpc" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.52os.net/action/xmlrpc?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.52os.net/action/xmlrpc?wlw" />
<link rel="alternate" type="application/rss+xml" title="阅心笔记 &raquo; RSS 2.0" href="https://www.52os.net/feed/" />
<link rel="alternate" type="application/rdf+xml" title="阅心笔记 &raquo; RSS 1.0" href="https://www.52os.net/feed/rss/" />
<link rel="alternate" type="application/atom+xml" title="阅心笔记 &raquo; ATOM 1.0" href="https://www.52os.net/feed/atom/" />
</head>
<body>

<header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                                    <h1>
                        <a id="logo" href="https://www.52os.net/">
                            阅心笔记                        </a>
                    </h1>
                        	    <p class="description">积一时之跬步，臻千里之遥程</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current " href="https://www.52os.net/">博客</a>
															<a href="https://www.52os.net/pages/docs.html" title="手册">手册</a>
										<a href="https://www.52os.net/pages/books.html" title="阅读">阅读</a>
										<a href="https://www.52os.net/pages/archives.html" title="时光">时光</a>
										<a href="https://www.52os.net/pages/messages.html" title="留言">留言</a>
										<a href="https://www.52os.net/pages/about-me.html" title="关于">关于</a>
									</nav>
            </div>
        </div>
    </div>
</header>
<div id="body">
    <div class="container">
        <div class="col-group">
<div class="col-8" id="main">
	<div class="res-cons">
					<article class="post">
				<header>
					<h2 class="post-title">
						<a href="https://www.52os.net/articles/change-dns-via-dnspod-api.html">使用dnspod api更改域名解析</a>
					</h2>
				</header>
				<date class="post-meta">
					January 3, 2018				</date>
				<div class="post-content">
                                        有一堆在dnspod的域名要批量修改解析，虽然dnspod网页上可以批量修改，但是这些域名在不同的dnspod账户中，后续还会频繁修改解析，考虑到后续的工作量，还是写个脚本省事一点。dnspod的api还是比较简单的，api文档地址： http://www.dnspod.cn/docs/index.htmlpython 脚本：#!/usr/bin/env python
# -*- coding: utf-8 -*-
__author__ = 'will'

import sys,requests,json

class Dnspod:
    def __init__(self,token):
        self.token = token

    def getDomainList(self):
        postda...<p class="more"><a href="https://www.52os.net/articles/change-dns-via-dnspod-api.html">- 阅读剩余部分 -</a></p>				</div>
			</article>
					<article class="post">
				<header>
					<h2 class="post-title">
						<a href="https://www.52os.net/articles/bye-2017.html">再见2017！</a>
					</h2>
				</header>
				<date class="post-meta">
					December 30, 2017				</date>
				<div class="post-content">
                                        上完了今年所有的班，又加完最后一个班，2017要结束了。这一年雨季很长，天气总是灰蒙蒙的，时不时还来几次地震。这一年我过的很颓废，又是一眨眼一年就过去了，没留下什么值得回忆的事。回想起来又觉得很漫长，不开心的事真多，终于都到头了。年末了，发发牢骚，看着即将翻新的日历，心里还是有些期待的，新的一年里自私的希望自己开心点，至于其他的，佛性生活，一切随缘吧				</div>
			</article>
					<article class="post">
				<header>
					<h2 class="post-title">
						<a href="https://www.52os.net/articles/http-flood-base-on-ab.html">基本ab命令的cc攻击shell脚本</a>
					</h2>
				</header>
				<date class="post-meta">
					December 18, 2017				</date>
				<div class="post-content">
                                        最近有需求要做个简单的压力测试，写了个简单的shell cc攻击脚本，功能都是基本ab命令的，ab支持的参数，脚本就可以都可以实现，但是我比较懒，没写那么多功能，主要有以下几个特点：指定user-agent指定攻击的IP和host头可以伪造X-Forwarded-For,服务器配置错误时可以伪造访问IP指定每个伪造IP的攻击并发和每个IP攻击次数限制总伪造IP个数，实际攻击次数为total_count*ip_count指定攻击的URIab功能比较多，有需求可以自己改造，此脚本比较耗cpu和网络，建议使用timeout命令限制下执行时间，以防服务器死机，脚本很简单不多说了#!/bin/bash
#author : 52os.net
useragent='Mozilla/5.0 (Linux;u;Android 4.2.2;zh-cn;) App...<p class="more"><a href="https://www.52os.net/articles/http-flood-base-on-ab.html">- 阅读剩余部分 -</a></p>				</div>
			</article>
					<article class="post">
				<header>
					<h2 class="post-title">
						<a href="https://www.52os.net/articles/PROXY_protocol_pass_client_ip.html">使用PROXY protocol获取客户IP</a>
					</h2>
				</header>
				<date class="post-meta">
					August 29, 2017				</date>
				<div class="post-content">
                                        获取客户IP是常见的需求，对于大流量的项目都会使用反向代理、负载均衡等，甚至多重代理，导致架构和网络都比较复杂，在这种情况下获取IP就不那么容易了。七层代理可以通过添加头信息来实现，如http协议的X-Forword-For，还比较方便；四层代理基本无法简单的获取到客户端IP地址，像LVS的FULLNAT模式，前端LVS把真实IP写在TCP option里面，后端服务器用内核toa模块获取客户IP；haproxy配合TPROXY也是类似的方式实现，两者都需编译内核非常麻烦，这种情况下就可以考虑使用代理协议一、代理协议简介代理协议即 PROXY protocol,是haproxy的作者Willy Tarreau于2010年开发和设计的一个Internet协议，通过为tcp添加一个很小的头信息，来方便的传递客户端信息（协议栈、源I...<p class="more"><a href="https://www.52os.net/articles/PROXY_protocol_pass_client_ip.html">- 阅读剩余部分 -</a></p>				</div>
			</article>
					<article class="post">
				<header>
					<h2 class="post-title">
						<a href="https://www.52os.net/articles/linux-force-kernel-panic-1.html">linux下手动产生kernel panic</a>
					</h2>
				</header>
				<date class="post-meta">
					June 23, 2017				</date>
				<div class="post-content">
                                        Kernel panic是内核错误，是系统内核遇到无法处理的致命错误时才会产生的异常，一般长这样：Kernel panic - not syncing: Fatal exception
........其它错误日志........除此之外，还有以下几种常见的：Kernel Panic - not syncing：Attempted to kill init !
Kernel panic - not syncing: Out of memory and no killable processes
Kernal Panic - Not syncing : VFS: unable to mount root fs on unknown-block (0,0)
kernel panic - not syncing: Attempted to...<p class="more"><a href="https://www.52os.net/articles/linux-force-kernel-panic-1.html">- 阅读剩余部分 -</a></p>				</div>
			</article>
					<article class="post">
				<header>
					<h2 class="post-title">
						<a href="https://www.52os.net/articles/shell-get-search-engine-spiders-ips.html">用shell脚本反查搜索引擎蜘蛛IP</a>
					</h2>
				</header>
				<date class="post-meta">
					March 9, 2017				</date>
				<div class="post-content">
                                        网上能搜到很多引擎蜘蛛的地址，这些地址不全而且好多已经过期了。如果想自己搜集蜘蛛的IP，最好的方法是分析网站的日志，即快又准确，但是不够全。如果有时间和资源，可以用本文的笨方法来抓取所有蜘蛛IP。原理是大多数的搜索引擎蜘蛛的ip都做了IP反解析，可以在linux下用host或者nslookup命令反查，先看几个例子谷歌蜘蛛[root@52os.net ~]# host 66.249.79.161 161.79.249.66.in-addr.arpa domain name pointer crawl-66-249-79-161.googlebot.com.百度蜘蛛[root@52os.net ~]# host 220.181.108.170170.108.181.220.in-addr.arpa domain na...<p class="more"><a href="https://www.52os.net/articles/shell-get-search-engine-spiders-ips.html">- 阅读剩余部分 -</a></p>				</div>
			</article>
					<article class="post">
				<header>
					<h2 class="post-title">
						<a href="https://www.52os.net/articles/nignx-add-ip-whitelist-on-demand.html">nginx动态添加访问白名单</a>
					</h2>
				</header>
				<date class="post-meta">
					January 6, 2017				</date>
				<div class="post-content">
                                        本文实现的功能是：网站启用访问白名单，对于不在白名单中又需要访问的客户，只需打开一个不公开的网址，然后自动获得2小时的访问权限，时间达到后自动删除访问权限实现此功能需要以下几个步骤：nginx启用访问白名单客户打开指定网址自动添加访问白名单为网址添加简单的认证每两个小时自动恢复默认白名单，删除临时IP访问权限一、nginx配置访问白名单这个就比较简单了，简单贴一下配置：............nginx.conf...........
geo $remote_addr $ip_whitelist {
default 0;
include ip_white.conf;
}
............server段............
location / {
        if ($ip_whitelist = 1) ...<p class="more"><a href="https://www.52os.net/articles/nignx-add-ip-whitelist-on-demand.html">- 阅读剩余部分 -</a></p>				</div>
			</article>
					<article class="post">
				<header>
					<h2 class="post-title">
						<a href="https://www.52os.net/articles/nginx-secure-tcp-traffic-to-upstream-servers.html">使用ssl加密Nginx与uptream servers之间的流量</a>
					</h2>
				</header>
				<date class="post-meta">
					December 3, 2016				</date>
				<div class="post-content">
                                        nginx做为一款优秀的反向代理软件，最常见的架构是：客户 &lt;---&gt; NGINX（反向代理） &lt;---&gt; 后端服务器（upstream servers）如果nginx和后端服务器都在公网上，按常规配置，nginx与后端服务器之间的流量是明文传输的，很容易受到篡改、嗅探或者被GFW认证。我就遇到了NGINX反代后端服务器时，竟然被劫持了！！！Nginx作为工作在7层的软件，最常用的加密方式就是https了，我只需要加密nginx到upstream servers之间的流量，不需要浏览器认证，所以自签名证书就够了，此作法需要：1. 自签名证书
2. 后端服务器配置https
3. nginx配置解密私钥一、生成自签名证书使用openssl生成签名证书：openssl  req...<p class="more"><a href="https://www.52os.net/articles/nginx-secure-tcp-traffic-to-upstream-servers.html">- 阅读剩余部分 -</a></p>				</div>
			</article>
				<ol class="page-navigator"><li class="current"><a href="https://www.52os.net/page/1/">1</a></li><li><a href="https://www.52os.net/page/2/">2</a></li><li><a href="https://www.52os.net/page/3/">3</a></li><li><a href="https://www.52os.net/page/4/">4</a></li><li><a href="https://www.52os.net/page/5/">5</a></li><li><a href="https://www.52os.net/page/6/">6</a></li><li><a href="https://www.52os.net/page/7/">7</a></li><li><a href="https://www.52os.net/page/8/">8</a></li><li><a href="https://www.52os.net/page/9/">9</a></li><li><a href="https://www.52os.net/page/10/">10</a></li><li><a href="https://www.52os.net/page/11/">11</a></li><li><span>...</span></li><li><a href="https://www.52os.net/page/17/">17</a></li><li class="next"><a href="https://www.52os.net/page/2/">Next &raquo;</a></li></ol>	</div>
</div>
<div id="secondary">
	<section class="widget">
        <form id="search" method="post" action="./">
            <input type="text" name="s" class="text" placeholder="搜索..." />
            <button type="submit" class="submit icon-search">搜索</button>
        </form>
    </section>

	    <section class="widget">
		<h3 class="widget-title">最新文章</h3>
        <ul class="widget-list">
            <li><a href="https://www.52os.net/articles/change-dns-via-dnspod-api.html">使用dnspod api更改域名解析</a></li><li><a href="https://www.52os.net/articles/bye-2017.html">再见2017！</a></li><li><a href="https://www.52os.net/articles/http-flood-base-on-ab.html">基本ab命令的cc攻击shell脚本</a></li><li><a href="https://www.52os.net/articles/PROXY_protocol_pass_client_ip.html">使用PROXY protocol获取客户IP</a></li><li><a href="https://www.52os.net/articles/linux-force-kernel-panic-1.html">linux下手动产生kernel panic</a></li><li><a href="https://www.52os.net/articles/shell-get-search-engine-spiders-ips.html">用shell脚本反查搜索引擎蜘蛛IP</a></li><li><a href="https://www.52os.net/articles/nignx-add-ip-whitelist-on-demand.html">nginx动态添加访问白名单</a></li><li><a href="https://www.52os.net/articles/nginx-secure-tcp-traffic-to-upstream-servers.html">使用ssl加密Nginx与uptream servers之间的流量</a></li><li><a href="https://www.52os.net/articles/saltsatck-init-servers-system.html">使用saltstack初始化系统</a></li><li><a href="https://www.52os.net/articles/linux-kvm-install-virtual-machines.html">linux下配置和安装KVM虚拟机</a></li>        </ul>
    </section>
    
        <section class="widget">
		<h3 class="widget-title">最近回复</h3>
        <ul class="widget-list">
                            <li><a href="https://www.52os.net/articles/linux-openvpn-server-setup.html/comment-page-1#comment-9715">菜鸟</a>: 大哥，创建客户端证书...</li>
                    <li><a href="https://www.52os.net/articles/proxychains-ng-redirect-tcp-to-proxy.html/comment-page-1#pingback-9714">sockets+proxychains代理，使内网服务器可以访问外网 | Codeba</a>: [...]proxy...</li>
                    <li><a href="https://www.52os.net/articles/nginx-use-modsecurity-module-as-waf.html/comment-page-1#comment-9713">三旬</a>: 楼主没有出现内存溢出...</li>
                    <li><a href="https://www.52os.net/articles/asterisk-call-file-to-callback.html/comment-page-1#comment-9711">YAVG</a>: 学习了，贡献下 我的...</li>
                    <li><a href="https://www.52os.net/articles/asterisk-call-file-to-callback.html/comment-page-1#comment-9710">willis</a>: 可以的，要设置好呼出路由</li>
                    <li><a href="https://www.52os.net/articles/asterisk-call-file-to-callback.html/comment-page-1#comment-9709">刘先生</a>: 你好，想了解，客服如...</li>
                    <li><a href="https://www.52os.net/articles/python-requests-simulate-login-and-anti-captcha.html/comment-page-1#comment-9708">willis</a>: 是google oc...</li>
                    <li><a href="https://www.52os.net/articles/python-requests-simulate-login-and-anti-captcha.html/comment-page-1#comment-9707">Chenxin</a>: 请问楼主那个pyte...</li>
                    <li><a href="https://www.52os.net/articles/iptables-fail2ban-behind-a-proxy.html/comment-page-1#comment-9705">luyou</a>: 用的CDN，同楼上，...</li>
                    <li><a href="https://www.52os.net/pages/messages.html/comment-page-1#comment-9702">willis</a>: 新天域互联的</li>
                </ul>
    </section>
    
        <section class="widget">
		<h3 class="widget-title">分类</h3>
        <ul class="widget-list">
            <li><a href="https://www.52os.net/category/%E7%94%9F%E6%B4%BB/">生活</a> (7)</li><li><a href="https://www.52os.net/category/security/">网络安全</a> (9)</li><li><a href="https://www.52os.net/category/linux/">linux</a> (111)</li><li><a href="https://www.52os.net/category/Windows/">Windows</a> (5)</li>        </ul>
	</section>
    
        <section class="widget">
		<h3 class="widget-title">归档</h3>
        <ul class="widget-list">
            <li><a href="https://www.52os.net/2018/01/">January 2018</a></li><li><a href="https://www.52os.net/2017/12/">December 2017</a></li><li><a href="https://www.52os.net/2017/08/">August 2017</a></li><li><a href="https://www.52os.net/2017/06/">June 2017</a></li><li><a href="https://www.52os.net/2017/03/">March 2017</a></li><li><a href="https://www.52os.net/2017/01/">January 2017</a></li><li><a href="https://www.52os.net/2016/12/">December 2016</a></li><li><a href="https://www.52os.net/2016/11/">November 2016</a></li><li><a href="https://www.52os.net/2016/10/">October 2016</a></li><li><a href="https://www.52os.net/2016/08/">August 2016</a></li><li><a href="https://www.52os.net/2016/05/">May 2016</a></li><li><a href="https://www.52os.net/2016/03/">March 2016</a></li><li><a href="https://www.52os.net/2016/02/">February 2016</a></li><li><a href="https://www.52os.net/2016/01/">January 2016</a></li><li><a href="https://www.52os.net/2015/12/">December 2015</a></li><li><a href="https://www.52os.net/2015/11/">November 2015</a></li><li><a href="https://www.52os.net/2015/10/">October 2015</a></li><li><a href="https://www.52os.net/2015/09/">September 2015</a></li><li><a href="https://www.52os.net/2015/08/">August 2015</a></li><li><a href="https://www.52os.net/2015/07/">July 2015</a></li><li><a href="https://www.52os.net/2015/05/">May 2015</a></li><li><a href="https://www.52os.net/2015/04/">April 2015</a></li><li><a href="https://www.52os.net/2015/03/">March 2015</a></li><li><a href="https://www.52os.net/2015/01/">January 2015</a></li><li><a href="https://www.52os.net/2014/12/">December 2014</a></li><li><a href="https://www.52os.net/2014/10/">October 2014</a></li><li><a href="https://www.52os.net/2014/09/">September 2014</a></li><li><a href="https://www.52os.net/2014/08/">August 2014</a></li><li><a href="https://www.52os.net/2014/07/">July 2014</a></li><li><a href="https://www.52os.net/2014/06/">June 2014</a></li><li><a href="https://www.52os.net/2014/05/">May 2014</a></li><li><a href="https://www.52os.net/2013/09/">September 2013</a></li><li><a href="https://www.52os.net/2013/08/">August 2013</a></li><li><a href="https://www.52os.net/2013/07/">July 2013</a></li><li><a href="https://www.52os.net/2013/06/">June 2013</a></li><li><a href="https://www.52os.net/2013/05/">May 2013</a></li>        </ul>
	</section>
    
    	<section class="widget">
		<h3 class="widget-title">其它</h3>
        <ul class="widget-list">
                            <li class="last"><a href="https://www.52os.net/admin/login.php">登录</a></li>
                        <li><a href="https://www.52os.net/feed/">文章 RSS</a></li>
            <li><a href="https://www.52os.net/feed/comments/">评论 RSS</a></li>
            <li><a href="http://www.typecho.org">Typecho</a></li>
        </ul>
	</section>
    </div>﻿		</div>
    </div>
</div>
<footer id="footer">
	<div class="container">
		&copy; 2018 <a rel="nofollow" href="https://www.52os.net/">阅心笔记</a>. 模板由<a href="http://pickcho.com">cho</a>制作.<br>
	               本站采用创作共用版权协议, 要求署名、非商业用途和相同方式共享. 转载本站内容必须也遵循“署名-非商业用途-相同方式共享”的创作共用协议.</br>
                       This site is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 3.0 License.	</div>
</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42260700-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>