
<!DOCTYPE html>
<html lang="ko">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=Edge">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,target-densitydpi=medium-dpi" />
	<meta property="og:site_name" content="T Times" />
	<!--<meta name="theme-color" content="#3F393D" /> -->
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<link rel="apple-touch-icon" sizes="57x57" href="favicon/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="favicon/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="favicon/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="favicon/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="favicon/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="favicon/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="favicon/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="favicon/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="favicon/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
	<link rel="manifest" href="favicon/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="favicon/ms-icon-144x144.png">
	<meta property="og:title" content="‘T Times’" />
	<meta property="og:description" content="지식과 정보가 있는 모바일 뉴스" />
	<meta property="og:image" content="http://menu.mt.co.kr/ttimes/images/metatag_ttimes.gif" />

	<title> T Times </title>
	<meta property="og:type" content="website" />
	<meta name="apple-touch-icon" href="http://menu.mt.co.kr/ttimes/images/t_sns_200.png">

	<link rel="stylesheet" type="text/css" href="http://menu.mt.co.kr/ttimes/css/ttimes_common2.css?12" />
	<script type="text/javascript" src="http://menu.mt.co.kr/js/jquery-1.12.3.min.js"></script>
	<script type="text/javascript" src="http://menu.mt.co.kr/js/jindo.mobile.ns.js"></script>
	<script type="text/javascript" src="http://menu.mt.co.kr/js/jquery.lazy.min.js?20170224"></script>
	<script defer type="text/javascript" src="http://menu.mt.co.kr/js/applaunch.js"></script>
	
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-5NMMGLQ');</script>
	<!-- End Google Tag Manager -->
	
	<script type="text/javascript">
		var osName = jindo.$Agent().os().getName();
		var appType = '';
		var cPage = 'index';
		var isMobileApp = false;
		var category = '';
		var articleId = '';
		var tailUrl = '';

		var pPage = (sessionStorage.page) ? sessionStorage.page : "index.html";

		var needAppUpdate = false; //Check update if need
		var hasPrevVersion = false;

		var STAND_LOAD_COUNT = 10;

		var FAVORITE_ADD = "plus";
		var FAVORITE_SUB = "minus";

		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		  ga('create', 'UA-56219015-1', 'auto');
		  ga('require', 'displayfeatures');
		  ga('require', 'linkid', 'linkid.js');
		  ga('send', 'pageview');
	</script>
	<!--[if lt IE 9]>
		<script type="text/javascript" src="http://menu.mt.co.kr/ttimes/js/html5.js"></script>
		<script type="text/javascript" src="http://menu.mt.co.kr/ttimes/js/respond.min.js"></script>
	<![endif]-->
</head>
<!--[if IE 8 ]> <body id="ttimes" class="ie8"> <![endif]-->
<!--[if IE 9 ]> <body id="ttimes" class="ie9"> <![endif]-->
<!--[if !IE]>--><body id="ttimes"><!--<![endif]-->

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5NMMGLQ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

	<div id="wrap">
		<!-- header // 모바일 , 1530px 이하 화면 -->
		<header id="header" class="fixed only_mobile">
			<!-- 배너 -->
			<div class="head_bnr" style="display:none;">
				<span class="icon_bnr">T Times</span>
				<p class="txt">앱을 사용하면 더 편리합니다.<br />최신 <a href="javascript:callAppInstall();">티타임즈 앱을 다운로드</a> 하세요!</p> <!-- 모바일 웹 처음 실행 시(일주일마다 갱신) 팝업 노출 -->
				<button type="button" class="bnr_close">닫기</button>
			</div>
			<!-- // 배너 -->

			<!-- top_head -->
			<section class="top_head">
				<h1 class="logo"><a href="javascript:moveIndex();"><img src="http://menu.mt.co.kr/ttimes/images/renew/logo2.png" alt="T Times" /></a></h1>
				<button type="button" class="btn_menu">메뉴</button> <!-- btn_menu 클릭하면 gnb 활성화 -->
				
				<button type="button" class="btn_refresh2" style="display:none">새로고침</button> <!-- 161115 새로고침 추가 -->
							<button type="button" class="btn_sch">검색</button> <!-- btn_sch 클릭하면 m_sch에 클래스 on 추가해주세요 -->
				<div class="m_sch">
					<form action="search.html" method="GET">
						<fieldset class="schbox">
							<div class="input_box">
								<label for="search" class="hide">검색어 입력</label>
								<input type="search" name="kwd" id="search" class="input_sch">
							</div>
							<button type="submit" class="btn_sch3"><span class="icon">검색</span></button>
						</fieldset>
					</form>
					<button type="submit" class="btn_close"><span class="icon">닫기</span></button>
				</div>
						</section>
			<!-- // top_head -->
			<!-- gnb -->
			<section class="gnb"> <!-- gnb 활성화될때 클래스 on 추가해주세요 -->
				<h2 class="subject"><a href="javascript:moveIndex();">T Times</a></h2>
							<ul class="gnb_list">
					<li class="bundle home" id="index"><a href="javascript:moveIndex();" class='on'>홈</a></li>
					<li class="bundle" id="news"><a href="javascript:moveIndex('news');" >뉴스</a></li>
					<li class="bundle" id="business"><a href="javascript:moveIndex('business');" >비즈니스</a></li>
					<li class="bundle" id="culture"><a href="javascript:moveIndex('culture');" >컬쳐</a></li>
					<li class="bundle" id="rank"><a href="javascript:moveIndex('rank');" >랭킹뉴스</a></li>
					<li class="bundle" id="intro"><a href="javascript:moveIndex('intro');" >T Times 소개</a></li>
					<li class="bundle only_mobile"><a href="javascript:callAppInstall();">앱으로보기</a></li>
				</ul>
			
				<h3 class="hide">SNS 사이트</h3>
				<ul class="sns_list">
					<li class="bundle"><a href="javascript:outlinkToApp('https://www.facebook.com/ttimes10');" target="_blank" class="btn_fb">페이스북</a></li>
					<li class="bundle"><a href="javascript:outlinkToApp('https://twitter.com/ttimes10');" target="_blank" class="btn_tw">트위터</a></li>
					<li class="bundle"><a href="javascript:outlinkToApp('http://post.naver.com/my.nhn?memberNo=17369166');" target="_blank" class="btn_post">네이버 포스트</a></li>
					<li class="bundle"><a href="javascript:outlinkToApp('http://live.media.daum.net/ttimes');" target="_blank" class="btn_daum">다음1분</a></li>
					<li class="bundle"><a href="javascript:outlinkToApp('http://pf.kakao.com/_CSTru');" target="_blank" class="btn_ca">카카오플친</a></li>
				</ul>
				<p class="copyright">COPYRIGHT &copy; T TIMES ALL RIGHTS RESERVED.</p>
				<button type="button" class="btn_close">닫기</button>
			</section>
			<!-- // gnb -->
					<section class="sub_topHead" style="display:none">
				<h2 class="tit1">랭킹뉴스</h2>
				<a class="btn_pre only_mobile" style="cursor:pointer">뒤로</a>
				<a class="btn_refresh" style="cursor:pointer">새로고침</a>
			</section>
					<div class="dim"></div> <!-- gnb 활성화 될때 검정 뒷 배경 -->
		</header>
		<!-- // header // 모바일 , 1530px 이하 화면 -->
		<!-- header // pc , 1530px 이상 화면 -->
		<header id="header" class="only_web">
			<!-- gnb -->
			<section class="gnb"> <!-- gnb 활성화될때 클래스 on 추가해주세요 -->
				<h2 class="subject"><a href="javascript:moveIndex();">T Times</a></h2>
				<ul class="gnb_list">
					<li class="bundle home" id="index"><a href="javascript:moveIndex();" class='on'>홈</a></li>
					<li class="bundle" id="news"><a href="javascript:moveIndex('news');" >뉴스</a></li>
					<li class="bundle" id="business"><a href="javascript:moveIndex('business');" >비즈니스</a></li>
					<li class="bundle" id="culture"><a href="javascript:moveIndex('culture');" >컬쳐</a></li>
					<li class="bundle" id="rank"><a href="javascript:moveIndex('rank');" >랭킹뉴스</a></li>
					<li class="bundle" id="intro"><a href="javascript:moveIndex('intro');" >T Times 소개</a></li>
					<li class="bundle only_mobile"><a href="javascript:callAppInstall();">앱으로보기</a></li>
				</ul>
				<div class="web_sch on">
					<fieldset class="schbox">
						<legend>통합 검색</legend>
						<div class="input_box">
							<label for="search" class="hide">검색어 입력</label>
							<input type="search" name="search" id="search" class="input_sch">
						</div>
						<button type="submit" class="btn_sch2">검색</button>
					</fieldset>
				</div>
							<h3 class="hide">SNS 사이트</h3>
				<ul class="sns_list">
					<li class="bundle"><a href="javascript:outlinkToApp('https://www.facebook.com/ttimes10');" target="_blank" class="btn_fb">페이스북</a></li>
					<li class="bundle"><a href="javascript:outlinkToApp('https://twitter.com/ttimes10');" target="_blank" class="btn_tw">트위터</a></li>
					<li class="bundle"><a href="javascript:outlinkToApp('http://post.naver.com/my.nhn?memberNo=17369166');" target="_blank" class="btn_post">네이버 포스트</a></li>
					<li class="bundle"><a href="javascript:outlinkToApp('http://live.media.daum.net/ttimes');" target="_blank" class="btn_daum">다음1분</a></li>
					<li class="bundle"><a href="javascript:outlinkToApp('http://pf.kakao.com/_CSTru');" target="_blank" class="btn_ca">카카오플친</a></li>
				</ul>
				<a href="#" class="btn_myScrap2">MY 스크랩</a>
				<p class="copyright">COPYRIGHT &copy;<br />T TIMES ALL RIGHTS RESERVED.</p>
			</section>
			<!-- // gnb -->
					<section class="sub_topHead" style="display:none">
				<h2 class="tit1">랭킹뉴스</h2>
				<a class="btn_pre only_mobile" style="cursor:pointer">뒤로</a>
				<a class="btn_refresh" style="cursor:pointer">새로고침</a>
			</section>
				</header>
		<!-- // header // pc , 1530px 이상 화면 -->
		<main id="content" class="content" style="margin-top:53px"><script type="text/javascript">
	var isWorking = false;
	
	var start = 0;
	var loadCount = 10;
	var end = loadCount;
	
	var favoriteArr;

	$(document).ready(function(){
		var pOffset = 0;

		favoriteArr = JSON.parse(localStorage.TTimes_favorite || "[]") || [];
		
		if(osName == "ios"){
			removeIllegalData();
		}
		
		if(sessionStorage.page != undefined || sessionStorage.page != null){
			if(sessionStorage.page.indexOf("view.html") != -1){
				end = loadCount = Math.ceil(parseInt(sessionStorage.index));

				if(loadCount == 0 || isNaN(loadCount)){
					end = loadCount = 10;	
				}

				pOffset = sessionStorage.offset;
			}else{
				removeScrollPosition();

				scrollToTop();
			}
		}

		$(".list_p1").UiBuilder();

		if(category == 'favorite'){
			if(favoriteArr.length != 0){
				$(".list_p1").UiBuilder('setLimitationOfDataSize', favoriteArr.length);

				var appendId = favoriteArr.join("|");
				var param = {
					type: "list",
					category: category,
					articleId: appendId,
					start: start,
					loadCount: loadCount
				};

				$.ajax({
					url: DATA_URL,
					data: param,
					success: function(data){
						var toJson = JSON.parse(data);

						var datas = toJson.datas;
						if(datas == null) return;

						markLikeSign(datas);

						$(".list_p1").UiBuilder('setOptions', {
							start: start,
							end: end,
							scrapEvent: onScrap,
							completion: onScrollAnimate,
							onDataEnd: function(){
								start += loadCount;

								var param = {
									type: "list",
									category: category,
									articleId: appendId,
									start: start,
									loadCount: loadCount
								};

								loadListData(param);
							}
						});

						$(".list_p1").UiBuilder('setData',datas);
						$(".list_p1").UiBuilder('build');

						if(pOffset != 0){
							$(".list_p1").UiBuilder('scrollTo', pOffset);

							start = end - loadCount;
							loadCount = STAND_LOAD_COUNT;
						}
					}
				});
			}
		}else{
			var toJson = {"total":4436,"datas":[{"id":"2018032016537798605","title":"MIT \uacf5\ud559\ubc15\uc0ac\uac00 \ud480\uc5b4\ub0b4\ub294 \uc6b4(\u904b) \uc774\uc57c\uae30&#12982;","type":"3","thumb":"2018032016537798605_22968.png","scrapCount":"8","favorite":"","isVideoExist":"false"},{"id":"2018031916587798516","title":"\uc5ec\ub7ec\ubd84\ub3c4 \uc885\uc774 \ub193\uace0 \ud55c\ubc88 \uadf8\ub824\ubcf4\uc138\uc694!","type":"3","thumb":"2018031916587798516_68466.png","scrapCount":"9","favorite":"","isVideoExist":"false"},{"id":"2018031913267751523","title":"\ub3c4\uc800\ud788 \uc548 \ubcfc \uc218 \uc5c6\ub294 \uad11\uace0\ud310","type":"3","thumb":"2018031913267751523_33192.png","scrapCount":"20","favorite":"","isVideoExist":"false"},{"id":"2018031614237791853","title":"&#034;\uc7ac\ubbf8\uc788\uc9c0 \uc54a\uc740 \uc778\uc0dd\uc740 \ube44\uadf9&#034;\uc774\ub77c\ub358 \ud638\ud0b9 \ubc15\uc0ac\uc758 \uc720\uba38","type":"3","thumb":"2018031614237791853_33125.png","scrapCount":"71","favorite":"","isVideoExist":"false"},{"id":"2018031517257759848","title":"\uc544\ub0a0\ub85c\uadf8 \ud5a5\uae30 \ubb3c\uc52c \ud48d\uae30\ub294 \ud544\uc988\ucee4\ud53c\uc758 \uc571","type":"3","thumb":"2018031517257759848_18318.png","scrapCount":"110","favorite":"","isVideoExist":"false"},{"id":"2018031517417747772","title":"\uc54c\ub9ac\ubc14\ubc14\ubcf4\ub2e4 \uc798\ub098\uac14\ub358 \ub2f9\ub2f9\uc655, 4\ub144 \uc804 \uadf8\ub54c\uc758 \ud328\ucc29","type":"3","thumb":"2018031517417747772_21791.png","scrapCount":"103","favorite":"","isVideoExist":"false"},{"id":"2018031519017786003","title":"\uadf8\ub140\ub294 \ub531 \ud3ec\ucd98\uc9c0 \ucee4\ubc84 \uac10\uc774\uc5c8\ub2e4.","type":"3","thumb":"2018031519017786003_11094.png","scrapCount":"89","favorite":"","isVideoExist":"false"},{"id":"2018031417487746025","title":"\ud558\ub8e8\uba74 \uc9d1 \ud55c \ucc44 \ub69d\ub531 \ud504\ub9b0\ud2b8\ud574\uc900\ub2e4!","type":"3","thumb":"2018031417487746025_33104.png","scrapCount":"142","favorite":"","isVideoExist":"false"},{"id":"2018031417097737405","title":"\ub9dd\ud560 \ubed4\ud55c \ucd08\uc778\uc885\ud68c\uc0ac\uac00 \uc544\ub9c8\uc874 \ube44\ubc00\ubcd1\uae30\ub85c!","type":"3","thumb":"2018031417097737405_71362.jpg","scrapCount":"323","favorite":"","isVideoExist":"false"},{"id":"2018031418167722456","title":"\uc774 \ud68c\uc0ac\uc5d0 \uc9c0\uc6d0\ud558\uace0 \uc2f6\uc5b4\uc9c0\ub294 \uc0ac\ubb34\uc2e4 \uc0ac\uc9c4\ub4e4","type":"3","thumb":"2018031418167722456_42103.jpg","scrapCount":"119","favorite":"","isVideoExist":"false"}]};
			var datas = toJson.datas;

			markLikeSign(datas);

			$(".list_p1").UiBuilder('setLimitationOfDataSize', toJson.total);
			$(".list_p1").UiBuilder('setOptions', {
				start: start,
				end: end,
				scrapEvent: onScrap,
				completion: onScrollAnimate,
				onDataEnd: function(){
					start += loadCount;

					var param = {
						type: "list",
						category: category,
						articleId: appendId,
						start: start,
						loadCount: loadCount
					};

					loadListData(param);
				}
			});

			$(".list_p1").UiBuilder('setData',datas);
			$(".list_p1").UiBuilder('build');

			if(end != STAND_LOAD_COUNT){
				start = STAND_LOAD_COUNT;

				var _e = end - start;

				var param = {
					type: "list",
					category: category,
					start: start,
					loadCount: _e
				}

				$.ajax({
					url: DATA_URL,
					data: param,
					success: function(data){
						var toJson = JSON.parse(data);

						var datas = toJson.datas;
						if(datas == null) return;

						markLikeSign(datas);
						
						$(".list_p1").UiBuilder('setData',datas);
						$(".list_p1").UiBuilder('build');
						
						start = _e;

						loadCount = STAND_LOAD_COUNT;
						$(".list_p1").UiBuilder('scrollTo', pOffset);
					}
				});
			}
		}
	})

	function loadListData (param) {
		if(!isWorking){
			isWorking = true;

			$.ajax({
				url:DATA_URL,
				data:param,
				success: function(data){
					var toJson = JSON.parse(data);
					var datas = toJson.datas;
					
					if(datas == null) return;

					markLikeSign(datas);

					$(".list_p1").UiBuilder('setData', datas);
					$(".list_p1").UiBuilder('build');
					
					$(".list_p1").UiBuilder('setOptions', 'callFromDB', false);
					
					isWorking = false;
				}
			});
		}
	}

			$(window).unload(function(){
			removeScrollPosition();
	
			sessionStorage.setItem("offset", $(document).scrollTop());
			sessionStorage.setItem("index",  $(".list_p1").UiBuilder('getCurrentIndex'));
		});
		
	function onScrap (id, elem){
		if(!isWorking){ //중복 클릭 방지
			isWorking = true;

			var isOn = $(elem).hasClass("on");

			if(isOn){
				if(category == "favorite"){
					if(confirm("이 기사를 MY♥ 목록에서 삭제합니다.")){
						selectCountSet(FAVORITE_SUB, id);

						$(elem).removeClass("on");
					}else{
						isWorking = false;
					}
				}else{
					selectCountSet(FAVORITE_SUB, id);

					$(elem).removeClass("on");
				}
			}else{
				$(elem).addClass("on");

				selectCountSet(FAVORITE_ADD, id);
			}
		}else{
			console.log("block");
		}
	}

	function selectCountSet(counttype, id){
		callApp('indicatorState','state=show');
		var url = 'countSave.html';

		var elem = $("#count_"+id);

		$.ajax({
			url:url,
			data:{
				countype: counttype,
				gisa_id: id
			},
			success: function(data){
				elem.text(data);
				
				if(counttype == FAVORITE_SUB){
					var beRemovedIdx = favoriteArr.indexOf(id);
					favoriteArr.splice(beRemovedIdx, 1);

					alert("찜 해제 되었습니다.");

					if(category == "favorite"){
						$("list_p1").UiBuilder('removeFromView', id);
					}
				}else{
					if(favoriteArr == null){
						favoriteArr = new Array();
					}

					/* 기사가 중복으로 localStorage에 들어가는 것을 방지 */
					var isDuplicated = favoriteArr.indexOf(id) != -1;
					
					alert("찜 되었습니다.");

					if(!isDuplicated){
						favoriteArr.unshift(id);
					}
				}
				
				var jsonToString = JSON.stringify(favoriteArr);

				var searchForError = /\"+[a-zA-Z]+\"/g.test(jsonToString);

				localStorage.setItem("TTimes_favorite", jsonToString);

				callApp('indicatorState','state=hide');

				isWorking = false;
			}
		});
	}

	function removeIllegalData() {
		favoriteArr = favoriteArr.filter(function(obj){
			return obj != "(null)";	
		});

		localStorage.setItem("TTimes_favorite", JSON.stringify(favoriteArr));
	}

</script>
<div class="bxcn">
	<h2 class="hide">최신 기사 리스트</h2>
	<!-- 메인 리스트 -->
	<ul class="list_p1">
		
	</ul>
	<!-- // 메인 리스트 -->
</div>
			<a href="javascript:scrollToTop();" class="hdbtop " title="상단 이동">상단 이동</a>
					<div class="footer_txt" id="footer_company_info">
				머니투데이&nbsp;&nbsp;서울시 종로구 청계천로 11 (서린동, 청계한국빌딩)&nbsp;&nbsp;대표이사/발행인/편집인 : 박종면<br/>등록번호 : 서울 아01084&nbsp;&nbsp;사업자등록번호 101-81-50419&nbsp;&nbsp;등록일 2009.12.24<br/>제호 : 머니투데이&nbsp;&nbsp;발행일 2000.1.1&nbsp;&nbsp;연락처 02)724-7718&nbsp;&nbsp;청소년보호책임자 : 심기철
			</div>
			<script type="text/javascript">
				$(document).ready(function() {
					if(isMobileApp || osName){
						$('#footer_company_info').hide();
					}
				});

				$(window).scroll(function() {
					$( ".footer_txt" ).hide();
				});
			</script>
						</main>
		<!-- // content -->
	</div>
	<script type="text/javascript" src="js/UiBuilder.js?20170425"></script> <!-- 리스트 생성하는 JS -->
	<script type="text/javascript" src="http://menu.mt.co.kr/js/SwipeDetector.js"></script> <!-- 터치 방향 감지하는 JS -->
	<!-- 2017.04.26 NAVER Analytics 추가 LaValse -->
	<script type="text/javascript" src="http://wcs.naver.net/wcslog.js"></script>
	<script type="text/javascript">
		if(!wcs_add) var wcs_add = {};
		wcs_add["wa"] = "160ad962ed0265";
		wcs_do();
	</script>
	<script type="text/javascript">
		
		var isMenuOpen = false;
		var isSearchOpen = false;
		
		var DATA_URL = "getArticleData.php";

		function elementClickListener(){
					$(".btn_menu").on('click', function(){
				$('.gnb').addClass('on');
				isMenuOpen = true;
			});

			$(".btn_close").on('click', function(){
				$('.gnb').removeClass('on');

				$(".m_sch").removeClass('on');

				isMenuOpen = false;
			});

			$(".bnr_close").on('click', function(){
				localStorage.setItem('TTimes_prevent_banner',new Date().getTime());
				
				if(cPage != "view"){
					$(".head_bnr").slideUp(400, function(){
						$(".content").animate({"margin-top": $("#header").height()+"px"});
					});
				}else{
					var hasRemoved = false;

					$(".head_bnr").slideUp({
						duration: 400,
						step: function(){
							if(!hasRemoved){
								hasRemoved = true;

								$("#header").animate({"margin-top":"0px"}, 400);
							}
						}
					});
				}
			});

			$(".btn_sch,.link_sch").bind('click', function(){
				$(".m_sch").addClass('on');
				//$(".web_sch").addClass('on');
			});

			$(".m_sch .btn_sch3").on('click', function(){
				var keyword = $(".m_sch #search").val();
				search(keyword);
			});

			$(".web_sch .btn_sch2").on('click', function(){
				var keyword = $(".web_sch #search").val();
				search(keyword);
			});

			if(isMobileApp && osName == "ios"){
				$(".m_sch #search").on('focus', function(){
					isSearchOpen = true;
					$("#header").removeClass('fixed');
					$("#content").css("margin-top","0px");
				});

				$(".m_sch #search").on('blur', function(){
					isSearchOpen = false;

					$("#header").addClass('fixed');
					$("#content").css("margin-top", $("#header").height());
				});
			}

			$(".web_sch #search").keydown(function(e){
				if(e.which == 13){
					var keyword = $(".web_sch #search").val();
					
					search(keyword);
				}
			});

			$(".btn_myScrap1,.btn_myScrap2").on('click', function(){
				document.location.href = "index.html?menu=favorite";
			});

			$(".btn_refresh").on('click', function(){
				window.location.reload();
			});

			$(".btn_pre").on('click', function(){
				window.history.go(-1);
			});
			
				}

		function search(keyword) {
			removeScrollPosition();

			document.location.href = "search.html?kwd="+encodeURIComponent(keyword);
		}

		window.addEventListener('orientationchange', function(orientation){
			var type = (orientation == 0 || orientation == 180) ? "portrait" : "landscape";
			
			if(isMobileApp && osName == "ios"){
				$("#content").css("margin-top", (type == "landscape") ? "0px" : $("#header").height());
			}
		});

		$(document).ready(function() {
			var useragent = navigator.userAgent;
			if(useragent.indexOf('MSIE 10') > 0) { $('#ttimes').addClass('ie10'); }
			if(useragent.indexOf('rv:11.0') > 0) { $('#ttimes').addClass('ie11'); }
			if(useragent.indexOf('Edge') > 0) { $('#ttimes').addClass('edge'); }
			if(osName == 'bInapp'){ osName = 'ios'; }
			
			elementClickListener();
					// 리뉴얼 이전 버전이고, 심사 기간에 업로드가 안되면 틩김
			if(appType){
				alert("새 업데이트 버젼이 있습니다. 마켓으로 이동 합니다.");

				document.location.href = "http://outlink/*"+((osName == 'ios')?"https://itunes.apple.com/us/app/titaimjeu-t-times/id951552415?l=ko&ls=1&mt=8":"market://details?id=com.ttimes");
				return;
			}

			var currentDate = new Date().getTime();
			var isBannerShow = true;

			if(localStorage.TTimes_prevent_banner){
				var timeDiff = Math.abs(currentDate - localStorage.TTimes_prevent_banner);
				var diffDays = Math.floor(timeDiff / (1000 * 3600 * 24));
				
				isBannerShow = (diffDays >= 7);
			}
			
			if(isBannerShow){
				setTimeout(function(){
					if(cPage == "view"){
						$("#header").animate({"margin-top": "55px"}, 400);
					}

					$(".head_bnr").slideDown(400, function(){
						if(cPage != "view"){
							$(".content").animate({"margin-top": $("#header").height()+"px"});	
						}
					});
				},300);
			}
					
			if(cPage == "index"){
				if(category != ""){
					$(".sub_topHead").show();

					if(category == "news"){
						$(".sub_topHead .tit1").html("뉴스");
					}else if(category == "business"){
						$(".sub_topHead .tit1").html("비즈니스");
					}else if(category == "culture"){
						$(".sub_topHead .tit1").html("컬쳐");
					}else if(category == "favorite"){
						$(".sub_topHead .tit1").html('<img src="http://menu.mt.co.kr/ttimes/images/renew/btn_myScrap1.png" alt="마이 스크랩">');
					}
				}
			}else if(cPage == "search"){
				$(".sub_topHead").show();
			}else if(cPage == "rank"){
				$(".sub_topHead").show();
			}else if(cPage == "intro"){
				$(".sub_topHead").show();

				$("main").addClass("ttimes_info");
				$(".sub_topHead .tit1").html("T Times 소개");
				$(".sub_topHead .btn_refresh").hide();
			}else if(cPage == "view"){
				$("#header").removeClass("fixed");

				$(".head_bnr").css({
					"position": "fixed",
					"top": "0px",
					"left": "0px",
					"width": "100%",
					"z-index": 999
				});
			}

			rearrangeBodyOffset();
			
			// Swipe 감지
			$("#wrap").detect({
				callback: function(direction){
					if(direction == 'left'){
						$('.gnb').removeClass('on');
					}else if(direction == 'right'){
						$('.gnb').addClass('on');
					}	
				}
			});

			$("#wrap").detect('setOption', 'threshold', 2);
			$(".hdbtop").hide();
			$("#btnBack").hide();
		});

		function saveUpdateOffer() {
			var param = {
				state : false,
				version: ""
			}

			localStorage.setItem("showUpdateAlert", JSON.stringify(param));
		}

		function resignUpdateOffer () {
			localStorage.removeItem("showUpdateAlert");
		}

		function clearCache () {
			callApp('clearCache','');
			
			if(osName != "ios"){
				window.location.reload(true);
			}
		}
	
		function callAppInstall () {
			if(osName == 'ios' || osName == 'android'){
				appgo('mtttimes');
			}
		}
		
		function callApp (type, args) {
			if(isMobileApp){
				if(osName == 'ios'){
					try{
						// iOS는 TYPE 값 바로 앞에 / 붙여줘야 href 탈 수 있다.(기기문제 인지 모르겠지만 '/' 없을 때 iPhone 4s 기종에서 먹통)
						if(args != null) type += "/&"+args;
						document.location.href = "ttimesapp://"+type;
					}catch(e){
						console.log("Not Supported");
					}
				}else if(osName == 'android'){
					window.js_bridge.dispatcher(type, args);
				}
			}
		}

		function outlinkToApp (url) {
			if(isMobileApp){
				callApp('outlink', "href="+encodeURIComponent(url));
			}else{
				window.open(url);
			}
		}

		function scrollToTop(){
			var body = $("html, body");
			body.stop().animate({scrollTop:0}, '500', 'swing');
		}

		function onScrollAnimate () {
			var scrollTo = $(window).scrollTop()+50;
			var body = $("html, body");
			body.stop().animate({scrollTop:scrollTo}, '500', 'swing');
		}

		function removeScrollPosition () {
			sessionStorage.removeItem('index');
			sessionStorage.removeItem('offset');
		}
		
		$(window).resize(function(){
			rearrangeBodyOffset();
		});
		
		/* 리뉴얼 이전 찜 데이터 이관(모바일 앱만 해당) */
		function migrateFavoriteDatas (items) {
			var prevFavoriteArr = items.split('A');
			var migrateArr = new Array();

			if(localStorage.TTimes_favorite){
				var favoriteArr = JSON.parse(localStorage.TTimes_favorite);
				migrateArr = favoriteArr.concat(prevFavoriteArr);
			}else {
				migrateArr = prevFavoriteArr;
			}

			localStorage.setItem('TTimes_favorite', JSON.stringify(migrateArr));
		}

		function moveIndex (section) {
			sessionStorage.setItem('index',0);
			sessionStorage.setItem('offset',0);
			sessionStorage.setItem('page','');
			
			var url = '';
			if(section == 'rank'){
				url = "rank.html";
			}else if(section == 'intro'){
				url = 'intro.html';
			}else{
				url = "index.html"+((section != undefined) ? '?menu='+section : '');
			}

			document.location.href = url;
		}

		function rearrangeBodyOffset () {
			if((cPage == "index" && category != "") || (cPage != "index" && cPage != "view")){
				var headerHeight = ($(".head_bnr").css('display') == "none") 
										? $("#header").height()
										: $(".head_bnr").height()+$(".top_head").height()+$(".sub_topHead").height();

				$("#content").css("margin-top", headerHeight+"px");
			}else if(cPage == "view"){
				$("#content").css("margin-top", "");
			}
		}

		/*
			Only operate on iOS Safari. window.unload was deprecated
		*/
			
		$(window).unload(function(){
			sessionStorage.setItem("page",tailUrl);
		});
			
		/* 스크롤 위치 감지 (top버튼 및 헤더 고정) */
		$(window).scroll(function(){
			var offsetY = window.scrollY;
			
			var isScrollStart = offsetY < 100;

			if(isScrollStart){
				if(osName != ""){
					if($("#btnBack").css("display") != 'none'){
						$("#btnBack").hide();
					}
				}

				if($(".hdbtop").css("display") != 'none')
					$(".hdbtop").hide();
			}else{
				if(osName != ""){
					if($("#btnBack").css("display") == 'none'){
						$("#btnBack").show();
					}
				}

				if($(".hdbtop").css("display") == 'none')
					$(".hdbtop").show();
			}
			
			if(cPage != "view"){
				if(!isSearchOpen) $("#content").css('margin-top', $("#header").height());
			}
		});
		
		function migratePrevFavorite (items) {
			var prevFavoriteArr = items.split('|');
			console.log(prevFavoriteArr);

			var migrateArr;	
			if(localStorage.TTimes_favorite){
				var favoriteArr = JSON.parse(localStorage.TTimes_favorite);

				migrateArr = favoriteArr.concat(prevFavoriteArr);
			}
		}
		
	
		function markLikeSign (datas) {
			// Mobile Web을 제외 (모바일 앱이거나 모바일 앱은 아니지만 osName이 없을 경우(PC버젼)만 들어가기)
			if(isMobileApp || (!isMobileApp && osName == '')){
				if(favoriteArr != null){
					for(var i=0; i<datas.length; i++){
						for(var j=0; j<favoriteArr.length; j++){
							if(datas[i].id == favoriteArr[j]){
								datas[i].favorite = true;
								break;
							}
						}
					}
				}
			}
		}
		
	</script>
</body>
</html>