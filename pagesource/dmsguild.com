<!DOCTYPE html public "-//W3C//DTD HTML 4.01 Transitional//EN"><html dir="LTR" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
        <title>Dungeon Masters Guild - </title>
        <link rel="icon" href="themes/dmg/favicon.ico"  type="image/x-icon" />
        <link rel="shortcut icon" href="themes/dmg/favicon.ico"  type="image/x-icon" />
        <meta name="description" content="">
        <meta name="keywords" content="Dungeon Masters Guild, Wizards of the Coast, Kobold Press, IDW Publishing, Plate Mail Games, dnd pdf, D&D pdf, download D&D, wizards, wotc">
        <!-- <base href="https://www.dmsguild.com/"> -->
        <link rel="alternate" type="application/rss+xml" title="Dungeon Masters Guild - Hottest Sellers [RSS]" href="http://www.dmsguild.com/rss_bestsellers.php">
        <link rel="alternate" type="application/rss+xml" title="Dungeon Masters Guild - Newest Titles [RSS]" href="http://www.dmsguild.com/rss.php">
        <!-- include XAJAX -->

<script type="text/javascript" charset="UTF-8">
/* <![CDATA[ */
try { if (undefined == xajax.config) xajax.config = {}; } catch (e) { xajax = {}; xajax.config = {}; };
xajax.config.requestURI = "index.php";
xajax.config.statusMessages = false;
xajax.config.waitCursor = true;
xajax.config.version = "xajax 0.5";
xajax.config.legacy = false;
xajax.config.defaultMode = "asynchronous";
xajax.config.defaultMethod = "POST";
/* ]]> */
</script>
<script type="text/javascript" src="includes/ajax/xajax_js/xajax_core.js" charset="UTF-8"></script>
<script type="text/javascript" charset="UTF-8">
/* <![CDATA[ */
window.setTimeout(
 function() {
  var scriptExists = false;
  try { if (xajax.isLoaded) scriptExists = true; }
  catch (e) {}
  if (!scriptExists) {
   alert("Error: the xajax Javascript component could not be included. Perhaps the URL is incorrect?\nURL: includes/ajax/xajax_js/xajax_core.js");
  }
 }, 2000);
/* ]]> */
</script>

<script type='text/javascript' charset='UTF-8'>
/* <![CDATA[ */
xajax_updatefav = function() { return xajax.request( { xjxfun: 'updatefav' }, { parameters: arguments } ); };
xajax_updatefav_interval = function() { return xajax.request( { xjxfun: 'updatefav_interval' }, { parameters: arguments } ); };
xajax_update_notifications = function() { return xajax.request( { xjxfun: 'update_notifications' }, { parameters: arguments } ); };
xajax_record_help_box_dismiss = function() { return xajax.request( { xjxfun: 'record_help_box_dismiss' }, { parameters: arguments } ); };
/* ]]> */
</script>

			<!-- Non-minified files -->
			<link type="text/css" rel="stylesheet" href="/default.css" />
			<link type="text/css" rel="stylesheet" href="/web-font-stacks.css" />
			<link type="text/css" rel="stylesheet" href="/includes/responsive.css" />
			<link type="text/css" rel="stylesheet" href="/includes/javascript/fancybox/jquery.fancybox-1.3.4.css" />
			<link type="text/css" rel="stylesheet" href="/includes/javascript/qtip2/jquery.qtip.css" />
			<link type="text/css" rel="stylesheet" href="/includes/javascript/iscroll/iscroll.css" />
			<link type="text/css" rel="stylesheet" href="/includes/javascript/datatables/css/jquery.dataTables.min.css" />

			<script type="text/javascript" src="/includes/javascript/jquery/jquery-1.7.1.min.js" /></script>
			<script type="text/javascript" src="/includes/javascript/jquery/jquery.tools.min.js" /></script>
			<script type="text/javascript" src="/includes/javascript/jquery/jquery.text-overflow.min.js" /></script>
			<script type="text/javascript" src="/includes/javascript/jquery/jquery.dd.min.js" /></script>
			<script type="text/javascript" src="/includes/javascript/datatables/jquery.dataTables.min.js" /></script>
			<script type="text/javascript" src="/includes/javascript/jquery/jquery.impromptu.min.js" /></script>
			<script type="text/javascript" src="/includes/javascript/jquery/jquery.fileDownload.js" /></script>
			<script type="text/javascript" src="/includes/javascript/jquery/jquery.cookie.js" /></script>
			<script type="text/javascript" src="/includes/javascript/qtip2/jquery.qtip.min.js" /></script>
			<script type="text/javascript" src="/includes/javascript/fancybox/jquery.mousewheel-3.0.4.pack.js" /></script>
			<script type="text/javascript" src="/includes/javascript/fancybox/jquery.fancybox-1.3.4.pack.js" /></script>
			<script type="text/javascript" src="/includes/javascript/jqueryui/jquery-ui-1.8.18.custom.min.js" /></script>
			<script type="text/javascript" src="/includes/javascript/jqueryui/jquery.ui.core.min.js" /></script>
			<script type="text/javascript" src="/includes/javascript/jqueryui/jquery.ui.datepicker.min.js" /></script>
			<script type="text/javascript" src="/includes/javascript/jqueryui/jquery.ui.position.min.js" /></script>
			<script type="text/javascript" src="/includes/javascript/jqueryui/jquery.ui.widget.min.js" /></script>
			<script type="text/javascript" src="/includes/javascript/jqueryui/jquery.ui.autocomplete.min.js" /></script>
			<script type="text/javascript" src="/includes/javascript/jqueryui/jquery.ui.autocomplete.html.js" /></script>
			<script type="text/javascript" src="/includes/javascript/jqueryui/jquery.ui.combobox.min.js" /></script>
			<script type="text/javascript" src="/includes/languages/english/javascript/jquery.validationEngine-locale.js" /></script>
			<script type="text/javascript" src="/includes/javascript/jquery/jquery.validationEngine.js" /></script>
			<script type="text/javascript" src="/includes/javascript/site-standard.js" /></script>
			<script type="text/javascript" src="/includes/javascript/jquery/jquery.ellipsis.min.js" /></script>
			<script type="text/javascript" src="/includes/javascript/jquery/jquery.appear.js" /></script>
			<script type="text/javascript" src="/includes/javascript/jquery.obsCommon.js" /></script>
			<script type="text/javascript" src="/includes/javascript/jquery.obsProducts.js" /></script>
			<script type="text/javascript" src="/includes/javascript/jquery.obsPublisher.js" /></script>
			<script type="text/javascript" src="/includes/javascript/jquery.obsBrowseAcs.js" /></script>
			<script type="text/javascript" src="/includes/javascript/datatables/sorters/productTitle.js" /></script>
			<script type="text/javascript" src="/includes/javascript/datatables/sorters/publisher.js" /></script>
		<!-- Primary CSS declarations; in minified groups -->
<link rel="stylesheet" type="text/css" media="all" href="https://www.dmsguild.com/themes/dmg/stylesheet.css.php?v=1518634890">
<link rel="stylesheet" type="text/css" media="all" href="/themes/dtrpg/960_12_10_10.css" />
<link rel="stylesheet" type="text/css" media="all" href="https://www.dmsguild.com/themes/dmg/drivethru.css.php?v=1518634889" />
<link rel="stylesheet" type="text/css" href="/themes/dtrpg/images/edge/ui-lightness/jquery-ui-1.8.16.custom.css" media="screen" />
<link rel="stylesheet" type="text/css" href="/themes/dtrpg/dd.css" />
<link rel="Stylesheet" type="text/css" href="/themes/dtrpg/smoothDivScroll.css" />
<!-- CSS: awesome font support -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

<!-- Primrary JS declarations; in minified groups -->
<script type="text/javascript" src="/includes/javascript/spin.js"></script>
<script type="text/javascript" src="/includes/javascript/jquery/jquery.spin.js"></script>
<script type="text/javascript" src="/includes/javascript/jquery.obsPlugin.filteredComboBox.js"></script>

<!-- Attach site-wide ready events -->
<script type="text/javascript">
addLoadEvent(function() {
	$("#filter_prices_form").validationEngine('attach', {
		autoHidePrompt: true, 
		autoHideDelay: 5000
	});
    $('.pwyw-input').on('focus',function() {
        $(this).val('');
        $(this).removeClass('pwyw-default-text');
    });
    $('.pwyw-input').on('blur',function() {
        if($(this).val() === "") {
            $(this).val('Support Publisher?');
            $(this).addClass('pwyw-default-text');
        }
    });
    $('.pwyw-input').closest("form").on('submit',function() {
        var pwyw_inputs = $('.pwyw-input');
        var submit_pwyw = true;
        var processed_value;
        var options = document.getElementsByName('option_selection');
        var selected_value;
        var mfr_cost = 0;
        for(var i = 0; i < options.length; i++){
            if(options[i].checked){
                selected_value = options[i].value.split("|",1);
                //For multiple products, get the cumulative mfr_cost.
                if (selected_value[0].indexOf("_") > -1){
                    selected_value = selected_value[0].split("_");
                    for(var j = 0; j < selected_value.length; j++){
                        mfr_cost += parseFloat($('div.pwyw_minimum'+selected_value[j]).attr('pwyw_minimum'));
                    }
                } else {
                    mfr_cost = parseFloat($('div.pwyw_minimum'+selected_value).attr('pwyw_minimum'));
                }

            }
        }
        pwyw_inputs.each(function() {
            var user_entered_value = $(this).val();
            processed_value = user_entered_value.replace(/[,]([0-9]{2})$/,".$1")
                                                    .replace(/,/,"")
                                                    .replace(/-/,"")
                                                    .replace(/^([0-9]{1,3})([\.])([0-9]{3})/,"$1$3");
            if(isNaN(parseFloat($(this).val()))) {
                submit_pwyw = false;
            } else {
                $(this).val(processed_value);
            }
        });
        if(submit_pwyw == false) {
            alert('Please enter a valid amount');
        } else if (processed_value < mfr_cost) {
            alert('This product has a minimum price necessary to cover the cost of materials. Please enter a price of at least $' + mfr_cost);  
            submit_pwyw = false;
        }
        return submit_pwyw;
    });
});
var chk_suggestion_frm = new checkSuggestionForm();
chk_suggestion_frm.init({enterEmail: 'Please enter an email address if you want us to contact you.', enterTxt: 'Please enter a suggestion before clicking Submit.'});
</script>

<!--[if IE]>
<script type="text/javascript" src="/includes/javascript/ie-shim.js"></script>
<![endif]-->
<!-- prevent IE 9 from using IE5 quirks mode -->
<!--[if IE 9]>
<meta http-equiv="X-UA-Compatible" content="IE=9">
<![endif]-->

<script type="text/javascript">
// Detect if cookies are enabled, and forward user to "cookies required" page if not
var cookieEnabled = (navigator.cookieEnabled) ? true : false;
if (typeof navigator.cookieEnabled == "undefined" && !cookieEnabled) { 
	document.cookie="testcookie";
	cookieEnabled = (document.cookie.indexOf("testcookie") != -1) ? true : false;
}
if (!cookieEnabled && document.URL.indexOf("cookie_usage.php")==-1) {
	window.location = '/cookie_usage.php';
}
</script>
<script type="text/javascript" src="https://www.dropbox.com/static/api/2/dropins.js" id="dropboxjs" data-app-key="7xobd4naba6t36f"></script>
<script>
    var $buoop = {vs:{i:9,f:-8,o:-8,s:7,c:-8},unsecure:true,api:4,reminder:168}; // Remind after one week (IE/Edge <= 9,  Safari <= 7, Firefox, Opera, Chrome older then 12 months)
    function $buo_f(){
        var e = document.createElement("script");
        e.src = "//browser-update.org/update.min.js";
        document.body.appendChild(e);
    };
    try {document.addEventListener("DOMContentLoaded", $buo_f,false)}
    catch(e){window.attachEvent("onload", $buo_f)}
</script>
    </head>
    <body marginwidth="0" marginheight="0" topmargin="0" bottommargin="0" leftmargin="0" rightmargin="0" class="index-body">
        <!-- header -->
        
<div class="standardbg overflow-y-hidden" id="header">
    <div class="header-img-container">
        <a href="/">
            <img class="header-logo" src="/themes/dmg/images/DMsGuild-Logo.png">
        </a>
        <img class="headerbg-left" src="/themes/dmg/images/Header-Left_TOA.png">
        <img class="headerbg-right" src="/themes/dmg/images/Header-Right.png">
    </div>
    <div id="header-nav">
        <div id="actionswrapper">
            <ul class="nav-bar-wrapper">
                <img class="nav-bar-separator" src="themes/dmg/images/divider.png">

                <li class="nav-bar-item">
                    <a href="https://www.dmsguild.com/login.php" class="nav-bar-link create_account_window">Login</a>
                </li>

                <img class="nav-bar-separator" src="themes/dmg/images/divider.png">
                <li class="nav-bar-item">
                    <a href="http://www.dmsguild.com/my_library.php" class="nav-bar-link">My Library</a>
                </li>
                <img class="nav-bar-separator" src="themes/dmg/images/divider.png">
                <li class="nav-bar-item">
                    <a href="http://www.dmsguild.com/wishlist.php" class="nav-bar-link">Wishlists</a>
                </li>
                <img class="nav-bar-separator" src="themes/dmg/images/divider.png">
            </ul>
        </div>
    </div>
 <div id='header-cart-widget' class=" grid hidden" Array> <a href='https://www.dmsguild.com/shopping_cart.php'> <span class="site-button rounded-corners-button site-button-nitems"> <span class="rounded-corners-button-text" style="white-space:nowrap;">Cart</span> <div class='site-button-cart'></div> <div id='cart-widget-qty' class='site-button site-button-nitems'>0</div> </span> </a> </div></div><div class="login-popup-forms">
<script type="text/javascript">
var show_login_create_popup = true;
var show_login_create_message = '';
$(document).ready(function() {
	$("#create_account").validationEngine('detach');
	$("#create_account").validationEngine('detach');
	$("#create_account").validationEngine('attach', {
		promptPosition: "bottomRight",
		scroll: false,
		binded: false,
		autoHidePrompt: true,
		autoHideDelay: 5000,
		onValidationComplete: function(form, status) {
			if (status == true) {
				$("#createaccountbutton").css('cursor', 'auto' );
				$("#createaccountbutton").val("Please Wait");
				$('#createaccountbutton').unbind('click');
				$('#createaccountbutton').unbind('mouseover');
				$('#createaccountbutton').removeClass('site-button-hover');

				form.validationEngine('detach');
				form.submit();
			}
		}
	});

	$('a.create_account_window').click(function() {
		// Only login a new customer if we started on a shopping cart page.
		var this_location = "" + window.location; // Cast to a string.
		var found = this_location.indexOf('shopping_cart.php');
		// If not found, indexOf() will return a -1.
		if (found == -1) {
			login_new_customer('0');
		} else {
			login_new_customer('1');
		}
		return false;
	});

	$("#create_account_hide_password").click(function() {
		var password = $("#create_account_password");
		var password_hidden = $("#create_account_password_hidden");
		var tabindex = 0;

		if ($(this).get(0).checked) {
			$("#password_hidden-wrapper").show();
			$("#password-wrapper").hide();
			tabindex = parseInt(password.attr('tabindex'));
			password.attr("tabindex", -1);
			password.css("display", "none");
			password_hidden.css("display", "");
			password_hidden.attr("tabindex", tabindex);
			password_hidden.get(0).value = password.get(0).value;
		} else {
			$("#password_hidden-wrapper").hide();
			$("#password-wrapper").show();
			tabindex = parseInt(password_hidden.attr('tabindex'));
			password_hidden.attr("tabindex", -1);
			password_hidden.css("display", "none");
			password.css("display", "");
			password.attr("tabindex", tabindex);
		}
	});

	$("#create_account_password_hidden").keyup(function() {
		$("#create_account_password").get(0).value = $(this).get(0).value;
	});

	// When un-checking the "newsletters" checkbox, show the info
	$("#create_account_default_newsletters_info").css("display", "none");
    $("#create_account_default_newsletters").click(function() {
		if (this.checked) {
			$("#create_account_default_newsletters_info").fadeOut(300);
		} else {
			$("#create_account_default_newsletters_info").fadeIn(300);
		}
    });

	// click on the close button or the login mask layer to close the popup
	$('a.close').on('click' ,function(){
		$('#create_account_mask , .create_account_popup').fadeOut(300 , function() {
			$('#create_account_mask').remove();
		});
	});
	$(document.body).on('click', '#create_account_mask' ,function(){
		$('#create_account_mask , .create_account_popup').fadeOut(300 , function() {
			$('#create_account_mask').remove();
		});
	});

	// CSS button for submit
	$('#createaccountbutton').on('click', function() {
		$('#create_account').submit();
	});

	$('#createaccountbutton').on('mouseover', function() {
		$('#createaccountbutton').addClass('site-button-hover');
	});

	$('#createaccountbutton').on('mouseout', function() {
		$('#createaccountbutton').removeClass('site-button-hover');
	});

	// Bind this keypress function to the inputs
	$("#create_account_firstname,#create_account_lastname,#create_account_email_address,#create_account_password,#create_account_password_hidden").keypress(function (evt) {
		// Determine where our character code is coming from within the event
		var charCode = evt.charCode || evt.keyCode;
		if (charCode  == 13) {
			// Enter key's keycode
			$('#create_account').submit();
		}
	});

	$('#create_account_box .btn-facebook').click(function(e) {
		e.preventDefault();
		var href = $(this).attr('href');
		var newsletter = $('#create_account_default_newsletters').is(':checked');
		$.ajax({
				url: 'https://www.dmsguild.com/includes/ajax/create_newsletter_session.php',
				data: {newsletter: newsletter},
				type: 'post'
			}
		).success(function(){
				window.location = href;
			});


	});

	$("#mail_misspelling_suggestions").css("display", "none");
	$('#email_address').on('blur', function() {
		$(this).mailcheck({
			suggested: function(element, suggestion) {
				// callback code

				$("#suggestion_message").html('Did you mean "' + suggestion.full + '"?');
				$("#mail_misspelling_suggestions").slideDown(400);
			},
			empty: function(element) {
				// callback code
				$("#mail_misspelling_suggestions").slideUp(300);
			}
		});
	});
});

function login_new_customer(checkout_after_login) {
	if (typeof checkout_after_login === 'undefined') {
		checkout_value = '0';
	} else if (typeof checkout_after_login === 'string') {
		checkout_value = checkout_after_login;
	} else {
		checkout_value = checkout_after_login.toString();
	}

	if (document.forms["login"].elements["email_address"].value != '') {
		new_email_value = document.forms["login"].elements["email_address"].value;
		document.forms["create_account"].elements["email_address"].value = new_email_value;
	}

	if (document.forms["login"].elements["login_password"].value != '') {
		new_pwd_value = document.forms["login"].elements["login_password"].value;
		document.forms["create_account"].elements["create_account_password_hidden"].value = new_pwd_value;
		document.forms["create_account"].elements["create_account_password"].value = new_pwd_value;
	}

	if (document.getElementById("login_mask") != null) {
		$('#login_mask, .login_popup').fadeOut(300 , function() {
			$('#login_mask').remove();
		});
	}

	var loginBox = "#login_box";
	var createAccountBox = "#create_account_box";

	//Fade in the Popup
	$(createAccountBox).fadeIn(300);
	if (!show_login_create_popup) {
		$(loginBox).hide();
		$('.login-page .login-message').html(show_login_create_message);
	}

	if (show_login_create_popup) {
		// Set the center alignment padding + border see css style
		var popMargTop = ($(createAccountBox).height() + 24) / 2;
		var popMargLeft = ($(createAccountBox).width() + 24) / 2;
		$(createAccountBox).css({
			'margin-left' : -popMargLeft
		});
		// hack for iPad
		if (navigator.userAgent.match(/iPad/i)) {
			$(createAccountBox).css({
				'margin-left' : 0,
				'left' : 0
			});
		}
		// Add the create account mask to body
		$('body').append('<div id="create_account_mask"></div>');
		$('#create_account_mask').fadeIn(300);
	}

	$('#create_account_firstname').focus();
	document.forms["login"].elements["checkout_after_login"].value = checkout_value;
	document.forms["create_account"].elements["checkout_after_login"].value = checkout_value;

	
	return false;
}

// This method is called if email is not available, meaning this account already exists.
// Validation requirement is removed from the name fields, then the form is submitted.
function login_from_new_account_box() {

	new_email_value = document.forms["create_account"].elements["email_address"].value;
	document.forms["login"].elements["email_address"].value = new_email_value;
	new_pwd_value = document.forms["create_account"].elements["create_account_password_hidden"].value;
	if (new_pwd_value == '') {
		new_pwd_value = document.forms["create_account"].elements["create_account_password"].value;
	}
	document.forms["login"].elements["login_password"].value = new_pwd_value;

	$('#from_new_account_popup_text').show();
	if ($('#from_new_account_popup_text').html() == '') {
		$('#from_new_account_popup_text').append('<br /><br />Email already in use. Attempting to log you into existing account.');
	}

	$('#login_error_box').html('Error: Incorrect password.');

	login_returning_customer();

	$('#login').submit();

	return false;
}

/**
 * Queries the server to see if this email is available. The script
 * actually checks to see if the email is in use and then inverts
 * the logic. This is the first of two checks for this, because
 * while this check is synchronous, it doesn't return the
 * alertTextOk message with the proper formatting. So the validation
 * checks this first to prevent the form from being submitted, and
 * then if this passes successfully the form makes an ajax call
 * directly to return the properly formatted alertTextOk message.
 *
 * @param	{jqObject}		field	the field where the validation applies
 * @param	{Array[String]}	rules	validation rules for this field
 * @param	{int}			i		rule index
 * @param	{Map}			options	form options
 * @return an error string if validation failed
 */
function is_email_available(field, rules, i, options) {
    var email_available = null;
    $.ajaxSetup({async: false});
    $.post(
        'https://www.dmsguild.com/validate_email.php',
        {
            fieldId: 'email',
            fieldValue: field.val()
        },
        function(data) {
            email_available = (data[1]);
        },
        'json'
    );
    $.ajaxSetup({async: true});

	if (email_available == false) {
		return options.allrules.ajaxIsEmailAvailable.alertText;
	}
}

</script>
<script src="/includes/javascript/mailcheck.min.js"></script>
<div id="create_account_box" class="create_account_popup customer-popup">
	<a href="#" class="close"><img src="/shared_images/popup_close_button.png"
								   class="btn_close" title="Close Window" alt="Close"/></a>
	<style type="text/css">
		#hide_password-wrapper{
			height:35px;
			vertical-align:middle;
		}
		#mail_misspelling_suggestions {
			margin: -10px 0 10px 0;
			height: 15px;
			padding: 5px;
		}
	</style>
	<div class="popup-header">
		<span class="title">
			New Account			<span class="subtitle boxText">
			(or <a tabindex="8" href="#login_box" class="login_window" onclick="return false;">
			Log In</a>)
						</span>
			<span class="subtitle boxText" id="from_login_popup_text"></span>
		</span>
	</div>
	<div class="popup-content-wrapper">
		<div class="popup-content boxText popup-content-left" >
			<link rel="stylesheet" type="text/css" href="/includes/classes/obs/resources/form/css/form.css" />
<script type="text/javascript" src="/includes/libraries/jQuery/1.11.1-min/plugins/jquery.once.js" charset="UTF-8"></script>
<script type="text/javascript" src="/includes/libraries/jQuery/1.11.1-min/plugins/jquery.form.js" charset="UTF-8"></script>
<script type="text/javascript" src="/includes/classes/obs/resources/form/js/form.js" charset="UTF-8"></script>
<script type="text/javascript" src="/includes/classes/obs/resources/form/js/collapse.js" charset="UTF-8"></script>
<script type="text/javascript"></script>
<form id="create_account" name="create_account" class="form-wrapper form-form form-create_account" action="https://www.dmsguild.com/create_account.php" method="POST" accept-charset="UTF-8"  enctype="multipart/form-data"><span><input id="action" name="action" class="form-parent-create_account form-hidden form-action" value="process" type="hidden"  />
<input id="origin" name="origin" class="form-parent-create_account form-hidden form-origin" value="new_customer_popup" type="hidden"  />
<input id="checkout_after_login" name="checkout_after_login" class="form-parent-create_account form-hidden form-checkout_after_login" value="0" type="hidden"  />
<input id="redirect_url" name="redirect_url" class="form-parent-create_account form-hidden form-redirect_url" value="/" type="hidden"  />
<input id="customers_referral" name="customers_referral" class="form-parent-create_account form-hidden form-customers_referral" value="" type="hidden"  />
<fieldset  class="form-parent-create_account form-wrapper form-fieldset form-field-name container-inline form-wrapper form-collapsible" id="field-name" name="field-name" ><div class="fieldset-wrapper"><div id="firstname-wrapper" class="wrapper form-element-wrapper"><input type="text" id="firstname" placeholder="First Name" tabindex="1" class="form-parent-field-name form-element form-text form-firstname boxText validate[required]" title="First Name" name="firstname" value="" size="60"   /></div>
<div id="lastname-wrapper" class="wrapper form-element-wrapper"><input type="text" id="lastname" placeholder="Last Name" tabindex="2" class="form-parent-field-name form-element form-text form-lastname boxText validate[required]" title="Last Name" name="lastname" value="" size="60"   /></div>
</div></fieldset>
<div id="email_address-wrapper" class="wrapper form-element-wrapper"><input type="text" id="email_address" placeholder="E-mail" tabindex="3" class="form-parent-create_account form-element form-text form-email_address boxText validate[required,custom[email],funcCall[is_email_available],ajax[ajaxIsEmailAvailable]]" title="E-mail" name="email_address" value="" size="60"   /></div>
				<div id="mail_misspelling_suggestions" class="alert-warning">
					<i class="fa fa-warning"></i>
					<span id="suggestion_message"></span>
				</div>
<fieldset  class="form-parent-create_account form-wrapper form-fieldset form-field-pass-wrapper container-inline form-wrapper form-collapsible" id="field-pass-wrapper" name="field-pass-wrapper" ><div class="fieldset-wrapper"><div id="password-wrapper" class="wrapper form-element-wrapper"><input type="text" placeholder="Password" tabindex="4" class="form-parent-field-pass-wrapper form-element form-text form-password boxText validate[required,minSize[5]] pass" title="Password" style="display: none;" autocomplete="off" id="create_account_password" name="password" value="" size="60"   /></div>
<div id="password_hidden-wrapper" class="wrapper form-element-wrapper"><span class="form-pass-wrapper form-pass-span"><input placeholder="Password" tabindex="-1" class="form-parent-field-pass-wrapper form-element form-password form-password_hidden boxText validate[required,minSize[5]]" title="Password" id="create_account_password_hidden" name="password_hidden" value="" type="password"  /></span></div>
<div id="hide_password-wrapper" class="wrapper form-element-wrapper"><input type="checkbox" value=""  tabindex="5" checked="checked" id="create_account_hide_password" name="hide_password" class="form-parent-field-pass-wrapper form-element form-checkbox form-hide_password form-checkbox"  /><label class="label-r" for="create_account_hide_password">Hide my password</label></div>
</div></fieldset>
<div id="default_newsletters-wrapper" class="wrapper form-element-wrapper"><input type="checkbox" value=""  tabindex="6" checked="checked" id="create_account_default_newsletters" name="default_newsletters" class="form-parent-create_account form-element form-checkbox form-default_newsletters form-checkbox"  /><label class="label-r" for="create_account_default_newsletters">Get the newsletter</label></div>
				<div id="create_account_default_newsletters_info" class="alert alert-danger">
					<i class="fa fa-warning"></i>
					<span class="warning">You will lose your chance to get the free product of the week.<br>One-click unsubscribe later if you don't enjoy the newsletter.</span>
				</div>
<input id="field-form-id" name="field-form-id" class="form-parent-create_account form-hidden form-field-form-id" value="create_account" type="hidden"  />
<input id="field-form-time" name="field-form-time" class="form-parent-create_account form-hidden form-field-form-time" value="1521393803" type="hidden"  />
<input id="field-form-token" name="field-form-token" class="form-parent-create_account form-hidden form-field-form-token" value="c30e3922f12059e0e4e3d7cf670c5595" type="hidden"  />
<input id="field-form-ajax" name="field-form-ajax" class="form-parent-create_account form-hidden form-field-form-ajax" value="" type="hidden"  />
<input id="field-form-ajax-id" name="field-form-ajax-id" class="form-parent-create_account form-hidden form-field-form-ajax-id" value="" type="hidden"  />
</span></form>			<div class="submit_button create-account-button alpha omega last">
				<div ontouchend="$(this).find('input').click();" onmouseup="$(this).find('input').click();" class="form-button-wrapper form-button-div site-button rounded-corners-button" style=""><input tabindex="7" id="createaccountbutton" class="site-button rounded-corners-button-text" type="submit" value="Create Account" name="clicked_element"   /></div>
			</div>
		</div>
				<div class="popup-content standardText popup-content-right">
			<div class="last social-buttons-wrapper"><a href="https://www.facebook.com/v2.8/dialog/oauth?client_id=1178097535547895&state=c72283567685f494ccc768d316e43366&response_type=code&sdk=php-sdk-5.4.0&redirect_uri=https%3A%2F%2Fwww.dmsguild.com%2Ffacebook%2Ffacebook_sign_up_action.php&scope=email%2Cpublic_profile%2Cuser_friends" class="site-button btn-facebook"><i class="fa fa-2x fa-facebook"></i>Log In with Facebook</a></div>
		</div>
			</div>
</div>
<script type="text/javascript">
var show_login_return_popup = true;
var show_login_return_message = '';
var _login_validated = false;

// Get ready with the rest of the login.
$(document).ready(function() {
	// Hide login error.
	$('#login_failure_warning').hide();
	// Setup the validation engine. Detach b/c repeated readys.
	$("#login").validationEngine('detach');
	$("#login").validationEngine('detach');
	$("#login").validationEngine('attach', {
		promptPosition: "bottomRight", 
		scroll: false,
		binded: false,
		autoHidePrompt: true, 
		autoHideDelay: 15000,
		ajaxFormValidation: true,
		ajaxFormValidationURL: 'https://www.dmsguild.com/validate_credentials.php',
		ajaxFormValidationMethod: 'post',
		onBeforeAjaxFormValidation: beforeAjaxValidationCallback,
		onAjaxFormComplete: afterAjaxValidationCallback
	});

	// This function is triggered at form submission BUT runs repeatedly.
	// Ajax form validation runs for EVERY value and the final form.
	// So here we limit the # of times we call to validate credits.
	function beforeAjaxValidationCallback(form, options) {
		$('#login_failure_warning').hide();
		$('#login').validationEngine('hideAll');
		if (!_login_validated) {
			// Add that we've called to validate the form here.
			_login_validated = true;
			return true;
		}
		// Prevent another call until returned submit.
		return false;
	}

// Called once the server replies to the ajax form validation request
// This is called multiple times, one for each validation round.
// We do NOT want to validate more than once, or submit more than once.
function afterAjaxValidationCallback(status, form, json, options) {
	// Reset the validation state.
	_login_validated = false;
	// Get the error state from the callback.
	var error_state = json[1];
	if (!error_state) {
		var error_message = json[2];
		if (error_message == 'Locked') {
			$('#login_failure_warning .common-error').show();
			$('#login_failure_warning .special-error').hide();
		}
		else {
			$('#login_failure_warning .special-error').html(error_message);
			$('#login_failure_warning .special-error').show();
		}
		$('#login_failure_warning').show();
		setTimeout(function() { $('#from_new_account_popup_text').fadeOut('slow'); }, 5000);
		setTimeout(function() { $('#from_new_account_popup_text').html(''); }, 7000);
		// Return early to avoid submission.
		return;
	}
	// Unbinds, we're about to submit this form.
	$("#loginbutton").css('cursor', 'auto' );
	$("#loginbutton").val("Please Wait");
	$('#loginbutton').unbind('click');
	$('#loginbutton').unbind('mouseover');
	$('#loginbutton').removeClass('site-button-hover');
	form.validationEngine('detach');
	form.submit();
}

	// When we click on the facebook link a blur event
	// is called on any input we were previously in.
	// This blur is what kicks off validation and err display.
	// So since we want to focus the user on initial page load,
	// we then need to intercept the blur IIF facebook login clicked.
	// Catching it on .click() still gives a split second of the err showing.
	var clicked_element;
    $(document).mousedown(function(event) {
        clicked_element = $(event.target);
    });
    $(document).mouseup(function(event) {
        clicked_element = null;
    });
	$('#login input').blur(function(blur_event) {
		blur_event.stopPropagation();
		// And try to interrupt the blur before it can cause validation.
		$(clicked_element).parents('#fb_login_button').each(function() {
			// So we hide the error display here before continuing.
			// Why inject a style? Because this occurs before blur completes,
			// the error divs aren't in place yet. Since they're non-existent
			// I can't use jquery to select for them to use .hide().
			// So even if the error is triggered, it's automatically hidden.
			var new_style = '<style>div.formError{display:none;}</style>';
			$('#login').before(new_style);
		});
	});
	// End Facebook login JS for errors.

	$('a.login_window').click(function() {
		// Only login a new customer if we started on a shopping cart page.
		var this_location = "" + window.location; // Cast to a string.
		var found = this_location.indexOf('shopping_cart.php');
		// If not found, indexOf() will return a -1.
		if (found == -1) {
			login_returning_customer('0');
		} else {
			login_returning_customer('1');
		}
		return false;
	});

	// click on the close button or the login mask layer to close the popup
	$('a.close').on('click', function() {
		$('#login_mask , .login_popup').fadeOut(300 , function() {
			$('#login_mask').remove();  
		});
	});
	$(document.body).on('click', '#login_mask' ,function(){
		$('#login_mask , .login_popup').fadeOut(300 , function() {
			$('#login_mask').remove();
		});
	});

	// CSS button for submit
	$('#loginbutton').on('click', function(e) {
		$('#login').submit();
	});

	$('#login').submit(function(e){
		if( $(this).hasClass('form-submitted') ){
			e.preventDefault();
			return;
		}
		$(this).addClass('form-submitted');
	});

	$('#loginbutton').on('mouseover', function() {
		$(this).addClass('site-button-hover');
	});

	$('#loginbutton').on('mouseout', function() {
		$(this).removeClass('site-button-hover');
	});

	// Bind this key-press function to the inputs
	$("#login_email_address,#login_password").keypress(function (evt) {
		// Determine where our character code is coming from within the event
		var charCode = evt.charCode || evt.keyCode;
		if (charCode  == 13) {
			// Enter key keycode
			$('#login').submit();
		}
	});
});

function login_returning_customer(checkout_after_login) {
	if (typeof checkout_after_login === 'undefined') {
		checkout_value = '0';
	} else if (typeof checkout_after_login === 'string') {
		checkout_value = checkout_after_login;
	} else {
		checkout_value = checkout_after_login.toString();
	}

	if (document.getElementById("create_account_mask") != null) {
		$('#create_account_mask, .create_account_popup').fadeOut(300 , function() {
			$('#create_account_mask').remove();
		});
	}

	var loginBox = "#login_box";
	var createAccountBox = "#create_account_box";

	//Fade in the Popup
	$(loginBox).fadeIn(300);
	if (!show_login_return_popup) {
		$(createAccountBox).hide();
		$('.login-page .login-message').html(show_login_return_message);
	}

	if (show_login_return_popup) {
		// Set the center alignment padding + border see css style
		var popMargLeft = ($(loginBox).width() + 24) / 2; 
		$(loginBox).css({ 
			'margin-left' : -popMargLeft
		});
		// hack for iPad
		if (navigator.userAgent.match(/iPad/i)) {
			$(loginBox).css({ 
				'margin-left' : 0,
				'left' : 0
			});
		}
		// Add the login mask to body
		$('body').append('<div id="login_mask"></div>');
		$('#login_mask').fadeIn(300);
	}

	if ($("#login_email_address").val().length > 0) {
		$('#login_password').focus();
	} else {
		$('#login_email_address').focus();
	}

	$('form [name="login"] [name="checkout_after_login"]').val(checkout_value);
	$('form [name="create_account"] [name="checkout_after_login"]').val(checkout_value);

	return false;
}

// This method is called if email validation fails.
// It switches the display from the login box to the new customer box
// while maintaining customer input
function switch_to_new_customer() {

	$('.formError').fadeTo(0, 0);

	new_email_value = document.forms["login"].elements["email_address"].value;
	document.forms["create_account"].elements["email_address"].value = new_email_value;
	new_pwd_value = document.forms["login"].elements["login_password"].value;
	document.forms["create_account"].elements["create_account_password_hidden"].value = new_pwd_value;
	document.forms["create_account"].elements["create_account_password"].value = new_pwd_value;

	if ($('#from_login_popup_text').html() == '') {
		$('#from_login_popup_text').append('<br /><br />We could not find an account with that email. Please enter your name to create a new account.');
	}

	login_new_customer();

	return false;
}

function setRedirect(href_link) {
	$('input[name=redirect_url]').val(href_link);
}

</script>


<div id="login_box" class="login_popup customer-popup">
	<a href="#" class="close"><img src="/shared_images/popup_close_button.png" class="btn_close" title="Close Window" alt="Close" /></a>
	<div class="popup-header">
		<span class="title">
			Log In			<span class="subtitle boxText">
				(<a tabindex="6" href="#create_account_box" class="boxText create_account_window"  onclick="return false;">I am new here</a>)
			</span>
		</span>
		<span class="subtitle boxText" id="from_new_account_popup_text"></span>
	</div>
	<div class="popup-content-wrapper">
		<div class="popup-content standardText popup-content-left">
			<form id="login" name="login" class="form-wrapper form-form form-login" action="https://www.dmsguild.com/login.php" method="POST" accept-charset="UTF-8"  enctype="multipart/form-data"><span><input id="action" name="action" class="form-parent-login form-hidden form-action" value="process" type="hidden"  />
<input id="origin" name="origin" class="form-parent-login form-hidden form-origin" value="returning_customer_popup" type="hidden"  />
<input id="checkout_after_login" name="checkout_after_login" class="form-parent-login form-hidden form-checkout_after_login" value="0" type="hidden"  />
<input id="redirect_url" name="redirect_url" class="form-parent-login form-hidden form-redirect_url" value="/" type="hidden"  />
<div id="email_address-wrapper" class="wrapper form-element-wrapper"><input type="text" id="login_email_address" placeholder="E-mail" tabindex="1" class="form-parent-login form-element form-text form-email_address boxText validate[required,custom[email],ajax[ajaxIsLoginValid]]" title="E-mail" name="email_address" value="" size="60"   /></div>
<fieldset  class="form-parent-login form-wrapper form-fieldset form-field-pass-wrapper container-inline form-wrapper form-collapsible" id="field-pass-wrapper" name="field-pass-wrapper" ><div class="fieldset-wrapper"><div id="password-wrapper" class="wrapper form-element-wrapper"><span class="form-pass-wrapper form-pass-span"><input placeholder="Password" tabindex="2" class="form-parent-field-pass-wrapper form-element form-password form-password boxText validate[required,minSize[5]]" title="Password" id="login_password" name="password" value="" type="password"  /></span></div><a class="forgot-password boxText" tabindex="7" href="https://www.dmsguild.com/password_forgotten.php">Forgot password?</a>
</div></fieldset>
<div id="remember_me-wrapper" class="wrapper form-element-wrapper"><input type="checkbox" value=""  id="login_remember_me" tabindex="3" name="remember_me" class="form-parent-login form-element form-checkbox form-remember_me form-checkbox"  /><label class="label-r" for="login_remember_me">Remember me</label></div>
<input id="field-form-id" name="field-form-id" class="form-parent-login form-hidden form-field-form-id" value="login" type="hidden"  />
<input id="field-form-time" name="field-form-time" class="form-parent-login form-hidden form-field-form-time" value="1521393803" type="hidden"  />
<input id="field-form-token" name="field-form-token" class="form-parent-login form-hidden form-field-form-token" value="9b03b9c9c33d608b024d87fe074ad47e" type="hidden"  />
<input id="field-form-ajax" name="field-form-ajax" class="form-parent-login form-hidden form-field-form-ajax" value="" type="hidden"  />
<input id="field-form-ajax-id" name="field-form-ajax-id" class="form-parent-login form-hidden form-field-form-ajax-id" value="" type="hidden"  />
</span></form>			<div class="submit_button login-button alpha omega last">
				<div ontouchend="$(this).find('input').click();" onmouseup="$(this).find('input').click();" class="form-button-wrapper form-button-div site-button rounded-corners-button" style=""><input tabindex="4" style="vertical-align:middle" id="loginbutton" class="site-button rounded-corners-button-text" type="submit" value="Log In" name="clicked_element"   /></div>
			</div>
			<div id="login_failure_warning" style="display: none;">
				<span class="warning" >
					<span class="common-error boxText" id="login_error_box">Error: No match for E-Mail Address and/or Password.</span><br />
					<span class="special-error boxText"></span><br />
					<a href="https://www.dmsguild.com/password_forgotten.php">Password forgotten? Click here.</a>				</span>
							</div>
		</div>
					<div class="popup-content standardText popup-content-right">
				<div class="last social-buttons-wrapper"><a href="https://www.facebook.com/v2.8/dialog/oauth?client_id=1178097535547895&state=53028e37a354da1e04936d3295dd39df&response_type=code&sdk=php-sdk-5.4.0&redirect_uri=https%3A%2F%2Fwww.dmsguild.com%2Ffacebook%2Ffacebook_sign_up_action.php&scope=email%2Cpublic_profile%2Cuser_friends" class="site-button btn-facebook"><i class="fa fa-2x fa-facebook"></i>Log In with Facebook</a></div>
			</div>
			</div>
</div></div>		<script type="application/javascript" src="/includes/javascript/iscroll/iscroll.js"></script>
		
<script>

	var ajaxQueue = new AjaxQueue();
	var selected_profile = new Array();

	function submit_form(form_name, form_id) {
		if (!form_id || form_id.length === 0 || /^\s*$/.test(form_id)) {
			form_id = form_name;
		}
		// Go to the chek out by default.
		$('#go_to_checkout').val(1);
		// Unless this is a live product.
		if (parseInt($('#cart_live_products').val()) > 0) {
			// set a variable so that the page will not redirect to checkout
			$('#go_to_checkout').val(0);
			$('#' + form_id).attr('action', "checkout_live_profiles.php");
		}
		// And submit.
		$('#' + form_id).submit();
	}


// begin jQuery functions
	(function($) {
		$(document).ready(function() {
		});
	})(jQuery);

// used for jQuery.find() function
	function get_wid_from_pid(pid) {
		find_wid = pid.replace(/\{/g, "\\{");
		find_wid = find_wid.replace(/\}/g, "\\}");
		return find_wid;
	}

// Catches "enter" keypress on quantity fields, updates quantity appropriately
	function catch_quantity_enter(e, pid) {
		var qty = get_qty_from_pid(pid);

		//get current addon settings
		var addon = get_addon_from_pid(pid);
		var addon_type = get_addon_type(pid);

		var code = e.keyCode || e.which;
		if (code == 13) {
			submit_cart_changes(pid, qty, 0, addon, addon_type);
			e.preventDefault();
			return false;
		}
	}

// get the quantity value associated with the given pid
	function get_qty_from_pid(pid) {
		var find_wid = get_wid_from_pid(pid);
		var qty_field = jQuery.find("#qty_" + find_wid)[0];
		var qty = 0;
		if (qty_field) {
			qty = parseInt($(qty_field).val());
		}

		return qty;
	}

//	get the pwyw price value associated with the given pid
	function get_pwyw_price_from_pid(pid) {
		var find_wid = get_wid_from_pid(pid);
		var pwyw_price_field = jQuery.find('#pwyw_price_' + find_wid)[0];
		var pwyw_price = 0;
		if (pwyw_price_field) {
			pwyw_price = parseFloat($(pwyw_price_field).val());
		}

		return pwyw_price;
	}


// get the old (previous) quantity value associated with the given pid
	function get_oldqty_from_pid(pid) {
		var find_wid = get_wid_from_pid(pid);
		var qty_field = $("#qty_" + find_wid)[0];
		var oldqty = 1;
		if (qty_field) {
			oldqty = $(qty_field).attr('oldval');
		}

		return oldqty;
	}

// get the addon value associated with the given pid
	function get_addon_from_pid(pid) {
		var find_wid = get_wid_from_pid(pid);
		var addon_field = $("#addon_checkbox_" + find_wid)[0];
		var addon = '0';

		if (addon_field) {

			if ($(addon_field).attr('checked')) {
				addon = '1';
			}

		} else {

			//this section handles the addon/tuckbox radio buttons
			var radio_input_name = "addon_radio_" + find_wid;
			var selected_option = $("input[name='" + radio_input_name + "']:checked").val();

			if (selected_option == 'SD' || selected_option == 'LD') {
				addon = '1';
			}

		}

		return addon;
	}


// get the addon type for line item
	function get_addon_type(pid) {
		var find_wid = get_wid_from_pid(pid);
		var addon_field = $("#addon_checkbox_" + find_wid)[0];

		if (addon_field) {
			var addon_type = $(addon_field).val();
		} else {

			//this section handles the addon/tuckbox radio buttons
			var radio_input_name = "addon_radio_" + find_wid;
			var selected_option = $("input[name='" + radio_input_name + "']:checked").val();

			if (selected_option == 'SD' || selected_option == 'LD') {
				addon_type = selected_option;
			}

		}
		
		return addon_type;
	}

	// get the tuckbox value associated with the given pid
	function get_tuckbox_from_pid(pid) {
		var find_wid = get_wid_from_pid(pid);
		var tuckbox_field = $("#tuckbox_checkbox_" + find_wid)[0];
		var tuckbox = '0';
		if (tuckbox_field) {

			if ($(tuckbox_field).attr('checked')) {
				tuckbox = '1';
			}

		} else {

			//this section handles the addon/tuckbox radio buttons
			var radio_input_name = "addon_radio_" + find_wid;
			var selected_option = $("input[name='" + radio_input_name + "']:checked").val();

			if (selected_option == 'SD' || selected_option == 'LD') {
				tuckbox = '0';
			} else if (selected_option > 0) {
				tuckbox = '1';
			}

		}

		return tuckbox;
	}

// get the tuckbox size for line item
	function get_tuckbox_size(pid) {
		var find_wid = get_wid_from_pid(pid);
		var tuckbox_field = $("#tuckbox_checkbox_" + find_wid)[0];

		if (tuckbox_field) {
			var tuckbox_type = $(tuckbox_field).val();
		} else {

			//this section handles the addon/tuckbox radio buttons
			var radio_input_name = "addon_radio_" + find_wid;
			var selected_option = $("input[name='" + radio_input_name + "']:checked").val();

			if (selected_option == 'SD' || selected_option == 'LD') {
				tuckbox_type = '0';
			} else if (selected_option > 0) {
				tuckbox_type = selected_option;
			}

		}

		return tuckbox_type;
	}

// User has typed a number in a quantity text box
	function set_quantity_directly(pid) {
		var qty = get_qty_from_pid(pid);

		//get current addon settings
		var addon = get_addon_from_pid(pid);
		var addon_type = get_addon_type(pid);
		submit_cart_changes(pid, qty, 0, addon, addon_type);
	}


// User has clicked the "-" icon to decrease the quantity by 1
	function set_quantity_decrease(pid) {
		var find_wid = get_wid_from_pid(pid);
		var qty = get_qty_from_pid(pid);
		var decrease_button = $("#decrease_" + find_wid)[0];
		var button_status = $(decrease_button).attr('disabled');
		qty = qty - 1;

		//get current addon settings
		var addon = get_addon_from_pid(pid);
		var addon_type = get_addon_type(pid);

		submit_cart_changes(pid, qty, 0, addon, addon_type);
	}

// User has clicked the "+" icon to increase the quantity by 1
	function set_quantity_increase(pid) {
		var find_wid = get_wid_from_pid(pid);

		var qty;
		qty = get_qty_from_pid(pid, true);

		var increase_button = $("#increase_" + find_wid)[0];
		var button_status = $(increase_button).attr('disabled');
		qty = qty + 1;
		//get current addon settings
		var addon = get_addon_from_pid(pid);
		var addon_type = get_addon_type(pid);

		submit_cart_changes(pid, qty, 0, addon, addon_type);
	}

	// User has changed the pwyw price
	function set_pwyw_price(pid) {
		console.log('setting pwyw');

		//get values
		var qty = get_qty_from_pid(pid);
		var addon = get_addon_from_pid(pid);
		var addon_type = get_addon_type(pid);
		var pwyw_price = get_pwyw_price_from_pid(pid);
		var wishlist = 0;

		//Show spinner
		var find_wid = get_wid_from_pid(pid);
		var pwyw_price_field = jQuery.find('#pwyw_price_' + find_wid)[0];
		$("#pwyw_loading_"+find_wid).show();

		//submit values
		submit_cart_changes(pid, qty, wishlist, addon, addon_type, pwyw_price);
	}

	// Added by Pablo García (2014-08-01): User has added a new product to cart from product_listing module
	// Updated by Pablo García (2014-08-04): No need for calculate visible qty
	function set_quantity_hidden_increase(pid, qty, callback) {
		submit_cart_hidden_increase(pid, qty, 0, 0, 0, callback);
	}

// User has clicked addon checkbox
// Set addon to value of checkbox
	function set_addon(pid) {
		var qty = get_qty_from_pid(pid);
		var wishlist = 0;
		var new_addon = get_addon_from_pid(pid);
		var addon_type = get_addon_type(pid);
		submit_cart_changes(pid, qty, wishlist, new_addon, addon_type);
	}

// User has clicked the "X" icon to remove the item from the cart
	function remove_item_from_cart(pid) {
		var find_wid = get_wid_from_pid(pid);
		var remove_button = $("#remove_" + find_wid)[0];
		var button_status = $(remove_button).attr('disabled');
		var qty = 0;

		//get current addon settings
		var addon = get_addon_from_pid(pid);
		var addon_type = get_addon_type(pid);

		submit_cart_changes(pid, qty, 0, addon, addon_type);
	}


// User has clicked the "undo" icon to restore an item previously 
// removed the item from the cart
	function undo_remove_item_from_cart(pid) {
		var qty = get_oldqty_from_pid(pid);
		//ignore wishlist
		var wishlist = 0;

		//restore current addon setting
		var addon = get_addon_from_pid(pid);
		var addon_type = get_addon_type(pid);

		submit_cart_changes(pid, qty, 0, addon, addon_type);
	}


// User has clicked the "list" icon to move the item from the cart 
// to the wishlist
	function move_item_to_wishlist(pid) {
		var find_wid = get_wid_from_pid(pid);
		var wishlist_button = $("#wishlist_" + find_wid)[0];
		var button_status = $(wishlist_button).attr('disabled');
		var qty = 0;
		var wishlist = 1;

		//get current addon settings
		var addon = get_addon_from_pid(pid);
		var addon_type = get_addon_type(pid);

		submit_cart_changes(pid, qty, wishlist, addon, addon_type);
	}


// User has clicked the "undo" icon to restore an item previously 
// moved from the cart to the wishlist
	function undo_move_item_to_wishlist(pid) {
		var qty = get_oldqty_from_pid(pid);
		var wishlist = -1;

		//restore current addon setting
		var addon = get_addon_from_pid(pid);
		var addon_type = get_addon_type(pid);

		submit_cart_changes(pid, qty, wishlist, addon, addon_type);
	}


// Javascript sets display to "waiting"
// Javascript submits data to php:
// * product ID
// * new quantity of item
// * wishlist action (1 == move to, 0 == ignore, -1 == move from)
// * new addon setting (1 == addon added by customer, 0 == no addon selected for this product)
// * type of addon for this item (PS, LS, SD, LD, TB)
// PHP returns data to javascript:
// * product IDs
// * old quantity of each item
// * new quantity of each item
// * new addon setting of each item
// * line-item subtotal
// * cart subtotal
// * if bulk book price is in effect
// * if bulk card price is in effect
// Javascript updates displayed text on page
	function submit_cart_changes(pid, qty, wishlist, addon, addon_type, pwyw_price) {
		console.log('submitting cart changes');
		var find_wid = get_wid_from_pid(pid);
		console.log(find_wid);
		var wishlist_button = $("#wishlist_" + find_wid)[0];
		var wishlist_working = $("#wishlist_working_" + find_wid)[0];
		var wishlist_undo = $("#wishlist_undo_" + find_wid)[0];
		var wishlist_text = $("#wishlist_text_" + find_wid)[0];
		var remove_button = $("#remove_" + find_wid)[0];
		var remove_working = $("#remove_working_" + find_wid)[0];
		var remove_undo = $("#remove_undo_" + find_wid)[0];
		var remove_text = $("#remove_text_" + find_wid)[0];
		var qty_field = $("#qty_" + find_wid)[0];
		var decrease_button = $("#decrease_" + find_wid)[0];
		var increase_button = $("#increase_" + find_wid)[0];
		var addon_checkbox = $("#addon_checkbox_" + find_wid)[0];
		var current_qty = get_qty_from_pid(pid);
		qty = parseInt(qty);
		// wishlist == 1 == move to wishlist
		// wishlist == 0 == ignore
		// wishlist == -1 == move from wishlist
		if (typeof wishlist === 'undefined') {
			wishlist = 0;
		} else {
			wishlist = parseInt(wishlist);
		}

		// addon = new addon checkbox setting
		if (typeof addon === 'undefined') {
			addon = '0';
		}

		// Javascript sets display to "waiting"
		if (qty == 0) {
			if (wishlist == 1) {
				// move to wishlist
				$(wishlist_button).hide();
				$(wishlist_working).show();
				$(remove_button).attr('disabled', 'disabled');
			} else if (current_qty > 0) {
				// remove from cart
				$(remove_button).hide();
				$(remove_working).show();
				$(wishlist_button).attr('disabled', 'disabled');
			}

			$(qty_field).attr('disabled', 'disabled');
			$(decrease_button).attr('disabled', 'disabled');
			$(increase_button).attr('disabled', 'disabled');
			$(addon_checkbox).attr('disabled', 'disabled');
		} else {
			if (wishlist == -1) {
				// undo move to wishlist
				$(wishlist_working).show();
				$(wishlist_undo).hide();
				$(wishlist_text).hide();
			} else if (current_qty == 0) {
				// undo remove from cart
				$(remove_working).show();
				$(remove_undo).hide();
				$(remove_text).hide();
			}
		}

		updateCart = {
			// Javascript submits data to php: 			// * product ID
			// * new quantity of item
			// * wishlist action (1 == move to, 0 == ignore, -1 == move from)
			// * new addon setting (1 == on, 0 == off)
			// * current addon setting, for undos
			// * type of eligible addon
			data: {
				inputs: find_wid,
				code: 'update',
				qty: qty,
				pwyw_price: pwyw_price,
				wishlist: wishlist,
				addon: addon,
				addon_type: addon_type
			},
			cbScs: function(result) {
				// PHP returns data to javascript:
				// result.cartsize				number of items in cart
				// result.wishsize				number of items in wishlist
				// result.livecount				number of live items in cart
				// result.cart_bulk_book_cost	if bulk book price is in effect
				// result.cart_bulk_card_cost	if bulk card price is in effect
				// result.old_bulk_card_cost	if bulk card price was in effect before update (need for tuckbox/addon flags)
				// result.aorm					'1' if admin or manufacturer for labels
				// result.stotal				cart subtotal
				// result.lineitems				multidimensional array
				// 		wid						escaped product ID
				// 		oldqty					old quantity of each item
				// 		qty						new quantity of each item
				// 		wishlist				wishlist action (1 == moved to, 0 == ignored, -1 == moved from)
				// 		wisherror				wishlist error message
				// 		is_bulk_book_cost		if bulk book price is in effect
				// 		is_bulk_card_cost		if bulk card price is in effect
				// 		lutotal					line-item unit price
				// 		ltotal					line-item subtotal
				//		addontotal				line-item addon total cost
				//		addon					new addon checkbox setting: 0 = false, 1 = true
				//		addontext				text for addon checkbox label
				//		addon_eligible			type of addon this item is eligible for
				//		tuckbox_size			size of associated tuckbox; 0 if none
				// result.checkout				boolean, if the cart can be checked out or not.
				// result.checkout_messages		messages relevant to the checkout.
				// result.has_premium_card		boolean, if the cart contains a card on premium stock
				var subtotal = $('#subtotal')[0];
				// Javascript updates displayed text on page
				updateCartWidget(result.cartsize);
				updateWishWidget(result.wishsize);
				document.forms["cart_contents"].elements["cart_live_products_count"].value = result.livecount;
				if (result.livecount > 0) {
					document.forms["cart_contents"].elements["cart_live_products"].value = "1";
				} else {
					document.forms["cart_contents"].elements["cart_live_products"].value = "0";
				}

				if (result.cart_bulk_book_cost > 0) {
					document.getElementById('bulk_discount_message').innerHTML = "BULK_PRICE_POD_BOOK";
				} else if (result.cart_bulk_card_cost > 0) {
					// high volume stock warning commented out 2015-12-11; retain for quick restoration if needed
					// if (result.has_premium_card == true) {
					//	document.getElementById('bulk_discount_message').innerHTML = "";
					// } else {
						document.getElementById('bulk_discount_message').innerHTML = "BULK_PRICE_POD_CARD";
					// }
				} else {
					document.getElementById('bulk_discount_message').innerHTML = "";
				}

				$(subtotal).text(result.stotal);

				// loop through return.lineitems array
				for (var index in result.lineitems) {
					var lineitem = result.lineitems[index];
					var lwishlist_wrapper = $('#wishlist_wrapper_' + lineitem.wid)[0];
					var lwishlist_button = $('#wishlist_' + lineitem.wid)[0];
					var lwishlist_working = $('#wishlist_working_' + lineitem.wid)[0];
					var lwishlist_undo = $('#wishlist_undo_' + lineitem.wid)[0];
					var lwishlist_text = $('#wishlist_text_' + lineitem.wid)[0];
					var lremove_wrapper = $('#remove_wrapper_' + lineitem.wid)[0];
					var lremove_button = $('#remove_' + lineitem.wid)[0];
					var lremove_working = $('#remove_working_' + lineitem.wid)[0];
					var lremove_undo = $('#remove_undo_' + lineitem.wid)[0];
					var lremove_text = $('#remove_text_' + lineitem.wid)[0];
					var lqty_field = $('#qty_' + lineitem.wid)[0];
					var ldecrease_button = $('#decrease_' + lineitem.wid)[0];
					var lincrease_button = $('#increase_' + lineitem.wid)[0];
					var lutotal = $('#lutotal_' + lineitem.wid)[0];
					var pwyw_input = $('#pwyw_price_'+lineitem.wid)[0];
					var pwyw_loading = $('#pwyw_loading_'+lineitem.wid)[0];
					var pwyw_success = $('#pwyw_success_'+lineitem.wid)[0];
					var pwyw_error = $('#pwyw_error_'+lineitem.wid)[0];
					var ltotal = $('#ltotal_' + lineitem.wid)[0];
					var laddon_text = $('#laddon_text_' + lineitem.wid)[0];
					var laddon_qty = $('#laddon_qty_' + lineitem.wid)[0];
					var laddon_price = $('#laddon_price_' + lineitem.wid)[0];
					var laddon_end_text = $('#laddon_end_text_' + lineitem.wid)[0];
					var laddon_flag = $("#laddon_flag_" + lineitem.wid)[0];
					var laddon_checkbox = $("#addon_checkbox_" + lineitem.wid)[0];
					var laddon_div = $("#addon_" + lineitem.wid)[0];
					var ltuckbox_flag = $("#ltuckbox_flag_" + lineitem.wid)[0];
					var ltuckbox_size = $('input[name=tuckbox_' + lineitem.wid + ']').val();

					//update addon text
					if (lineitem.qty == 1) {

						//deckboxes
						if (lineitem.addon_eligible == 'SD' || lineitem.addon_eligible == 'LD') {
							$(laddon_text).html(lineitem.addontext + ' (+');
							$(laddon_qty).html(' ');
							$(laddon_end_text).html(')');
						//screens
						} else if (lineitem.addon_eligible == 'LS' || lineitem.addon_eligible == 'PS') {
							if (result.aorm == '1') {
								$(laddon_text).html(lineitem.addontext + ' (+ ');
							} else {
								$(laddon_text).html(lineitem.addontext + '<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Total ');
							}
							$(laddon_qty).html(' ');
							$(laddon_end_text).html(')');
						}

					} else if (lineitem.qty > 1) {

						//deckboxes
						if (lineitem.addon_eligible == 'SD' || lineitem.addon_eligible == 'LD') {

							if (lineitem.qty < 100) { //show on single line if below 100
								$(laddon_text).html(lineitem.addontext + ' (+');
							} else {
								$(laddon_text).html(lineitem.addontext + '<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(+');
							}
							$(laddon_qty).html(' '+lineitem.qty+' ');
							$(laddon_end_text).html(')');
						//screens
						} else if (lineitem.addon_eligible == 'LS' || lineitem.addon_eligible == 'PS') {
							if (result.aorm == '1') {
								$(laddon_text).html(lineitem.addontext + ' (+ ');
							} else {
								$(laddon_text).html(lineitem.addontext + '<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Total ');
							}
							$(laddon_qty).html(' '+lineitem.qty+' ');
							$(laddon_end_text).html(')');
						}

					}

					// update addon flag visibility
					if (lineitem.qty == lineitem.oldqty) {

						//fade slow if just an addon change
						if (lineitem.addon == '1' && lineitem.tuckbox_size == '0') {
							$(laddon_flag).fadeTo('slow', 1);
						} else if (lineitem.tuckbox_size != '0') {
							$(laddon_flag).hide();
						} else {
							$(laddon_flag).fadeTo('slow', 0);
						}

					} else if (lineitem.qty == 0 && lineitem.oldqty > 0) {

						//removed from cart or moved to wishlist

						//resolve addon flag, and addon checkbox visibility
						if (lineitem.addon == '1') {
							$(laddon_flag).fadeTo(0, .2);
						}

						//resolve tuckbox flag
						if (ltuckbox_size != '0') {
							$(ltuckbox_flag).fadeTo(0, .2);
						}

					} else {

						// update within cart
						if (ltuckbox_size == '0') {

							if (lineitem.addon == '1') {
								$(laddon_flag).fadeTo('slow', 1);
							} else {
								$(laddon_flag).fadeTo('slow', 0); //need one of these to still be present to maintain space
							}

						}

					}

					// update wishlist and remove buttons, and 
					// fade row in or out, as appropriate
					if (lineitem.qty == 0) {
						if (lineitem.wishlist == 1) {
							// moved to wishlist
							$(lremove_wrapper).addClass('fade');
							var faded_items = $('#row_' + lineitem.wid + ' div.fade');
							if (lineitem.wisherror) {
								$(faded_items).fadeTo('slow', 1);
								$(lwishlist_working).hide();
								$(lwishlist_button).show();
								$(lqty_field).removeProp('disabled');
								$(laddon_checkbox).removeProp('disabled');
								$(lwishlist_text).html(lineitem.wisherror);
								$(lwishlist_text).show();
							} else {

								$(faded_items).fadeTo(0, .2);

								//rehide addon flag as appropriate (it is inside lwishlist_wrapper div)
								if (lineitem.tuckbox_size == '0') {

									if (lineitem.addon == '1') {
										$(laddon_flag).fadeTo(0, .2);
									} else {
										$(laddon_flag).fadeTo(0, 0);
									}

								} else {
									$(laddon_flag).hide();
								}

								$(lwishlist_working).hide();
								$(lwishlist_undo).show();
								$(lwishlist_text).show();
							}
						} else if (lineitem.oldqty > 0 && !lineitem.wisherror) {
							// removed from cart
							$(lwishlist_wrapper).addClass('fade');
							var faded_items = $('#row_' + lineitem.wid + ' div.fade');
							$(faded_items).fadeTo(0, .2);

							//rehide addon flag as appropriate (it is inside lwishlist_wrapper div)
							if (lineitem.tuckbox_size == '0') {

								if (lineitem.addon == '1') {
									$(laddon_flag).fadeTo(0, .2);
								} else {
									$(laddon_flag).fadeTo(0, 0)
								}

							} else {
								$(laddon_flag).hide();
							}

							$(lremove_working).hide();
							$(lremove_undo).show();
							$(lremove_text).show();
							$(lwishlist_text).hide();
						}
					} else {
						if (lineitem.wishlist == -1) {
							// undone move to wishlist
							var faded_items = $('#row_' + lineitem.wid + ' div.fade');
							$(lremove_wrapper).removeClass('fade');
							$(faded_items).fadeTo(0, 1);

							$(lwishlist_working).hide();
							$(lwishlist_button).show();
							$(lremove_button).removeAttr('disabled');
							$(lqty_field).removeProp('disabled');
							$(ldecrease_button).removeAttr('disabled');
							$(lincrease_button).removeAttr('disabled');
							$(laddon_checkbox).removeProp('disabled');

							if (lineitem.tuckbox_size == '0') {

								if (lineitem.addon == '1') {
									$(laddon_flag).fadeTo(0, 1);
								} else {
									$(laddon_flag).fadeTo(0, 0);
								}

							} else {
								$(laddon_flag).hide();
							}

							//resolve tuckbox flag
							if (ltuckbox_size != '0') {
								$(ltuckbox_flag).fadeTo(0, 1);
							}

						} else if (lineitem.wishlist == 0 && lineitem.wisherror) {

							//move to wishlist clicked when not logged in
							$(lwishlist_working).hide();
							$(lwishlist_button).show();
							$(lremove_button).removeAttr('disabled');
							$(lqty_field).removeProp('disabled');
							$(ldecrease_button).removeAttr('disabled');
							$(lincrease_button).removeAttr('disabled');
							$(laddon_checkbox).removeProp('disabled');
							if (lineitem.wisherror) {
								$(lwishlist_text).html(lineitem.wisherror);
								$(lwishlist_text).show();
							}
						} else if (lineitem.oldqty == 0) {
							// undone remove from cart
							var faded_items = $('#row_' + lineitem.wid + ' div.fade');
							$(lwishlist_wrapper).removeClass('fade');
							$(faded_items).fadeTo(0, 1);

							if (lineitem.tuckbox_size == '0') {

								if (lineitem.addon == '1') {
									$(laddon_flag).fadeTo(0, 1);
								} else {
									$(laddon_flag).fadeTo(0, 0);
								}

							} else {
								$(laddon_flag).hide();
							}

							//resolve tuckbox flag
							if (ltuckbox_size != '0') {
								$(ltuckbox_flag).fadeTo(0, 1);
							}

							$(lremove_working).hide();
							$(lremove_button).show();
							$(lwishlist_button).removeAttr('disabled');
							$(lqty_field).removeProp('disabled');
							$(ldecrease_button).removeAttr('disabled');
							$(lincrease_button).removeAttr('disabled');
							$(laddon_checkbox).removeProp('disabled');
						}
					}

					// store the old quantity into an attribute for later
					if (lineitem.oldqty != lineitem.qty) {
						$(lqty_field).attr('oldval', parseInt(lineitem.oldqty));
					}

					// update addon price
					$(laddon_price).text(lineitem.addontotal);

					// update quantity
					$(lqty_field).val(lineitem.qty);
					// update line-item unit price
					if (pwyw_input) {
						$(lutotal).attr('item_price',parseFloat(/\d*\.?\d+/gm.exec(lineitem.lutotal)));
						var orig_val = parseFloat($(pwyw_input).val());
						$(pwyw_input).val(lineitem.lutotal.substring(1));
						var new_val = parseFloat($(pwyw_input).val());
						if ($(pwyw_loading).is(':visible')) {
							//hide spinner, show checkbox for 1 second, then fade out.
							$(pwyw_loading).hide();
							if (orig_val == new_val) {
								$(pwyw_success).show().delay(1000).fadeOut();
							} else {
								$(pwyw_error).show().delay(1000).fadeOut();
							}
						}
					} else {
						var spaces = '\u00a0\u00a0\u00a0\u00a0';
						var new_lutotal = 'X' + spaces + lineitem.lutotal + spaces + '=';
						$(lutotal).text(new_lutotal);
					}
                    var lutotal_number = parseFloat(/\d*\.?\d+/gm.exec(lineitem.lutotal));
                    if(lutotal_number) {
                        $(lutotal).attr('item_price', lutotal_number);
                    }
					// update line-item subtotal
					$(ltotal).text(lineitem.ltotal);
                    var ltotal_number = parseFloat(/\d*\.?\d+/gm.exec(lineitem.ltotal));
                    if(ltotal_number) {
                        $(ltotal).attr('item_price', ltotal_number);
                    }
					// Update the checkout form message and buttons.
					if (result.checkout == true) {
						enable_checkout();
					}
					else {
						disable_checkout(result.checkout_messages);
					}
				}

			}
		};
		ajaxQueue.schedule(updateCart);
	}

	function enable_checkout() {
		// Set message.
		$('#card_and_book_message').html('');
		// Show button, enable click.
		$('#cartcheckoutbutton.user-logged-in .site-button').css('cursor', 'pointer').prop('disabled', false);
		$('#cartcheckoutbutton-footer.user-logged-in .site-button').css('cursor', 'pointer').prop('disabled', false);
		$('#cartcheckoutbutton.user-logged-in').click(function() {
			submit_form('cart_contents');
			}).fadeTo(1, 1);
		$('#cartcheckoutbutton-footer.user-logged-in').click(function() {
			submit_form('cart_contents');
			}).fadeTo(1, 1);
	}

	function disable_checkout(message) {
		// Set message.
		$('#card_and_book_message').html(message);
		// Show button, disable click.
		$('#cartcheckoutbutton.user-logged-in .site-button').css('cursor', 'auto').prop('disabled', true);
		$('#cartcheckoutbutton-footer.user-logged-in .site-button').css('cursor', 'auto').prop('disabled', true);
		$('#cartcheckoutbutton.user-logged-in').click('').fadeTo(1, 0.4);
		$('#cartcheckoutbutton-footer.user-logged-in').click('').fadeTo(1, 0.4);
	}

	function submit_cart_hidden_increase(pid, qty, wishlist, addon, addon_type, callback) {
		var find_wid = get_wid_from_pid(pid);
		increaseCart = {
			// Javascript submits data to php:
			// * Product ID
			// * Quantity always be increased in +1
			data: {
				inputs: find_wid,
				code: 'increase',
				qty: qty,
				wishlist: wishlist,
				addon: addon,
				addon_type: addon_type
			},
			cbScs: function(result) {
				//if cartsize is undefined or otherwise not a number, set to 1
				// since we presume at least one item has just been added to cart
				if(result.cartsize) {
					if(isNaN(result.cartsize)) {
						result.cartsize = 1;
					}
				} else {
					result.cartsize = 1;
				}
				updateCartWidget(result.cartsize);
				if (typeof callback === "function")
					callback();
			}
		};
		existingConfig = ajaxQueue._config;
		ajaxQueue.init({target:"/includes/ajax/cart_processor.php"});
		ajaxQueue.schedule(increaseCart);
		ajaxQueue.init(existingConfig);	}

</script>	
<script>
	var iScrollers = {};
	var lazySliders = {};

	var lazySliderBox = function(opts){
		var elem_id = opts.elem_id,
			old_api_compatibility = opts.old_api_compatibility,
			$elem = $('#' + elem_id),
			view_type = opts.view_type,
			hide_if_empty = opts.hide_if_empty ? opts.hide_if_empty:false ,
			old_api_view_type,
			$content,
			item_size = 142,
			force_recache=false;

		//url could already have params
		var split_url = opts.api_url.split('?');
		var params = split_url[1] || '';

		if (location.search.indexOf('force_recache=1') !== -1) {
			console.log('force_recache ON');
			force_recache = true;
		}

		//TODO: This can be adapted after migratting to the new lazySliderBox
		if (old_api_compatibility){
			var api_url = split_url[0];
		} else {
			var api_url = (split_url[0].slice(-1) != '/')?split_url[0] + '/':split_url[0];
		}

		var init_options = {};
		if (params != ''){
			var split_params = params.split('&');
			for(var i in split_params){
				var param_name = split_params[i].split('=')[0];
				var param_value = split_params[i].split('=')[1];
				init_options[param_name] = param_value;

				//Old api compat:
				if(old_api_compatibility && param_name === 'view_strip'){
					old_api_view_type = param_value;
				}
			}
		};

		//Private methods:
		var addClickEvent = function(){
			var iScrollerIndex = $(this).closest('.strip_content').attr("id");
			var iScroller = iScrollers[iScrollerIndex];

			$(this).unbind('click');
			if (!iScroller.busy){
				$(this).hide();
				$(this).parent().find(".owl-next-spinner").show();
				iScroller.busy = true;
				iScroller.loading = false;
				// Supress hard bounces
				var distance = $(iScroller.wrapper).find(".scroller").width() - Math.abs(iScroller.x);
				var wrapperWidth = $(iScroller.wrapper).innerWidth();
				var numItemsWrapper = Math.floor(wrapperWidth / item_size);
				var anchoItemsWrapper = numItemsWrapper * item_size;

				if ((distance - anchoItemsWrapper) < anchoItemsWrapper) {
					iScroller.scrollTo(iScroller.x - (distance - anchoItemsWrapper), 0, 500, IScroll.utils.ease.quadratic);
				} else {
					iScroller.scrollTo(iScroller.x - anchoItemsWrapper, 0, 500, IScroll.utils.ease.quadratic);
				}
				return false;
			}
		}

		var initToolTips = function(){
			$content.find('a[rel*="includes/ajax/tooltip_request_handler.php?products_id="]').each(function () {
				$(this).qtip({
					content: {
						text: '<div style="background: transparent;"><i class="fa fa-spinner fa-pulse" ></i></div>',
						ajax: {
							url: $(this).attr('rel') + '&view_strip=' + view_type,
							type: 'GET',
							data: {},
							success: function (data) {
								content = data;
								this.set('content.text', content);
							}
						}
					},
					position: {
						target: $(this).children()[0],
						my: 'bottom left',
						at: 'top right',
						adjust: {
							method: 'flip',
							x: 5,
							y: 5
						},
						viewport: $(window),
						effect: false
					},
					show: {
						event: 'mouseover',
						solo: true
					},
					hide: {
						event: 'mouseout'
					},
					style: {
						classes: 'ui-tooltip-light ui-tooltip-shadow ui-tooltip-rounded',
						tip: {
							corner: true,
							offset: 5
						}
					}
				})
			});
		};

		var initSliderIScroller = function(){
			var id_index = $elem.attr('id');
			iScrollers[id_index] = new IScroll("#" + $elem.find('.owl-carousel').attr('id'), {
				scrollX: true,
				scrollY: false,
				mouseWheel: false,
				desktopCompatibility: true,
				eventPassthrough: true
			});

			iScrollers[id_index].busy = false;
			iScrollers[id_index].loading = false;

			// PG: We'll use here and into event closures
			var _this = iScrollers[id_index];

			// PG: Initial state of the arrow buttons
			if (Math.abs(_this.x) > 0) {
				$(_this.wrapper).find(".owl-prev").show();
			} else {
				$(_this.wrapper).find(".owl-prev").hide();
			}

			if (Math.abs(_this.x) < Math.abs(_this.maxScrollX)) {
				$(_this.wrapper).find(".owl-prev").hide();
			} else {
				$(_this.wrapper).find(".owl-next").hide();
				$(_this.wrapper).find(".owl-next-spinner").show();
				iScrollers[id_index].busy = true;
			}

			$(_this.wrapper).find('.owl-prev').on('click', function() {
				// Supress bounces
				if (Math.abs(_this.x + $(_this.wrapper).width()) > $(_this.wrapper).width()){
					_this.scrollTo(_this.x + $(_this.wrapper).width(), 0, 500, IScroll.utils.ease.quadratic);
				} else {
					_this.scrollTo(0, 0, 500, IScroll.utils.ease.quadratic);
				}
				return false;
			});

			$(_this.wrapper).find('.owl-next').bind('click', addClickEvent);

			//  PG: Is an event from the object, not of the $(wrapper)
			_this.on("scrollEnd", function() {
				if (Math.abs(this.x) > 0) {
					$(this.wrapper).find(".owl-prev").show();
				} else {
					$(this.wrapper).find(".owl-prev").hide();
				}

				if (Math.abs(_this.x) < Math.abs(_this.maxScrollX)) {
					$(this.wrapper).find(".owl-next").show();
					$(this.wrapper).find(".owl-next-spinner").hide();
					iScrollers[id_index].busy = false;
					$(this.wrapper).find(".owl-next").bind('click', addClickEvent);
				} else {
					if(!iScrollers[id_index].loading){
						var el = this.wrapper,
							li,
							_current_iscroll = this;

						// Pablo García (2014-05-20): Item from wich we request
						var item_from = $(el).find('.scroller ul li').length;
						var page_params = {
							index: item_from
						};
						if(old_api_compatibility){
							page_params.item_strip = item_from;
						}

						$(_current_iscroll.wrapper).find(".owl-next").unbind('click').hide();
						$(_current_iscroll.wrapper).find(".owl-next-spinner").show();
						iScrollers[id_index].busy = true;
						iScrollers[id_index].loading = true;

						api_call(page_params, function(new_content){
							if(/\w+/.test(new_content)){
								var $new_content = $(new_content);
								var total_lenght = $new_content.length + $(el).find('.scroller').find('li').length;
								$new_content.each(function(){
									$(el).find('.scroller ul').append($(this));
									_current_iscroll.refresh();
								}).promise().done(function(){
									$(el).find('.scroller').css('width', total_lenght * item_size);
									_current_iscroll.refresh();
									$(_current_iscroll.wrapper).find(".owl-next-spinner").hide();
									$(_current_iscroll.wrapper).find(".owl-next").show();
									iScrollers[id_index].busy = false;
									iScrollers[id_index].loading = false;
									$(_current_iscroll.wrapper).find(".owl-next").bind('click', addClickEvent);
								});

								initToolTips();

								$elem.find('.owl-item').find('h1.smallH1 a').each(function() {
									$(this).ellipsis({
										row: 2
									});
								});
								$elem.find('li.smallText, div.smallText').find('h1.smallH1 a').each(function() {
									$(this).ellipsis({
										row: 2
									});
								});
							} else{
								$(_current_iscroll.wrapper).find(".owl-next").hide();
								$(_current_iscroll.wrapper).find(".owl-next-spinner").hide();
								iScrollers[id_index].busy = false;
								if(iScrollers[id_index].loading) {
									iScrollers[id_index].loading = false;
								}
							}
						});
					}
				}
			});

			$elem.find('.product_price_list_mode').each(function() {
				if ($(this).find('s').length > 0) {
					$(this).parent().find('.product_name_list_mode').css('max-width', '150px');
				}
			});
			$elem.find('a.product_name_list_mode').each(function() {
				var width_price_div = $(this).closest('li').find('.product_price_list_mode').width();
				$(this).css('float', 'right');
				$(this).width(205 - width_price_div);
			});
			$elem.find('.owl-item').find('h1.smallH1 a').each(function() {
				$(this).ellipsis({
					row: 2
				});
			});
			$elem.find('li.smallText, div.smallText').find('h1.smallH1 a').each(function() {
				$(this).ellipsis({
					row: 2
				});
			});
		};

		var api_call = function(opts, callback){
			var page_params = {};
			
			if (force_recache === true) {
				page_params.force_recache = '1';
			}
			var options = jQuery.extend(true, {}, init_options, opts, page_params);

			$.get(api_url + view_type, options, callback);
		};

		//Public methods:

		var object = {};

		object.set_view_type = function(new_view_type){
			if(old_api_compatibility){
				old_api_view_type = new_view_type;
			} else {
				view_type = new_view_type || '';
			}
		};

		object.update = function(opts, callback){
			$elem.css({height: $elem.outerHeight() + 'px'});
			$elem.fadeOut('fast').html('<div class="loader_spinner" style="margin-top: 10px; text-align: center"><img width="150px" src="https://www.dmsguild.com/shared_images/ajax-loader.gif"/></div>').fadeIn('fast').animate({height: '200px'});

			api_call(opts, this.load);
		};

		object.adjust_size = function(){
			if(typeof $content != 'undefined') {
				$content.find('div.owl-products-carousel, div.owl-products-carousel-between-columns').each(function () {
					var $elems = $(this).find('ul li');
					var num_elems = $elems.length;
					$(this).find('.scroller').width(num_elems * $elems.eq(0).outerWidth());
					$(this).outerWidth($elem.prevAll('.infoBoxHeading:first').outerWidth() - 5);

					$(this).attr('id', 'iScroll_' + elem_id);
				});
			}
		};

		object.load = function (content) {
			$content = $(content);

			object.adjust_size();
			initToolTips();

			$elem.html($content);
			$elem.css('height', 'auto');

			if (view_type == 'slider_view'
					|| (old_api_compatibility && old_api_view_type == 'slider_view')) {
				initSliderIScroller();
			}

			$numItems = $content[1].getElementsByTagName('li').length;

			if(hide_if_empty && $numItems == 0){
				$elem.parent().hide();
			}

			$elem.find('.loader_spinner').parent().hide();
		};

		return object;
	}

	$(window).resize(function() {
		if(typeof lazySliders != 'undefined') {
			$.when($('.strip_content').hide(0)).then(function(){
				for (var i in lazySliders){
					lazySliders[i].adjust_size();
				}
				$('.strip_content').show();
			});
		}
	});

	$(window).ready(function() {
		// Changelog feature: When user clicks on read more for a long changelog, show it.
		// Hide all other shown chagelogs.
		$('.changelog_row_show').on('click',function(e) {
			e.preventDefault();
			alert('Found the event');
			var id = $(this).attr('id');
			// Hide all larger texts.
			$('.changelog_row_txt_hide').hide();
			// Show the selected large text.
			$('#' + id + '_hide').show();
			// Show the smaller display for all the others.
			$('.changelog_row_txt_show').show();
			// Hide the smaller display for the selected one.
			$('#' + id + '_show').hide();
			return false;
		});
		// Changelog feature: When user clicks to see the changelog, show it.
		$('.changelog_display_show a').on('click',function() {
			var id = $(this).attr('id');
			// Hide the click to show.
			$('.changelog_display_show').hide();
			// Show the log.
			$('.changelog_display_hide').show();
			return false;
		});
		// Changelog feature: When user clicks to hide the changelog, hide it.
		$('.changelog_display_hide a').on('click',function() {
			var id = $(this).attr('id');
			// Hide the click to show.
			$('.changelog_display_show').show();
			// Show the log.
			$('.changelog_display_hide').hide();
			return false;
		});

		$('body').trigger('scroll');
	});

	function QueryStringToJSON(url) {
		var pairs = url.split('&');
		var result = {};
		if (pairs instanceof Array) {
		  $(pairs).each(function(pair) {
			  pair = $(pair).text();
			  pair = pair.split('=');
			  result[pair[0]] = decodeURIComponent(pair[1] || '');
		  });
		}
		if (!checkQuestioStringToJSON(result)) {
			result = QueryStringToJSONAlternative(url)
		}
	  if ("JSON" in window) {
		return JSON.parse(JSON.stringify(result));
	  }
	  return url;
	}

	/*
		José Ignacio 2015-01-16
		In some cases the above function returns {=""}
		This function for now only check that
	 */
	function checkQuestioStringToJSON(object) {
		var object_length = Object.keys(object).length;
		if (object_length == 0) {
			return false;
		} else if (object_length == 1) {
			for(key in object){
				var val = object[key];
				if (key=="" && val=="") {
					return false;
				}
			}
		}

		return true;
	}

	// this is the old function which works fine with several browsers
	function QueryStringToJSONAlternative(url) {
		var pairs = url.split('&');

		var result = {};
		pairs.forEach(function(pair) {
			pair = pair.split('=');
			result[pair[0]] = decodeURIComponent(pair[1] || '');
		});

		return JSON.parse(JSON.stringify(result));
	}

	function switchToMobile(url){
		$.get('/includes/ajax/switch_to_mobile.php',"",function(){
			window.location.href = url;
		});
	}

	var query_string = QueryStringToJSON(window.location.href);

</script>

<script src="/includes/javascript/animated_add_to_cart.js"></script>


        <!-- header_eof -->
        <!-- body -->
        <table border="0" width="100%" cellspacing="0" cellpadding="3" >
            <tr>
                <td width="245" valign="top">
                    <table class="left_column_container" border="0" width="245" cellspacing="0" cellpadding="2">
                        <!-- left_navigation -->
                        <tr><td class="col_left_content">
 <div class="widget-nav"> <div class="widget-nav-title"> Browse Categories </div>  <div class="grid_10 alpha omega widget-nav-item"> <div id="nav-content" class="widget-nav-item-title" style=""> Content <span id="nav-icon-content" class="widget-nav-item-title-icon widget-nav-item-title-icon-close " height="15px"></span> </div> <div class="widget-nav-item-content"> <div style="min-width: 145px; display: none;" id="more-hider-f45468"><ul class="widget-nav-item-list"> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=45469_0_0_0_0_0_0_0">DMs Guild</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=45680_0_0_0_0_0_0_0">Guild Adept</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=45470_0_0_0_0_0_0_0">D&D Adventurers League</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=45471_0_0_0_0_0_0_0">D&D Classics</a> </div> <div class="clear"></div> </div> </li></div> </div> </div> <div class="clear"></div> <div class="grid_10 alpha omega widget-nav-item"> <div id="nav-storyline" class="widget-nav-item-title" style=""> Storyline <span id="nav-icon-storyline" class="widget-nav-item-title-icon" height="15px"></span> </div> <div class="widget-nav-item-content"> <div style="min-width: 145px; display: none;" id="more-hider-f45472"><ul class="widget-nav-item-list"> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_45682_0_0_0_0_0_0">Tomb of Annihilation</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_45572_0_0_0_0_0_0">Tales from the Yawning Portal</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_45549_0_0_0_0_0_0">Storm King's Thunder</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_45507_0_0_0_0_0_0">Curse of Strahd</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_45474_0_0_0_0_0_0">Elemental Evil</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_45473_0_0_0_0_0_0">Rage of Demons</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_45475_0_0_0_0_0_0">Tyranny of Dragons</a> </div> <div class="clear"></div> </div> </li></div> </div> </div> <div class="clear"></div> <div class="grid_10 alpha omega widget-nav-item"> <div id="nav-product-type" class="widget-nav-item-title" style=""> Product Type <span id="nav-icon-product-type" class="widget-nav-item-title-icon widget-nav-item-title-icon-close " height="15px"></span> </div> <div class="widget-nav-item-content"> <div style="min-width: 145px; display: none;" id="more-hider-f45341"><ul class="widget-nav-item-list"> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_45393_0_0_0_0_0">Adventures</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_45381_0_0_0_0_0">Core Rules</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_45463_0_0_0_0_0">Bundles</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_45397_0_0_0_0_0">Character Options</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_45396_0_0_0_0_0">Gear/Magic Items</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_45476_0_0_0_0_0">Resources for DMG Creators</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_45384_0_0_0_0_0">RPG Media</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_45383_0_0_0_0_0">Tabletop Essentials</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_45385_0_0_0_0_0">Board/Card/Miniature Games</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_45386_0_0_0_0_0">Gift Certificates</a> </div> <div class="clear"></div> </div> </li></div> </div> </div> <div class="clear"></div> <div class="grid_10 alpha omega widget-nav-item"> <div id="nav-location" class="widget-nav-item-title" style=""> Location <span id="nav-icon-location" class="widget-nav-item-title-icon" height="15px"></span> </div> <div class="widget-nav-item-content"> <div style="min-width: 145px; display: none;" id="more-hider-f45423"><ul class="widget-nav-item-list"> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_45531_0_0_0_0">Aquatic</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_45532_0_0_0_0">Planar</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_45422_0_0_0_0">Settlement/Urban</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_45534_0_0_0_0">Underdark/Subterranean</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_45535_0_0_0_0">Wilderness</a> </div> <div class="clear"></div> </div> </li></div> </div> </div> <div class="clear"></div> <div class="grid_10 alpha omega widget-nav-item"> <div id="nav-setting" class="widget-nav-item-title" style=""> Setting <span id="nav-icon-setting" class="widget-nav-item-title-icon" height="15px"></span> </div> <div class="widget-nav-item-content"> <div style="min-width: 145px; display: none;" id="more-hider-f45343"><ul class="widget-nav-item-list"> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_45536_0_0_0">Nonspecific/Any Setting</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_45359_0_0_0">Ravenloft</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_45353_0_0_0">Dark Sun</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_45354_0_0_0">Dragonlance</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_45355_0_0_0">Eberron</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_45356_0_0_0">Forgotten Realms</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_45357_0_0_0">Greyhawk</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_45360_0_0_0">Search Settings</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_45690_0_0_0">Plane Shift</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_45358_0_0_0">Planescape</a> </div> <div class="clear"></div> </div> </li></div> </div> </div> <div class="clear"></div> <div class="grid_10 alpha omega widget-nav-item"> <div id="nav-edition" class="widget-nav-item-title" style=""> Edition <span id="nav-icon-edition" class="widget-nav-item-title-icon" height="15px"></span> </div> <div class="widget-nav-item-content"> <div style="min-width: 145px; display: none;" id="more-hider-f45342"><ul class="widget-nav-item-list"> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_0_45344_0_0">Original Edition (OD&amp;D)</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_0_45345_0_0">Basic/Expert</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_0_45346_0_0">1st Edition</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_0_45347_0_0">2nd Edition</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_0_45348_0_0">3rd Edition (d20 System)</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_0_45349_0_0">4th Edition</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_0_45462_0_0">5th Edition</a> </div> <div class="clear"></div> </div> </li></div> </div> </div> <div class="clear"></div> <div class="grid_10 alpha omega widget-nav-item"> <div id="nav-format" class="widget-nav-item-title" style=""> Format <span id="nav-icon-format" class="widget-nav-item-title-icon" height="15px"></span> </div> <div class="widget-nav-item-content"> <div style="min-width: 145px; display: none;" id="more-hider-f45544"><ul class="widget-nav-item-list"> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_0_0_45546_0">PDF</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_0_0_45547_0">Print</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_0_0_45548_0">ePub</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_0_0_45545_0">Virtual Tabletop</a> </div> <div class="clear"></div> </div> </li></div> </div> </div> <div class="clear"></div> <div class="grid_10 alpha omega widget-nav-item"> <div id="nav-languages" class="widget-nav-item-title" style=""> Languages <span id="nav-icon-languages" class="widget-nav-item-title-icon" height="15px"></span> </div> <div class="widget-nav-item-content"> <div style="min-width: 145px; display: none;" id="more-hider-f45477"><ul class="widget-nav-item-list"> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_0_0_0_45483">English</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_0_0_0_45478">Español</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_0_0_0_45479">Français</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_0_0_0_45480">Italiano</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_0_0_0_45481">Deutsch</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_0_0_0_45482">Português</a> </div> <div class="clear"></div> </div> </li> <li> <div class="nav-counter-item"> <div class="nav-counter-text"> <a href="http://www.dmsguild.com/browse.php?filters=0_0_0_0_0_0_0_45484">Svenska</a> </div> <div class="clear"></div> </div> </li></div> </div> </div> <div class="clear"></div> <div class="grid_10 alpha omega widget-nav-item"> <div id="nav-price" class="widget-nav-item-title" style="cursor: auto;"> Price </div> <div class="widget-nav-item-content"> <form action="browse.php" name="filter_prices_form" id="filter_prices_form"><div class="widget_filter_price" style="padding-top: 4px;"><a href='http://www.dmsguild.com/browse.php?pwyw=true'>Pay What You Want</a></div><div class="widget_filter_price"><a href='http://www.dmsguild.com/browse.php?pto=0&pfrom=0'>Free</a></div><div class="widget_filter_price">$ <input type="text" name="pfrom" style="width: 50px;" class="validate[custom[number]]" /> to $ <input type="text" name="pto" style="width: 50px;" class="validate[custom[number]]" /><span style="vertical-align: middle;"><input type="image" src="https://www.dmsguild.com/shared_images/icon_go.png" border="0" alt="Search" title=" Search "></span></div></form> </div> </div> <div class="clear"></div><script type="text/javascript"> $('#nav-content').click(function() { $('#more-hider-f45468').slideToggle(); $('#nav-icon-content').toggleClass('widget-nav-item-title-icon-close'); }); 
 $('#nav-storyline').click(function() { $('#more-hider-f45472').slideToggle(); $('#nav-icon-storyline').toggleClass('widget-nav-item-title-icon-close'); }); 
 $('#nav-product-type').click(function() { $('#more-hider-f45341').slideToggle(); $('#nav-icon-product-type').toggleClass('widget-nav-item-title-icon-close'); }); 
 $('#nav-location').click(function() { $('#more-hider-f45423').slideToggle(); $('#nav-icon-location').toggleClass('widget-nav-item-title-icon-close'); }); 
 $('#nav-setting').click(function() { $('#more-hider-f45343').slideToggle(); $('#nav-icon-setting').toggleClass('widget-nav-item-title-icon-close'); }); 
 $('#nav-edition').click(function() { $('#more-hider-f45342').slideToggle(); $('#nav-icon-edition').toggleClass('widget-nav-item-title-icon-close'); }); 
 $('#nav-format').click(function() { $('#more-hider-f45544').slideToggle(); $('#nav-icon-format').toggleClass('widget-nav-item-title-icon-close'); }); 
 $('#nav-languages').click(function() { $('#more-hider-f45477').slideToggle(); $('#nav-icon-languages').toggleClass('widget-nav-item-title-icon-close'); }); 
 $('#more-hider-f45468').slideToggle(); 
 $('#more-hider-f45341').slideToggle(); 
</script> </div> <div class="clear"></div><!-- storylines //-->
<table width="100%">
    <tr>
        <td>
            <div class="widget-nav-title storylines" >
                Previous Storylines            </div>
        </td>
    </tr>
    <tr>
        <td align="center">
            <a href="http://www.dmsguild.com/browse.php?filters=45572&site=dmg"><img src="themes/dmg/images/Storyline-TYP.png"></a>
        </td>
    </tr>
    <tr>
        <td align="center">
            <a href="http://www.dmsguild.com/browse.php?filters=45549&site=dmg"><img src="themes/dmg/images/Storyline-SKT.png"></a>
        </td>
    </tr>
    <tr>
        <td align="center">
            <a href="http://www.dmsguild.com/browse.php?filters=45507&site=dmg"><img src="themes/dmg/images/Storyline-CoS.png"></a>
        </td>
    </tr>
	<tr>
		<td align="center">
			<a href="http://www.dmsguild.com/browse.php?filters=45473&site=dmg"><img src="themes/dmg/images/Storyline-RoD.png"></a>
		</td>
	</tr>
    <tr>
        <td align="center">
            <a href="http://www.dmsguild.com/browse.php?filters=45474&site=dmg"><img src="themes/dmg/images/Storyline-EE.png"></a>
        </td>
    </tr>
    <tr>
        <td align="center">
            <a href="http://www.dmsguild.com/browse.php?filters=45475&site=dmg"><img src="themes/dmg/images/Storyline-ToD.png"></a>
        </td>
    </tr>
</table>
<!-- storylines_eof //-->
<!-- other products //-->
<table width="100%">
    <tr>
        <td>
            <div class="widget-nav-title storylines" >
                Other Products            </div>
        </td>
    </tr>
    <tr>
        <td align="center">
            <a href="http://www.drivethrucomics.com/browse/pub/8687/IDW?src=DnDClassicsButton"><img src="themes/dmg/images/idwlogo.png"></a>
        </td>
    </tr>
    <tr>
        <td align="center">
            <a href="http://www.drivethrurpg.com/browse/pub/44/Wizards-of-the-Coast/subcategory/9730_9733/d20-Modern-Generic?src=DnDC"><img src="themes/dmg/images/d20m.gif"></a>
        </td>
    </tr>
    <tr>
        <td align="center">
            <a href="http://www.drivethrurpg.com/browse/pub/44/Wizards-of-the-Coast/subcategory/9730_262/Gamma-World?src=DnDClassicsButton"><img src="themes/dmg/images/gamma_world.jpg"></a>
        </td>
    </tr>
</table>
<!-- other products //-->
<div style="padding-top: 7px;">
</div>
<div>
<br /><a target="_blank" href="http://www.drivethrucards.com/index.php?src=sistersite"><img src="https://www.dmsguild.com/shared_images/dtcards-logo-245.png" width="245" title="DriveThruCards"></a><br /><br /><a target="_blank" href="http://www.drivethrucomics.com/index.php?src=sistersite"><img src="https://www.dmsguild.com/shared_images/dtcomics-logo-245.png" width="245" title="DriveThruComics"></a><br /><br /><a target="_blank" href="http://www.drivethrufiction.com/index.php?src=sistersite"><img src="https://www.dmsguild.com/shared_images/dtfiction-logo-245.png" width="245" title="DriveThruFiction"></a><br /><br /><a target="_blank" href="http://www.drivethrurpg.com/index.php?src=sistersite"><img src="https://www.dmsguild.com/shared_images/dtrpg-logo-245.png" width="245" title="DriveThruRPG"></a><br /><br /><a target="_blank" href="http://www.wargamevault.com/index.php?src=sistersite"><img src="https://www.dmsguild.com/shared_images/wgv-logo-245.png" width="245" title="WarGameVault"></a></div></td></tr>                        <!-- left_navigation_eof -->
                    </table>
                </td>

                <td width="100%" valign="top">
                    <table border="0" width="100%" cellspacing="0" cellpadding="0" id="content_table">
                        <tr>
                            <!-- 2011-02-15 Chuck Childers: Staley requested decreased gutters on MS sites, but this affects all sites.  It didn't look bad, so we'll try it for a bit. -->
                            <td valign="top">
                                <table border="0" width="100%" cellspacing="0" cellpadding="0" align="center">
                                    
                                    <tr>
                                        <td valign="top" colspan="2">
                                            
<div style="display:table;width:100%;">
    <div style="display: table-cell;vertical-align: top;">
        <div id="search_bar_widget">
    <form name="sbf" id="search_bar_form" method="get" action="browse.php">

        <table cellspacing="0" cellpadding="0" width="100%">
            <tr>
                <td width="100%" style="padding: 8px 0px 8px 8px;">
                                            <input name="keywords" id="search_bar" type="input" autocomplete="off" value="" style="color: ;" placeholder="Search" onfocus="onfocus_name();">
                                    </td>
                <td style="padding:  8px 8px 8px 0px ">
                    <input type="image" src="https://www.dmsguild.com/themes/dtrpg/images/buttons/search_button.png" border="0" alt="Search" onclick="return check_search_form();">                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <div style="float: right; display: inline">
                        <span onclick="$('#search_bar_advanced_controls').slideToggle();" class="actionLink">
                    Advanced Search >                        </span>
                    </div>
                    <br style="clear: both" />
                </td>
            </tr>
        </table>
        <div id="search_bar_advanced_controls" style="display: none;">
            <table cellspacing="8" cellpadding="0" width="100%">
                
				<tr> <!-- :KLUDGE: bblackmoor 2010-07-30: This row sets the column widths -->
                    <th class="main search_bar_control_label" align="left">
Author:<br />
<img class="onestart" src="https://www.dmsguild.com/images/pixel_trans.gif" border="0" alt="" width="100" height="1" >                    </th>
                    <td class="main search_bar_control">
<input type="text" name="author" size="30" /><br />
<img class="onestart" src="https://www.dmsguild.com/images/pixel_trans.gif" border="0" alt="" width="250" height="1" >                    </td>
                </tr>
                <tr>
                    <th class="main search_bar_control_label" align="left">
                        Artist:                    </th>
                    <td class="main search_bar_control">
<input type="text" name="artist" size="30" />                    </td>
                </tr>
                <tr>
                    <th class="main search_bar_control_label" align="left">
Price:                    </th>
                    <td class="main search_bar_control_label search_bar_control">
$<input type="text" name="pfrom" size="10" />to                        $                        <input type="text" name="pto" size="10" />                    </td>
                </tr>
                                    </table>
            <div id="submit_button_section">
                <span class="actionLink">
<button id="" class="cssBtn" type="submit" onclick="return check_search_form();"><span>Search</span></button>                </span>
            </div>
        </div>
    </form>
    <script type="text/javascript">
        // Because the date fields are initially hidden,
        // the picker can't be constructed until they are showing.
        // Therefore, the picker is attached to the onfocus event.
        function sdate_from_picker() {
            try {
                AnyTime.picker( "sdate_from", { format: "%Y-%m-%d"} );
            } catch (error) {
                // do nothing
            }
        }

        function sdate_to_picker() {
            try {
                AnyTime.picker( "sdate_to", { format: "%Y-%m-%d"} );
            } catch (error) {
                // do nothing
            }
        }

        // Because the time fields are initially hidden,
        // the picker can't be constructed until they are showing.
        // Therefore, the picker is attached to the onfocus event.
        function stime_from_picker() {
            try {
                // for ease of use, using whole hours in search
                AnyTime.picker( "stime_from", { format: "%l:00 %p"} );
            } catch (error) {
                // do nothing
            }
        }

        function stime_to_picker() {
            try {
                // for ease of use, using whole hours in search
                AnyTime.picker( "stime_to", { format: "%l:00 %p"} );
            } catch (error) {
                // do nothing
            }
        }

        function toggle_live_fields() {
            var has_is_live = document.getElementById('is_live');

            if (has_is_live) {
                var state = document.getElementById('is_live').checked;
                if (state) {
                    $('#live_products_section').slideDown('slow');
                } else {
                    $('#live_products_section').slideUp('slow');
                }
            }
        }

        function check_search_form() {
            var error_message = 'Please correct the following:\n\n';
            var error_found = false;
            var error_field;
            var keywords = document.sbf.keywords.value;
            var has_is_live = document.getElementById('is_live');

            var pfrom = document.sbf.pfrom.value;
            var pto = document.sbf.pto.value;
            var author = document.sbf.author.value;
            var pfrom_float;
            var pto_float;

            if (keywords == 'Search') {
                document.sbf.keywords.value = '';
            }
            if (keywords == 'Search within results... ') {
                document.sbf.keywords.value = '';
            }

            if ((keywords == '' || keywords.length < 1)
                && (pfrom == '' || pfrom.length < 1)
                && (pto == '' || pto.length < 1)
                && (author == '' || author.length < 1)
                && (!has_is_live)) {

                error_message = error_message + '* At least one of the fields in the search form must be entered.\n';
                error_field = document.sbf.keywords;
                error_found = true;
            }

            if (pfrom.length > 0) {
                pfrom_float = parseFloat(pfrom);

                if (isNaN(pfrom_float)) {
                    error_message = error_message + '* Price "from" must be a number.\n';
                    error_field = document.sbf.pfrom;
                    error_found = true;
                }
            } else {
                pfrom_float = 0;
            }

            if (pto.length > 0) {
                pto_float = parseFloat(pto);

                if (isNaN(pto_float)) {
                    error_message = error_message + '* Price "to" must be a number.\n';
                    error_field = document.sbf.pto;
                    error_found = true;
                }
            } else {
                pto_float = 0;
            }

            if (pfrom.length > 0 && pto.length > 0
                && !isNaN(pfrom_float)
                && !isNaN(pto_float)
                && pto_float < pfrom_float) {

                error_message = error_message + '* Price "to" must be greater than or equal to price "from".\n';
                error_field = document.sbf.pto;
                error_found = true;
            }

            if (error_found == true) {
                alert(error_message);
                error_field.focus();
                return false;
            } else {
                return true;
            }
        }

        function focus_on_search_bar() {
            var search_bar_input = document.getElementById('search_bar');
            if (search_bar_input) {
                var value_filter = (search_bar_input.value != '' && search_bar_input.value != ' ');

                if (search_bar_input && search_bar_input.value != 'Search' && search_bar_input.value != 'Search within results... ' && value_filter) {
                    search_bar_input.value = search_bar_input.value + ' ';
                    search_bar_input.focus();
                }
            }
        }

        var autocomplete;

        function onfocus_name() {
            var search = $('#search_bar');

            if (search.attr('value') == 'Search') {
                search.css('color','black');
                search.attr('value','');
            }

            if (search.attr('value') == 'Search within results... ') {
                search.css('color','black');
                search.attr('value','');
            }

            var cache = {},lastXhr;
            var options = {
                source: function(request, response) {
                    var term = request.term;
                    if ( term in cache ) {
                        response( cache[ term ] );
                        return;
                    }
                    $.ajax({
                        url: "includes/ajax/search_autocomplete_jquery.php",
                        dataType: "json",
                        data: {
                            term : request.term,
                            filters : (($('#search_filter')) ? $('#search_filter').val() : ''),
                            manufacturers_id : (($('#search_manufacturer')) ? $('#search_manufacturer').val() : ''),
                            cPath : (($('#search_cPath')) ? $('#search_cPath').val() : '')
                        },
                        success: function(data) {
                            cache[ term ] = data;
                            response(data);
                        }
                    });
                },
                delay: 400,
                minLength: 3,
                html: 'html',
                select: function(event,ui) {

                    $('#search_bar').val(ui.item.name);
                    location.replace(ui.item.link);

                    return false;
                }
            };

            autocomplete = $('#search_bar').autocomplete(options);

            return true;
        }
        toggle_live_fields();//start the fields off toggled
        focus_on_search_bar();//move focus to the search bar

        $('.search_parameter').each(function() {
            $( this ).on('click',function() {
                var lnk = $( this ).children().children().attr('href');
                if (lnk) location.href = lnk;
            })
        });

        if (0) {
            // TODO: bblackmoor 2012-06-13: design a min-search form specifically for live products
            //$('#search_bar_advanced_controls').slideDown();
        }
    </script>
        </div>
    </div>
<!--    begin subheader-->

<div style="display: table-cell;vertical-align: top;width: 365px;text-align: right;">
    <a href="http://support.dmsguild.com/hc/en-us/categories/202531048-DMs-Guild-General-Information" target="_blank"><img src="themes/dmg/images/DMsGuild-WhatIsIt_v2.png"></a>
</div><!--    end subheader-->
</div>
                                        </td>
                                    </tr>
                                    <!-- body_text -->

                                    
                                                                            <tr>
                                            <td><img class="onestart" src="https://www.dmsguild.com/images/pixel_trans.gif" border="0" alt="" width="100%" height="10" ></td>
                                        </tr>
                                        <tr>
    <td valign="top">
        <div style="width: 100%;;min-height:18px;"  height="14" class="infoBoxHeading" width="100%">&nbsp;
			<div style="float: left">
				&nbsp;Most Popular DMs Guild Titles
			</div>
			<div class="slider_switcher" style="float: right; line-height: 0px" elem_id="56af876"><a href="#" class="switch_view_button" style="outline:0;" name="slider_view">
					<img src="/shared_images/icon_slider_view_off.png"/>
				</a>
				<a href="#" class="switch_view_button" style="outline:0;" name="list_view">
					<img src="/shared_images/icon_list_view_off.png"/>
				</a>
				<a href="#" class="switch_view_button" style="outline:0;" name="grid_view">
					<img src="/shared_images/icon_grid_view_off.png"/>
				</a><a style="vertical-align: top; line-height: 19px; font-size: 11px" href="http://www.dmsguild.com/browse.php?filters=45469_0_0_0_0_0&page=1&sort=6a#browselist">See all</a>&nbsp;
			</div><script>
					$(document).ready(function() {
						$('.slider_switcher[elem_id="56af876"]').on('click', 'a.switch_view_button', function(e) {
							e.preventDefault();

							var slider_id = $(this).parent().attr('elem_id');
							var view_type = $(this).attr('name');

							$(this).parent().find('img').each(function(){
								var src = $(this).attr('src');
								$(this).attr('src', src.replace('_on.png', '_off.png'));
							});
							var src = $(this).find('img').attr('src');
							$(this).find('img').attr('src', src.replace('_off.png', '_on.png'));

							if(typeof lazySliders !== 'undefined' && typeof lazySliders[slider_id] !== 'undefined'){
								lazySliders[slider_id].set_view_type(view_type);
								lazySliders[slider_id].update({item_from: 0});
							}
						}).find('a.switch_view_button[name="slider_view"]').find('img').each(function(){
							var src = $(this).attr('src');
							$(this).attr('src', src.replace('_off.png', '_on.png'));
						});
					});
				</script></div>
<table id="56af876" class="infoBox strip_content" style="overflow:hidden;border:none;width:100%;border-spacing:0;" >
                    <tr>
                        <td>
                            <div class="owl-products-carousel owl-carousel" style="height: 200px;">
                                <div class="loader_spinner" style="margin-top: 10px; text-align: center" height="200px"><img width="150px" src="/shared_images/ajax-loader.gif"/></div>
                            </div>
                        </td>
                    </tr>
                </table><script>
				$(document).ready(function() {
					if(typeof lazySliders == 'undefined'){
						lazySliders = [];
					}
					$('#56af876').appear(function(){
						var opts = {
							elem_id: '56af876',
							view_type: 'slider_view',
							api_url: '/api/products/list/hottest_filtered?filters=45469&include_community_content=1',
							
						};
						lazySliders['56af876'] = lazySliderBox(opts);
						lazySliders['56af876'].update();
					});
				});
			</script>    </td>
</tr>
<tr>
    <td><img class="onestart" src="https://www.dmsguild.com/images/pixel_trans.gif" border="0" alt="" width="100%" height="10" ></td>
</tr>
<tr>
    <td valign="top">
        <div style="width: 100%;;min-height:18px;"  height="14" class="infoBoxHeading" width="100%">&nbsp;
			<div style="float: left">
				&nbsp;Newest DMs Guild Titles
			</div>
			<div class="slider_switcher" style="float: right; line-height: 0px" elem_id="f6f9408"><a href="#" class="switch_view_button" style="outline:0;" name="slider_view">
					<img src="/shared_images/icon_slider_view_off.png"/>
				</a>
				<a href="#" class="switch_view_button" style="outline:0;" name="list_view">
					<img src="/shared_images/icon_list_view_off.png"/>
				</a>
				<a href="#" class="switch_view_button" style="outline:0;" name="grid_view">
					<img src="/shared_images/icon_grid_view_off.png"/>
				</a><a style="vertical-align: top; line-height: 19px; font-size: 11px" href="http://www.dmsguild.com/browse.php?filters=45469_0_0_0_0_0&page=1&sort=4a#browselist">See all</a>&nbsp;
			</div><script>
					$(document).ready(function() {
						$('.slider_switcher[elem_id="f6f9408"]').on('click', 'a.switch_view_button', function(e) {
							e.preventDefault();

							var slider_id = $(this).parent().attr('elem_id');
							var view_type = $(this).attr('name');

							$(this).parent().find('img').each(function(){
								var src = $(this).attr('src');
								$(this).attr('src', src.replace('_on.png', '_off.png'));
							});
							var src = $(this).find('img').attr('src');
							$(this).find('img').attr('src', src.replace('_off.png', '_on.png'));

							if(typeof lazySliders !== 'undefined' && typeof lazySliders[slider_id] !== 'undefined'){
								lazySliders[slider_id].set_view_type(view_type);
								lazySliders[slider_id].update({item_from: 0});
							}
						}).find('a.switch_view_button[name="slider_view"]').find('img').each(function(){
							var src = $(this).attr('src');
							$(this).attr('src', src.replace('_off.png', '_on.png'));
						});
					});
				</script></div>
<table id="f6f9408" class="infoBox strip_content" style="overflow:hidden;border:none;width:100%;border-spacing:0;" >
                    <tr>
                        <td>
                            <div class="owl-products-carousel owl-carousel" style="height: 200px;">
                                <div class="loader_spinner" style="margin-top: 10px; text-align: center" height="200px"><img width="150px" src="/shared_images/ajax-loader.gif"/></div>
                            </div>
                        </td>
                    </tr>
                </table><script>
				$(document).ready(function() {
					if(typeof lazySliders == 'undefined'){
						lazySliders = [];
					}
					$('#f6f9408').appear(function(){
						var opts = {
							elem_id: 'f6f9408',
							view_type: 'slider_view',
							api_url: '/api/products/list/newest_in_dmg',
							
						};
						lazySliders['f6f9408'] = lazySliderBox(opts);
						lazySliders['f6f9408'].update();
					});
				});
			</script>    </td>
</tr>
    <tr>
        <td><img class="onestart" src="https://www.dmsguild.com/images/pixel_trans.gif" border="0" alt="" width="100%" height="10" ></td>
    </tr>
    <tr>
        <td valign="top">
            <div style="width: 100%;;min-height:18px;"  height="14" class="infoBoxHeading" width="100%">&nbsp;
			<div style="float: left">
				&nbsp;Newest D&D Guild Adept Titles
			</div>
			<div class="slider_switcher" style="float: right; line-height: 0px" elem_id="10674a4"><a href="#" class="switch_view_button" style="outline:0;" name="slider_view">
					<img src="/shared_images/icon_slider_view_off.png"/>
				</a>
				<a href="#" class="switch_view_button" style="outline:0;" name="list_view">
					<img src="/shared_images/icon_list_view_off.png"/>
				</a>
				<a href="#" class="switch_view_button" style="outline:0;" name="grid_view">
					<img src="/shared_images/icon_grid_view_off.png"/>
				</a><a style="vertical-align: top; line-height: 19px; font-size: 11px" href="http://www.dmsguild.com/browse.php?filters=45680_0_0_0_0_0&page=1&sort=4a#browselist">See all</a>&nbsp;
			</div><script>
					$(document).ready(function() {
						$('.slider_switcher[elem_id="10674a4"]').on('click', 'a.switch_view_button', function(e) {
							e.preventDefault();

							var slider_id = $(this).parent().attr('elem_id');
							var view_type = $(this).attr('name');

							$(this).parent().find('img').each(function(){
								var src = $(this).attr('src');
								$(this).attr('src', src.replace('_on.png', '_off.png'));
							});
							var src = $(this).find('img').attr('src');
							$(this).find('img').attr('src', src.replace('_off.png', '_on.png'));

							if(typeof lazySliders !== 'undefined' && typeof lazySliders[slider_id] !== 'undefined'){
								lazySliders[slider_id].set_view_type(view_type);
								lazySliders[slider_id].update({item_from: 0});
							}
						}).find('a.switch_view_button[name="slider_view"]').find('img').each(function(){
							var src = $(this).attr('src');
							$(this).attr('src', src.replace('_off.png', '_on.png'));
						});
					});
				</script></div>
<table id="10674a4" class="infoBox strip_content" style="overflow:hidden;border:none;width:100%;border-spacing:0;" >
                    <tr>
                        <td>
                            <div class="owl-products-carousel owl-carousel" style="height: 200px;">
                                <div class="loader_spinner" style="margin-top: 10px; text-align: center" height="200px"><img width="150px" src="/shared_images/ajax-loader.gif"/></div>
                            </div>
                        </td>
                    </tr>
                </table><script>
				$(document).ready(function() {
					if(typeof lazySliders == 'undefined'){
						lazySliders = [];
					}
					$('#10674a4').appear(function(){
						var opts = {
							elem_id: '10674a4',
							view_type: 'slider_view',
							api_url: '/api/products/list/newest?show_only_community_content=1&filters=45680',
							
						};
						lazySliders['10674a4'] = lazySliderBox(opts);
						lazySliders['10674a4'].update();
					});
				});
			</script>        </td>
    </tr>
    <tr>
        <td><img class="onestart" src="https://www.dmsguild.com/images/pixel_trans.gif" border="0" alt="" width="100%" height="10" ></td>
    </tr>
    <tr>
        <td valign="top" align="center">
            <a href="http://www.dmsguild.com/browse.php?filters=45682&site=dmg&src=tomb_of_annihilation">
                <img src="themes/dmg/images/DMsGuild-PromoBox_TOA.png" style="width:100%;">
            </a>
        </td>
    </tr>

<tr>
    <td><img class="onestart" src="https://www.dmsguild.com/images/pixel_trans.gif" border="0" alt="" width="100%" height="10" ></td>
</tr>
<tr>
    <td valign="top">
        <div style="width: 100%;;min-height:18px;"  height="14" class="infoBoxHeading" width="100%">&nbsp;
			<div style="float: left">
				&nbsp;Newest D&D Adventurers League Titles
			</div>
			<div class="slider_switcher" style="float: right; line-height: 0px" elem_id="c90b779"><a href="#" class="switch_view_button" style="outline:0;" name="slider_view">
					<img src="/shared_images/icon_slider_view_off.png"/>
				</a>
				<a href="#" class="switch_view_button" style="outline:0;" name="list_view">
					<img src="/shared_images/icon_list_view_off.png"/>
				</a>
				<a href="#" class="switch_view_button" style="outline:0;" name="grid_view">
					<img src="/shared_images/icon_grid_view_off.png"/>
				</a><a style="vertical-align: top; line-height: 19px; font-size: 11px" href="http://www.dmsguild.com/browse.php?filters=45470_0_0_0_0_0&page=1&sort=4a#browselist">See all</a>&nbsp;
			</div><script>
					$(document).ready(function() {
						$('.slider_switcher[elem_id="c90b779"]').on('click', 'a.switch_view_button', function(e) {
							e.preventDefault();

							var slider_id = $(this).parent().attr('elem_id');
							var view_type = $(this).attr('name');

							$(this).parent().find('img').each(function(){
								var src = $(this).attr('src');
								$(this).attr('src', src.replace('_on.png', '_off.png'));
							});
							var src = $(this).find('img').attr('src');
							$(this).find('img').attr('src', src.replace('_off.png', '_on.png'));

							if(typeof lazySliders !== 'undefined' && typeof lazySliders[slider_id] !== 'undefined'){
								lazySliders[slider_id].set_view_type(view_type);
								lazySliders[slider_id].update({item_from: 0});
							}
						}).find('a.switch_view_button[name="slider_view"]').find('img').each(function(){
							var src = $(this).attr('src');
							$(this).attr('src', src.replace('_off.png', '_on.png'));
						});
					});
				</script></div>
<table id="c90b779" class="infoBox strip_content" style="overflow:hidden;border:none;width:100%;border-spacing:0;" >
                    <tr>
                        <td>
                            <div class="owl-products-carousel owl-carousel" style="height: 200px;">
                                <div class="loader_spinner" style="margin-top: 10px; text-align: center" height="200px"><img width="150px" src="/shared_images/ajax-loader.gif"/></div>
                            </div>
                        </td>
                    </tr>
                </table><script>
				$(document).ready(function() {
					if(typeof lazySliders == 'undefined'){
						lazySliders = [];
					}
					$('#c90b779').appear(function(){
						var opts = {
							elem_id: 'c90b779',
							view_type: 'slider_view',
							api_url: '/api/products/list/newest_in_al',
							
						};
						lazySliders['c90b779'] = lazySliderBox(opts);
						lazySliders['c90b779'].update();
					});
				});
			</script>    </td>
</tr>
<tr>
    <td><img class="onestart" src="https://www.dmsguild.com/images/pixel_trans.gif" border="0" alt="" width="100%" height="10" ></td>
</tr>
<tr>
    <td>
		<div style="width: 100%;;min-height:18px;"  height="14" class="infoBoxHeading" width="100%">&nbsp;
			<div style="float: left">
				&nbsp;Newest D&D in Print
			</div>
			<div class="slider_switcher" style="float: right; line-height: 0px" elem_id="70c6b97"><a href="#" class="switch_view_button" style="outline:0;" name="slider_view">
					<img src="/shared_images/icon_slider_view_off.png"/>
				</a>
				<a href="#" class="switch_view_button" style="outline:0;" name="list_view">
					<img src="/shared_images/icon_list_view_off.png"/>
				</a>
				<a href="#" class="switch_view_button" style="outline:0;" name="grid_view">
					<img src="/shared_images/icon_grid_view_off.png"/>
				</a>&nbsp;
			</div><script>
					$(document).ready(function() {
						$('.slider_switcher[elem_id="70c6b97"]').on('click', 'a.switch_view_button', function(e) {
							e.preventDefault();

							var slider_id = $(this).parent().attr('elem_id');
							var view_type = $(this).attr('name');

							$(this).parent().find('img').each(function(){
								var src = $(this).attr('src');
								$(this).attr('src', src.replace('_on.png', '_off.png'));
							});
							var src = $(this).find('img').attr('src');
							$(this).find('img').attr('src', src.replace('_off.png', '_on.png'));

							if(typeof lazySliders !== 'undefined' && typeof lazySliders[slider_id] !== 'undefined'){
								lazySliders[slider_id].set_view_type(view_type);
								lazySliders[slider_id].update({item_from: 0});
							}
						}).find('a.switch_view_button[name="slider_view"]').find('img').each(function(){
							var src = $(this).attr('src');
							$(this).attr('src', src.replace('_off.png', '_on.png'));
						});
					});
				</script></div>
<table id="70c6b97" class="infoBox strip_content" style="overflow:hidden;border:none;width:100%;border-spacing:0;" >
                    <tr>
                        <td>
                            <div class="owl-products-carousel owl-carousel" style="height: 200px;">
                                <div class="loader_spinner" style="margin-top: 10px; text-align: center" height="200px"><img width="150px" src="/shared_images/ajax-loader.gif"/></div>
                            </div>
                        </td>
                    </tr>
                </table><script>
				$(document).ready(function() {
					if(typeof lazySliders == 'undefined'){
						lazySliders = [];
					}
					$('#70c6b97').appear(function(){
						var opts = {
							elem_id: '70c6b97',
							view_type: 'slider_view',
							api_url: '/api/products/list/newest_print/?',
							
						};
						lazySliders['70c6b97'] = lazySliderBox(opts);
						lazySliders['70c6b97'].update();
					});
				});
			</script>    </td>
</tr>
<tr>
    <td><img class="onestart" src="https://www.dmsguild.com/images/pixel_trans.gif" border="0" alt="" width="100%" height="10" ></td>
</tr>
<tr>
    <td>
		<div style="width: 100%;;min-height:18px;"  height="14" class="infoBoxHeading" width="100%">&nbsp;
			<div style="float: left">
				&nbsp;Hottest Classic Titles
			</div>
			<div class="slider_switcher" style="float: right; line-height: 0px" elem_id="47ca089"><a href="#" class="switch_view_button" style="outline:0;" name="slider_view">
					<img src="/shared_images/icon_slider_view_off.png"/>
				</a>
				<a href="#" class="switch_view_button" style="outline:0;" name="list_view">
					<img src="/shared_images/icon_list_view_off.png"/>
				</a>
				<a href="#" class="switch_view_button" style="outline:0;" name="grid_view">
					<img src="/shared_images/icon_grid_view_off.png"/>
				</a><a style="vertical-align: top; line-height: 19px; font-size: 11px" href="http://www.dmsguild.com/browse.php?filters=45471_0_0_0_0_0&page=1&sort=6a#browselist">See all</a>&nbsp;
			</div><script>
					$(document).ready(function() {
						$('.slider_switcher[elem_id="47ca089"]').on('click', 'a.switch_view_button', function(e) {
							e.preventDefault();

							var slider_id = $(this).parent().attr('elem_id');
							var view_type = $(this).attr('name');

							$(this).parent().find('img').each(function(){
								var src = $(this).attr('src');
								$(this).attr('src', src.replace('_on.png', '_off.png'));
							});
							var src = $(this).find('img').attr('src');
							$(this).find('img').attr('src', src.replace('_off.png', '_on.png'));

							if(typeof lazySliders !== 'undefined' && typeof lazySliders[slider_id] !== 'undefined'){
								lazySliders[slider_id].set_view_type(view_type);
								lazySliders[slider_id].update({item_from: 0});
							}
						}).find('a.switch_view_button[name="slider_view"]').find('img').each(function(){
							var src = $(this).attr('src');
							$(this).attr('src', src.replace('_off.png', '_on.png'));
						});
					});
				</script></div>
<table id="47ca089" class="infoBox strip_content" style="overflow:hidden;border:none;width:100%;border-spacing:0;" >
                    <tr>
                        <td>
                            <div class="owl-products-carousel owl-carousel" style="height: 200px;">
                                <div class="loader_spinner" style="margin-top: 10px; text-align: center" height="200px"><img width="150px" src="/shared_images/ajax-loader.gif"/></div>
                            </div>
                        </td>
                    </tr>
                </table><script>
				$(document).ready(function() {
					if(typeof lazySliders == 'undefined'){
						lazySliders = [];
					}
					$('#47ca089').appear(function(){
						var opts = {
							elem_id: '47ca089',
							view_type: 'slider_view',
							api_url: '/api/products/list/hottest_filtered?filters=45471',
							
						};
						lazySliders['47ca089'] = lazySliderBox(opts);
						lazySliders['47ca089'].update();
					});
				});
			</script>    </td>
</tr>
<tr>
    <td><img class="onestart" src="https://www.dmsguild.com/images/pixel_trans.gif" border="0" alt="" width="100%" height="10" ></td>
</tr>
<tr>
    <td>
		<div style="width: 100%;;min-height:18px;"  height="14" class="infoBoxHeading" width="100%">&nbsp;
			<div style="float: left">
				&nbsp;Recently Added Classic D&D Titles
			</div>
			<div class="slider_switcher" style="float: right; line-height: 0px" elem_id="29e5edc"><a href="#" class="switch_view_button" style="outline:0;" name="slider_view">
					<img src="/shared_images/icon_slider_view_off.png"/>
				</a>
				<a href="#" class="switch_view_button" style="outline:0;" name="list_view">
					<img src="/shared_images/icon_list_view_off.png"/>
				</a>
				<a href="#" class="switch_view_button" style="outline:0;" name="grid_view">
					<img src="/shared_images/icon_grid_view_off.png"/>
				</a><a style="vertical-align: top; line-height: 19px; font-size: 11px" href="http://www.dmsguild.com/browse.php?filters=45471_0_0_0_0_0&page=1&sort=4a#browselist">See all</a>&nbsp;
			</div><script>
					$(document).ready(function() {
						$('.slider_switcher[elem_id="29e5edc"]').on('click', 'a.switch_view_button', function(e) {
							e.preventDefault();

							var slider_id = $(this).parent().attr('elem_id');
							var view_type = $(this).attr('name');

							$(this).parent().find('img').each(function(){
								var src = $(this).attr('src');
								$(this).attr('src', src.replace('_on.png', '_off.png'));
							});
							var src = $(this).find('img').attr('src');
							$(this).find('img').attr('src', src.replace('_off.png', '_on.png'));

							if(typeof lazySliders !== 'undefined' && typeof lazySliders[slider_id] !== 'undefined'){
								lazySliders[slider_id].set_view_type(view_type);
								lazySliders[slider_id].update({item_from: 0});
							}
						}).find('a.switch_view_button[name="slider_view"]').find('img').each(function(){
							var src = $(this).attr('src');
							$(this).attr('src', src.replace('_off.png', '_on.png'));
						});
					});
				</script></div>
<table id="29e5edc" class="infoBox strip_content" style="overflow:hidden;border:none;width:100%;border-spacing:0;" >
                    <tr>
                        <td>
                            <div class="owl-products-carousel owl-carousel" style="height: 200px;">
                                <div class="loader_spinner" style="margin-top: 10px; text-align: center" height="200px"><img width="150px" src="/shared_images/ajax-loader.gif"/></div>
                            </div>
                        </td>
                    </tr>
                </table><script>
				$(document).ready(function() {
					if(typeof lazySliders == 'undefined'){
						lazySliders = [];
					}
					$('#29e5edc').appear(function(){
						var opts = {
							elem_id: '29e5edc',
							view_type: 'slider_view',
							api_url: '/api/products/list/newest_in_classics',
							
						};
						lazySliders['29e5edc'] = lazySliderBox(opts);
						lazySliders['29e5edc'].update();
					});
				});
			</script>    </td>
</tr>
<tr>
    <td><img class="onestart" src="https://www.dmsguild.com/images/pixel_trans.gif" border="0" alt="" width="100%" height="10" ></td>
</tr>
<tr>
    <td valign="top">
        <div style="width: 100%;;min-height:18px;"  height="14" class="infoBoxHeading" width="100%">&nbsp;
			<div style="float: left">
				&nbsp;Newest Dungeons & Dragons
			</div>
			<div class="slider_switcher" style="float: right; line-height: 0px" elem_id="ef7d234"><a href="#" class="switch_view_button" style="outline:0;" name="slider_view">
					<img src="/shared_images/icon_slider_view_off.png"/>
				</a>
				<a href="#" class="switch_view_button" style="outline:0;" name="list_view">
					<img src="/shared_images/icon_list_view_off.png"/>
				</a>
				<a href="#" class="switch_view_button" style="outline:0;" name="grid_view">
					<img src="/shared_images/icon_grid_view_off.png"/>
				</a><a style="vertical-align: top; line-height: 19px; font-size: 11px" href="http://www.dmsguild.com/browse/pub/44/Wizards-of-the-Coast?filters=0_0_0_0_45462_0&page=1&sort=4a#browselist">See all</a>&nbsp;
			</div><script>
					$(document).ready(function() {
						$('.slider_switcher[elem_id="ef7d234"]').on('click', 'a.switch_view_button', function(e) {
							e.preventDefault();

							var slider_id = $(this).parent().attr('elem_id');
							var view_type = $(this).attr('name');

							$(this).parent().find('img').each(function(){
								var src = $(this).attr('src');
								$(this).attr('src', src.replace('_on.png', '_off.png'));
							});
							var src = $(this).find('img').attr('src');
							$(this).find('img').attr('src', src.replace('_off.png', '_on.png'));

							if(typeof lazySliders !== 'undefined' && typeof lazySliders[slider_id] !== 'undefined'){
								lazySliders[slider_id].set_view_type(view_type);
								lazySliders[slider_id].update({item_from: 0});
							}
						}).find('a.switch_view_button[name="slider_view"]').find('img').each(function(){
							var src = $(this).attr('src');
							$(this).attr('src', src.replace('_off.png', '_on.png'));
						});
					});
				</script></div>
<table id="ef7d234" class="infoBox strip_content" style="overflow:hidden;border:none;width:100%;border-spacing:0;" >
                    <tr>
                        <td>
                            <div class="owl-products-carousel owl-carousel" style="height: 200px;">
                                <div class="loader_spinner" style="margin-top: 10px; text-align: center" height="200px"><img width="150px" src="/shared_images/ajax-loader.gif"/></div>
                            </div>
                        </td>
                    </tr>
                </table><script>
				$(document).ready(function() {
					if(typeof lazySliders == 'undefined'){
						lazySliders = [];
					}
					$('#ef7d234').appear(function(){
						var opts = {
							elem_id: 'ef7d234',
							view_type: 'slider_view',
							api_url: '/api/products/list/newest_in_5e',
							
						};
						lazySliders['ef7d234'] = lazySliderBox(opts);
						lazySliders['ef7d234'].update();
					});
				});
			</script>    </td>
</tr>
<tr>
    <td><img class="onestart" src="https://www.dmsguild.com/images/pixel_trans.gif" border="0" alt="" width="100%" height="10" ></td>
</tr>
<tr>
    <td>
		<div style="width: 100%;;min-height:18px;"  height="14" class="infoBoxHeading" width="100%">&nbsp;
			<div style="float: left">
				&nbsp;Newest D&D Comics
			</div>
			<div class="slider_switcher" style="float: right; line-height: 0px" elem_id="117da7b"><a href="#" class="switch_view_button" style="outline:0;" name="slider_view">
					<img src="/shared_images/icon_slider_view_off.png"/>
				</a>
				<a href="#" class="switch_view_button" style="outline:0;" name="list_view">
					<img src="/shared_images/icon_list_view_off.png"/>
				</a>
				<a href="#" class="switch_view_button" style="outline:0;" name="grid_view">
					<img src="/shared_images/icon_grid_view_off.png"/>
				</a><a style="vertical-align: top; line-height: 19px; font-size: 11px" href="http://www.dmsguild.com/browse.php?filters=0_0_45411_0_0_0&page=1&sort=4a#browselist">See all</a>&nbsp;
			</div><script>
					$(document).ready(function() {
						$('.slider_switcher[elem_id="117da7b"]').on('click', 'a.switch_view_button', function(e) {
							e.preventDefault();

							var slider_id = $(this).parent().attr('elem_id');
							var view_type = $(this).attr('name');

							$(this).parent().find('img').each(function(){
								var src = $(this).attr('src');
								$(this).attr('src', src.replace('_on.png', '_off.png'));
							});
							var src = $(this).find('img').attr('src');
							$(this).find('img').attr('src', src.replace('_off.png', '_on.png'));

							if(typeof lazySliders !== 'undefined' && typeof lazySliders[slider_id] !== 'undefined'){
								lazySliders[slider_id].set_view_type(view_type);
								lazySliders[slider_id].update({item_from: 0});
							}
						}).find('a.switch_view_button[name="slider_view"]').find('img').each(function(){
							var src = $(this).attr('src');
							$(this).attr('src', src.replace('_off.png', '_on.png'));
						});
					});
				</script></div>
<table id="117da7b" class="infoBox strip_content" style="overflow:hidden;border:none;width:100%;border-spacing:0;" >
                    <tr>
                        <td>
                            <div class="owl-products-carousel owl-carousel" style="height: 200px;">
                                <div class="loader_spinner" style="margin-top: 10px; text-align: center" height="200px"><img width="150px" src="/shared_images/ajax-loader.gif"/></div>
                            </div>
                        </td>
                    </tr>
                </table><script>
				$(document).ready(function() {
					if(typeof lazySliders == 'undefined'){
						lazySliders = [];
					}
					$('#117da7b').appear(function(){
						var opts = {
							elem_id: '117da7b',
							view_type: 'slider_view',
							api_url: '/api/products/list/newest_in_dmg_comics',
							
						};
						lazySliders['117da7b'] = lazySliderBox(opts);
						lazySliders['117da7b'].update();
					});
				});
			</script>    </td>
</tr>
<tr>
    <td><img class="onestart" src="https://www.dmsguild.com/images/pixel_trans.gif" border="0" alt="" width="100%" height="10" ></td>
</tr>

<!-- José L Alías - 2016-08-29 - TEST A/B Implementation for recommendations.-->
                                                <!-- theme_main_eof -->
                                        <tr>
                                            <td height="10"><img class="onestart" src="https://www.dmsguild.com/images/pixel_trans.gif" border="0" alt="" width="100%" height="10" ></td>
                                        </tr>

                                        
                                        <!-- 2014-01-20 Chuck Childers: Move "New Products" link to new_products_frontpage_rpgnow.com. -->
                                                                                    <tr>
                                                <td><img class="onestart" src="https://www.dmsguild.com/images/pixel_trans.gif" border="0" alt="" width="100%" height="10" ></td>
                                            </tr>
                                                                                <!-- body_text_eof -->

                                </table>
                            </td>
                        </tr>
                    </table>
                </td>

                
            </tr>

            <tr>               
                <td colspan="2">
                    <!-- body_eof -->
                    <!-- banner -->
                    <!-- banners //-->
<!-- banners_eof //-->
                </td>
            </tr>
        </table>
        <!-- banner_eof -->
        <!-- footer -->
        <div class="grid" id="footer">
    <div class="grid_6 alpha linkswrapper">
        <div class="grid_3 alpha">
            <div class="widget-links-title">
                Need help?            </div>
            <div class="widget-links-link">
				<a href="http://support.dmsguild.com/hc/en-us" target="_blank">Customer Questions (FAQ)</a>            </div>
            <div class="widget-links-link">
				<a href="http://support.dmsguild.com/hc/en-us/categories/202531048-DMs-Guild-General-Information" 
	target="_blank">DMsGuild Creator Questions?</a>            </div>
            <div>
				 <div id='contact_us_button' class="cart-buttons" Array> <a href='contact_us.php'> <span class="site-button rounded-corners-button "> <span class="rounded-corners-button-text" style="white-space:nowrap;">Contact us</span> </span> </a> </div><br /><br /><br />			</div>
	        </div>
        <div class="grid_4">
            <div class="widget-links-title">
                Account            </div>
            <div class="widget-links-link">
				<a href="https://www.dmsguild.com/login.php" class="login_window">Login/Create Account</a>
            </div>
            <div class="widget-links-link">
				<a href="http://www.dmsguild.com/account.php" class="login_window" onclick="setRedirect('account.php');">Account</a>
            </div>
            <div class="widget-links-link">
                <a href="http://www.dmsguild.com/my_library.php" class="login_window" onclick="setRedirect('my_library.php');">My Library</a>
            </div>
            <div class="widget-links-link">
				<a href="http://www.dmsguild.com/affiliate_faq.php" class="login_window" onclick="setRedirect('affiliate_faq.php');">Affiliate System</a>
            </div>
			            <div class="widget-links-link">
                            </div>
			        </div>
        <div class="grid_4 omega links-information">
            <div class="widget-links-title">
                Information            </div>
			<div class="widget-links-link">
						<a href="http://www.dmsguild.com/about.php">About Us</a>
					  </div>            <div class="widget-links-link">
                <a href="http://www.dmsguild.com/privacy.php">Privacy Policy</a>            </div>
            <div class="widget-links-link">
                <a href="http://www.dmsguild.com/newsletter_current.php">Our Latest Newsletter</a>            </div>
                        <div class="widget-links-link">
                <a href="http://www.dmsguild.com/reviews.php">Product Reviews</a>            </div>
            <div class="widget-links-link">
                <a href="http://www.dmsguild.com/rss.php">New Product RSS Feed</a>            </div>
            <div class="widget-links-link">
                <a href="http://www.dmsguild.com/newsletter_rss_feed.php">Newsletter RSS Feed</a>            </div>
        </div>
        	</div>
	<div class="grid_4 widget-currency omega">
					<div class="widget-currency-language">
				<select name="language" id="language" class="widget-currency-language-dropdown" onchange="navigateTo(this)">
												<option value="fr"  class="widget-currency-dropdown-option">Français</option>
													<option value="pt"  class="widget-currency-dropdown-option">Portuguese</option>
													<option value="en" selected="selected" class="widget-currency-dropdown-option">English</option>
													<option value="de"  class="widget-currency-dropdown-option">Deutsch</option>
													<option value="es"  class="widget-currency-dropdown-option">Español</option>
										</select>
			</div>
					<div class="widget-currency-currency" >
			<form name="currencies" action="index.php" method="get">
				<input type='hidden' name='site' value='' /><input type='hidden' name='test_epoch' value='0' />				<select name="currency" id="currency" class="widget-currency-currency-dropdown" onchange="this.form.submit();">
											<option value="USD" selected="selected" class="widget-currency-dropdown-option">US &#36;</option>
												<option value="EUR"  class="widget-currency-dropdown-option">&#8364;</option>
												<option value="CAD"  class="widget-currency-dropdown-option">Can&#36;</option>
												<option value="GBP"  class="widget-currency-dropdown-option">&#163;</option>
												<option value="JPY"  class="widget-currency-dropdown-option">&#165;</option>
												<option value="AUD"  class="widget-currency-dropdown-option">Au&#36;</option>
												<option value="NZD"  class="widget-currency-dropdown-option">NZ&#36;</option>
												<option value="SEK"  class="widget-currency-dropdown-option">SEK (kr)</option>
										</select>
							</form>
		</div>
		<script>
$(document).ready(function() {
    console.log("doc ready");

    $("div#footer").find("#suggestionFrame").addClass('footer_suggestionFrame');
    $("div#footer").find("#suggestionBox").addClass('footer_suggestionBox');

    $('#submit.suggestion-button').on('click', function() {
        console.log('suggestion submit clicked');
        console.log($(this).attr('name'));

        var suggestion_form = $(this).parent();
        var suggestion_box = $(suggestion_form).find('#suggestionBox');
        var suggestion_contact = $(suggestion_form).find('#contactme');
        var suggestion_email = $(suggestion_form).find('#email');
        var suggestion_origin = $(suggestion_form).find('#origin_href');
        var suggestion_frame = $(suggestion_form).parent();

        console.log($(suggestion_email).attr('name'));

        var error = get_suggestion_form_error(suggestion_box);

        if (error != '') {
            alert(error);
            return;
        }

        if (check_suggestion_form(suggestion_box)) {
            console.log('check_form passed');
            $.ajax(
                {
                    datatype: "json",
                    url: "/includes/ajax/suggestion_box_ajax.php",
                    method: "POST",
                    data: {
                        contactme: $(suggestion_contact).is(':checked'),
                        email: $(suggestion_email).val(),
                        suggestion: $(suggestion_box).val(),
                        origin_href: $(suggestion_origin).val()
                    }
                }
            ).done(function(data) {
                console.log(data);
                var result = jQuery.parseJSON(data);
                if (result.email_result) {
                    $(suggestion_frame).html(result.newform);
                }
            }).fail(function(xhr) {
                fail_callback(xhr);
                console.log(xhr.responseText);
            });
            console.log('xajax call finished');
        }
        console.log('click function finished');
    });

    $('#suggestionBox').on('focus', function() {
        if (this.style.color=='grey') {
            $('#extraInfo').slideDown('fast');
            this.style.color = 'black';
            this.value = '';
            this.rows=3;
        }
    });
    $('#suggestionBox').on('blur', function() {
        if (this.value == '') {
            this.style.color = 'grey';
            this.value = 'How Can We Improve?';
            $('#extraInfo').slideUp('fast');
            this.rows=1;
        }
    });
});

function sz(t) {
    // makes a textarea box expand as you add text.
    a = t.value.split('\n');
    b=0;
    for (x=0;x < a.length; x++) {
        if (a[x].length >= t.cols) b+= Math.floor(a[x].length/t.cols);
    }
    b+= a.length;
    if (b > t.rows) t.rows = b;
}

<!-- Original:  Ronnie T. Moore -->
<!-- Web Site:  The JavaScript Source -->

<!-- Dynamic 'fix' by: Nannette Thacker -->
<!-- Web Site: http://www.shiningstar.net -->

    <!-- This script and many more are available free online at -->
    <!-- The JavaScript Source!! http://javascript.internet.com -->

<!-- Begin
function textCounter(field, countfield, maxlimit) {
    if (field.value.length > maxlimit) // if too long...trim it!
        field.value = field.value.substring(0, maxlimit);
    // otherwise, update 'characters left' counter
    else
        countfield.value = maxlimit - field.value.length;
}

function showRecaptcha(element) {
    Recaptcha.create('6Le17goAAAAAAOC01JUReIPm-3XqGxeSGa6J5zQH', element, {
        theme: "yellow",
        callback: Recaptcha.focus_response_field});
}

// Added by MT
// Returns error message(s) for suggestion form, or a blank string if form is ok and ready to submit
function get_suggestion_form_error(text_box) {

    console.log('called get_suggestion_form_error for '+$(text_box).attr('name'));
    if ($(text_box).length) {
        console.log('found');
    } else {
        console.log('not found');
        return 'JavaScript Error: No suggestion box found';
    }

    console.log('checking length/content of suggestion');
    if ($(text_box).val().length == 0 || $(text_box).val() == 'How Can We Improve?') {
        console.log('no suggestion entered');
        return 'Please enter a suggestion before clicking Submit.';
    } else {
        console.log('suggestion entered');
    }

    console.log('checking email address');
    if (suggest_email_ok()) {
        console.log('email ok');
    } else {
        console.log('email NOT ok');
        return 'Please enter an email address if you want us to contact you.';
    }

    // Passed all checks
    return '';

}

// Added by MT
// Makes sure user has entered something before allowing them to continue.
function check_suggestion_form(text_box) {

    if (get_suggestion_form_error(text_box) == '') {
        return true;
    } else {
        return false;
    }

}
</script>
		<div id="suggestionFrame" class="alpha omega suggestion-box">
			
					<form action="" method="post" enctype="application/x-www-form-urlencoded" name="suggestionForm" id="suggestionForm">
						<a name="suggestionBox" style="height: 1px; width: 1px; display: none">.</a>
						<textarea cols="40" wrap="physical"
								  style="width: 210px; font-size:10px; overflow:hidden; color: grey;"
								  rows="1"
								  name="suggestionBox"
								  id="suggestionBox"
								  onKeyUp="sz(this)"
								  onfocus="if (this.value=='') { $('#extraInfo').slideToggle('slow'); this.rows=3; }"
								  onblur="if (this.value == '') { $('#extraInfo').slideToggle('slow'); this.rows=1; }"
								  placeholder="How Can We Improve?"
						></textarea>
				<div id="extraInfo" name="extraInfo" style="display:none;"><div class='smallText' style='font-size: 10px'>Email: <input type=text placeholder='(optional)' name='email' id='email'></div><div class='smallText' style='font-size: 10px; width: 200px; padding-top: 2px; padding-bottom: 2px;'>Can we respond to you about this?
												<input style='display: inline; width: 15px; height: 15px;' type=checkbox name='contactme' id='contactme' 
													onclick='show_contact_note_if_necessary()'>
											 </div>
										 </div><div class="suggestion-button" id="submit" ><span>Submit Suggestion</span></div><input type=hidden name='origin_href' value='https%3A%2F%2Fwww.dmsguild.com%2F'></form>
					<script>
						function show_contact_note_if_necessary() {
							if (suggest_email_ok()) {
								$('#email').attr("placeholder", "(optional)");
							} else {
								$('#email').attr("placeholder", "REQUIRED");
							}
						}

						function suggest_email_ok() {
							if ($('#email')) {
								if ($('#contactme').prop('checked') && $('#email').val() == '') {
									return false;
								} else {
									return true;
								}
							}
						}
					</script>
							</div>
	</div>
	<div style="text-align: center; padding-bottom: 8px;" class="grid_12 alpha omega">
		<img src="/shared_images/pmt_methods.png" />
	</div>
</div>
<div class="clear"></div>
<script type="text/javascript">
function destroyMobileVersionBanner () {
    var elem = document.getElementById('classic_version');
    elem.parentNode.removeChild(elem);
    
    document.getElementById('footer').classList.remove('banner');
    document.cookie = 'close_mobile_display=1;path=/';
}

function switchToMobileVersion(e) {
    e.preventDefault();
    document.cookie = 'mobile_display=1;path=/';
    
    var language = '&language=en';
    var url = '/' + language;
    
    var queryStringFragments = document.URL.split('/');
    
    if (queryStringFragments.indexOf('pub') != -1) {
        var publisherId = queryStringFragments[queryStringFragments.length - 2];
        
        url = '/m/browser/publisher/' + publisherId;
    }

    window.location.replace(url);
}

function navigateTo(sel) {
    var language = sel.options[sel.selectedIndex].value;
    
    window.location.href = 'index.php?site=&test_epoch=0&language='+ language;
    
}
addLoadEvent(function() {
    
    //$('#language').wrap('<form id="languages" name="languages" method="get" action="" />');
    
    //language and currency arrow activation
    try {
        $("#language").msDropDown();
        $("#currency").msDropDown({'visibleRows':8});
    } catch(e) {
        alert(e.message);
    }
});

addLoadEvent(function() {});
</script>
    <script type="text/javascript">
        // Because the date fields are initially hidden,
        // the picker can't be constructed until they are showing.
        // Therefore, the picker is attached to the onfocus event.
        function sdate_from_picker() {
            try {
                AnyTime.picker( "sdate_from", { format: "%Y-%m-%d"} );
            } catch (error) {
                // do nothing
            }
        }

        function sdate_to_picker() {
            try {
                AnyTime.picker( "sdate_to", { format: "%Y-%m-%d"} );
            } catch (error) {
                // do nothing
            }
        }

        // Because the time fields are initially hidden,
        // the picker can't be constructed until they are showing.
        // Therefore, the picker is attached to the onfocus event.
        function stime_from_picker() {
            try {
                // for ease of use, using whole hours in search
                AnyTime.picker( "stime_from", { format: "%l:00 %p"} );
            } catch (error) {
                // do nothing
            }
        }

        function stime_to_picker() {
            try {
                // for ease of use, using whole hours in search
                AnyTime.picker( "stime_to", { format: "%l:00 %p"} );
            } catch (error) {
                // do nothing
            }
        }

        function toggle_live_fields() {
            var has_is_live = document.getElementById('is_live');

            if (has_is_live) {
                var state = document.getElementById('is_live').checked;
                if (state) {
                    $('#live_products_section').slideDown('slow');
                } else {
                    $('#live_products_section').slideUp('slow');
                }
            }
        }

        function check_search_form() {
            var error_message = 'Please correct the following:\n\n';
            var error_found = false;
            var error_field;
            var keywords = document.sbf.keywords.value;
            var has_is_live = document.getElementById('is_live');

            var pfrom = document.sbf.pfrom.value;
            var pto = document.sbf.pto.value;
            var author = document.sbf.author.value;
            var pfrom_float;
            var pto_float;

            if (keywords == 'Search') {
                document.sbf.keywords.value = '';
            }
            if (keywords == 'Search within results... ') {
                document.sbf.keywords.value = '';
            }

            if ((keywords == '' || keywords.length < 1)
                && (pfrom == '' || pfrom.length < 1)
                && (pto == '' || pto.length < 1)
                && (author == '' || author.length < 1)
                && (!has_is_live)) {

                error_message = error_message + '* At least one of the fields in the search form must be entered.\n';
                error_field = document.sbf.keywords;
                error_found = true;
            }

            if (pfrom.length > 0) {
                pfrom_float = parseFloat(pfrom);

                if (isNaN(pfrom_float)) {
                    error_message = error_message + '* Price "from" must be a number.\n';
                    error_field = document.sbf.pfrom;
                    error_found = true;
                }
            } else {
                pfrom_float = 0;
            }

            if (pto.length > 0) {
                pto_float = parseFloat(pto);

                if (isNaN(pto_float)) {
                    error_message = error_message + '* Price "to" must be a number.\n';
                    error_field = document.sbf.pto;
                    error_found = true;
                }
            } else {
                pto_float = 0;
            }

            if (pfrom.length > 0 && pto.length > 0
                && !isNaN(pfrom_float)
                && !isNaN(pto_float)
                && pto_float < pfrom_float) {

                error_message = error_message + '* Price "to" must be greater than or equal to price "from".\n';
                error_field = document.sbf.pto;
                error_found = true;
            }

            if (error_found == true) {
                alert(error_message);
                error_field.focus();
                return false;
            } else {
                return true;
            }
        }

        function focus_on_search_bar() {
            var search_bar_input = document.getElementById('search_bar');
            if (search_bar_input) {
                var value_filter = (search_bar_input.value != '' && search_bar_input.value != ' ');

                if (search_bar_input && search_bar_input.value != 'Search' && search_bar_input.value != 'Search within results... ' && value_filter) {
                    search_bar_input.value = search_bar_input.value + ' ';
                    search_bar_input.focus();
                }
            }
        }

        var autocomplete;

        function onfocus_name() {
            var search = $('#search_bar');

            if (search.attr('value') == 'Search') {
                search.css('color','black');
                search.attr('value','');
            }

            if (search.attr('value') == 'Search within results... ') {
                search.css('color','black');
                search.attr('value','');
            }

            var cache = {},lastXhr;
            var options = {
                source: function(request, response) {
                    var term = request.term;
                    if ( term in cache ) {
                        response( cache[ term ] );
                        return;
                    }
                    $.ajax({
                        url: "includes/ajax/search_autocomplete_jquery.php",
                        dataType: "json",
                        data: {
                            term : request.term,
                            filters : (($('#search_filter')) ? $('#search_filter').val() : ''),
                            manufacturers_id : (($('#search_manufacturer')) ? $('#search_manufacturer').val() : ''),
                            cPath : (($('#search_cPath')) ? $('#search_cPath').val() : '')
                        },
                        success: function(data) {
                            cache[ term ] = data;
                            response(data);
                        }
                    });
                },
                delay: 400,
                minLength: 3,
                html: 'html',
                select: function(event,ui) {

                    $('#search_bar').val(ui.item.name);
                    location.replace(ui.item.link);

                    return false;
                }
            };

            autocomplete = $('#search_bar').autocomplete(options);

            return true;
        }
        toggle_live_fields();//start the fields off toggled
        focus_on_search_bar();//move focus to the search bar

        $('.search_parameter').each(function() {
            $( this ).on('click',function() {
                var lnk = $( this ).children().children().attr('href');
                if (lnk) location.href = lnk;
            })
        });

        if (0) {
            // TODO: bblackmoor 2012-06-13: design a min-search form specifically for live products
            //$('#search_bar_advanced_controls').slideDown();
        }
    </script>
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-37854911-1']);
		_gaq.push(['_trackPageview']);
		(function () {
			var ga = document.createElement('script');
			ga.type = 'text/javascript';
			ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0];
			s.parentNode.insertBefore(ga, s);
		})();
	</script>
        <!-- footer_eof -->
        <br />
    </body>
</html>