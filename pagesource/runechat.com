<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--><html class="no-js"> <!--<![endif]-->
<head>
  <base href="/"/>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Runechat: the Trusted Runescape Gambling Community</title>
  <meta name="description" content="Runechat is a place where you can bet against other players using RS gold pieces. We have a variety of games and a vibrant community!">
  <meta name="viewport" content="width=1024, initial-scale=0.5">

  <link rel="stylesheet" href="/theme/css/css.php?v=1486406438">
  <script src="/js/js.php?v=1459991177"></script>
  
  <style>
    #titlebar {
      background-image: url(/theme/img/headers/runechat-bg-month-11.jpg?v=1);
    }
  </style>
  
  </head>
    <body>

      <!--[if lt IE 7]>
          <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
      <![endif]-->
      
      <div style="background:black;border-bottom: 1px solid rgba(200,200,200,0.25);"><div id="user-menu"><a href="/help/index" style="">
        Interested in Mod? Need help?</a><a href="/wallet/deposit" style="">
        <i class="fa fa-download"></i> Deposit </a><a href="/wallet/withdraw" style="">
        <i class="fa fa-upload"></i> Withdraw </a><a href="/wallet/index" style="">
         </a><a href="/account/index" style="">
        <i class="fa fa-user"></i> Account</a></div></div>
      <div style="background:rgba(0,0,0,0.5);border-bottom: 1px solid rgba(200,200,200,0.25);">
      <nav>
      <a href="/" style="flex: 2;"><div class="image">
              <img src="/theme/img/logo/runechat-logo-2.png"/>
            </div></a><a href="/play/new" style="background-image:url(/theme/img/nav/dice.png);background-size:cover;"><span class="info">play</span>
            <span style="color:#fff; font-size:150%;margin-top:-4px;">Dice</span></a><a href="/play/cards" style="background-image:url(/theme/img/nav/cards.png);background-size:cover;"><span class="info">play</span>
            <span style="color:#fff; font-size:150%;margin-top:-4px;">Tables</span></a><a href="/bet/index" style="background-image:url(/theme/img/nav/sports.png);background-size:cover;"><span class="info">bet on</span>
            <span style="color:#fff; font-size:150%;margin-top:-4px;">Sports</span></a><span style="flex: 2;"></span>      </nav>
      </div>
      <div id="wrapper">      <div id="titlebar">  
<div class="marquee">  
  <p>Biggest win today: 3800M  	&diams;  
  16295 games played  	&diams;  
  608.67B total winnings</p>  
  <p>Welcome to Runechat!</p>
</div> 
</div>      <div id="content">
            <div class="columns inset">
<div>
  
  <div id="gameoverview">
    
    <table class="bet-table">
        <thead>
        <tr><th colspan="10" style="text-align: center; color: #ed7;">Games Ready to Join</th></tr>      <tr>
          <th width="3%"> </th>
          <th width="3%">Game</th>
          <th width="5%">Bet</th>
          <th width="5%">Win</th>
          <th width="5%">Players</th>
          <th width="*">Participants</th>
        </tr></thead>
        <tbody><tr onclick="document.location.href='/play/baccarat/table';">
    <td style="text-align: center;color:black;">
      <a href="/play/baccarat/table" onclick="event.stopPropagation();">
        <i class="fa fa-flash" style="color:black;"></i></a>
    </td>
    <td style="color:black;">
      Baccarat    </td>
    <td style="text-align: right;color:black;">
      0    </td>
    <td style="text-align: right;color:black;">
          </td>
    <td style="text-align: center;color:black;">
      0/5    </td>
    <td style="color:black;">
          </td>
  </tr><tr onclick="document.location.href='/play/bj2';">
    <td style="text-align: center;color:black;">
      <a href="/play/bj2" onclick="event.stopPropagation();">
        <i class="fa fa-flash" style="color:black;"></i></a>
    </td>
    <td style="color:black;">
      BJ    </td>
    <td style="text-align: right;color:black;">
      0    </td>
    <td style="text-align: right;color:black;">
          </td>
    <td style="text-align: center;color:black;">
      0/5    </td>
    <td style="color:black;">
          </td>
  </tr><tr onclick="document.location.href='/play/war/table';">
    <td style="text-align: center;color:black;">
      <a href="/play/war/table" onclick="event.stopPropagation();">
        <i class="fa fa-flash" style="color:black;"></i></a>
    </td>
    <td style="color:black;">
      War    </td>
    <td style="text-align: right;color:black;">
      0    </td>
    <td style="text-align: right;color:black;">
          </td>
    <td style="text-align: center;color:black;">
      0/5    </td>
    <td style="color:black;">
          </td>
  </tr><tr onclick="document.location.href='/play/roulette/table';">
    <td style="text-align: center;color:black;">
      <a href="/play/roulette/table" onclick="event.stopPropagation();">
        <i class="fa fa-flash" style="color:black;"></i></a>
    </td>
    <td style="color:black;">
      Roulette    </td>
    <td style="text-align: right;color:black;">
      0    </td>
    <td style="text-align: right;color:black;">
          </td>
    <td style="text-align: center;color:black;">
      0/-    </td>
    <td style="color:black;">
          </td>
  </tr><tr onclick="document.location.href='/play/view?id=12869526';">
    <td style="text-align: center;color:black;">
      <a href="/play/view?id=12869526" onclick="event.stopPropagation();">
        <i class="fa fa-flash" style="color:black;"></i></a>
    </td>
    <td style="color:black;">
      Raffle    </td>
    <td style="text-align: right;color:black;">
      100k    </td>
    <td style="text-align: right;color:black;">
      95M    </td>
    <td style="text-align: center;color:black;">
      202/1000    </td>
    <td style="color:black;">
      <span class="width-limited">Jizz</span>, <span class="width-limited">Iove</span>, <span class="width-limited">SadMorty</span>, <span class="width-limited">Ziva</span>, <span class="width-limited">tapout</span>, <span class="width-limited">ll</span>, <span class="width-limited">AlphaAddy</span>, ...    </td>
  </tr><tr onclick="document.location.href='/play/view?id=12869979';">
    <td style="text-align: center;color:black;">
      <a href="/play/view?id=12869979" onclick="event.stopPropagation();">
        <i class="fa fa-flash" style="color:black;"></i></a>
    </td>
    <td style="color:black;">
      PTD    </td>
    <td style="text-align: right;color:black;">
      1425M    </td>
    <td style="text-align: right;color:black;">
      2707M    </td>
    <td style="text-align: center;color:black;">
      1/2    </td>
    <td style="color:black;">
      <span class="width-limited">GoldmanSachs</span>    </td>
  </tr><tr onclick="document.location.href='/play/view?id=12870130';">
    <td style="text-align: center;color:black;">
      <a href="/play/view?id=12870130" onclick="event.stopPropagation();">
        <i class="fa fa-flash" style="color:black;"></i></a>
    </td>
    <td style="color:black;">
      PTD    </td>
    <td style="text-align: right;color:black;">
      250k    </td>
    <td style="text-align: right;color:black;">
      475k    </td>
    <td style="text-align: center;color:black;">
      1/2    </td>
    <td style="color:black;">
      <span class="width-limited">Watabuffalo</span>    </td>
  </tr><tr onclick="document.location.href='/play/view?id=12869973';">
    <td style="text-align: center;color:black;">
      <a href="/play/view?id=12869973" onclick="event.stopPropagation();">
        <i class="fa fa-flash" style="color:black;"></i></a>
    </td>
    <td style="color:black;">
      PTD    </td>
    <td style="text-align: right;color:black;">
      1425M    </td>
    <td style="text-align: right;color:black;">
      2707M    </td>
    <td style="text-align: center;color:black;">
      1/2    </td>
    <td style="color:black;">
      <span class="width-limited">GoldmanSachs</span>    </td>
  </tr><tr onclick="document.location.href='/play/view?id=12870143';">
    <td style="text-align: center;color:black;">
      <a href="/play/view?id=12870143" onclick="event.stopPropagation();">
        <i class="fa fa-flash" style="color:black;"></i></a>
    </td>
    <td style="color:black;">
      Flowers    </td>
    <td style="text-align: right;color:black;">
      0    </td>
    <td style="text-align: right;color:black;">
          </td>
    <td style="text-align: center;color:black;">
      0/1    </td>
    <td style="color:black;">
          </td>
  </tr><tr onclick="document.location.href='/play/view?id=12870136';">
    <td style="text-align: center;color:green;">
      <a href="/play/view?id=12870136" onclick="event.stopPropagation();">
        <i class="fa fa-check-square-o" style="color:green;"></i></a>
    </td>
    <td style="color:green;">
      Flowers    </td>
    <td style="text-align: right;color:green;">
      90k    </td>
    <td style="text-align: right;color:green;">
      <div style="
            margin: -4px;
            margin-top: -8px;
            padding: 6px;
            background-image: url(/theme/img/frosty/frosty-purple-200.png);
            text-align: center; color: rgba(255,255,255,0.75) !important;
            background-repeat: no-repeat;
            background-position: 0 8px;
            background-size: 100% 18px;">60k</div>    </td>
    <td style="text-align: center;color:green;">
      5/5    </td>
    <td style="color:green;">
      <b class="width-limited">IMMAREKYOAZ</b>    </td>
  </tr><tr onclick="document.location.href='/play/view?id=12870134';">
    <td style="text-align: center;color:green;">
      <a href="/play/view?id=12870134" onclick="event.stopPropagation();">
        <i class="fa fa-check-square-o" style="color:green;"></i></a>
    </td>
    <td style="color:green;">
      Roulette    </td>
    <td style="text-align: right;color:green;">
      7500k    </td>
    <td style="text-align: right;color:green;">
          </td>
    <td style="text-align: center;color:green;">
      1/1    </td>
    <td style="color:green;">
      <span class="width-limited">kwpker4life</span>    </td>
  </tr><tr onclick="document.location.href='/play/view?id=12870139';">
    <td style="text-align: center;color:green;">
      <a href="/play/view?id=12870139" onclick="event.stopPropagation();">
        <i class="fa fa-check-square-o" style="color:green;"></i></a>
    </td>
    <td style="color:green;">
      PTD    </td>
    <td style="text-align: right;color:green;">
      325M    </td>
    <td style="text-align: right;color:green;">
      406M    </td>
    <td style="text-align: center;color:green;">
      2/2    </td>
    <td style="color:green;">
      <b class="width-limited">GoldmanSachs</b>, <span class="width-limited">Jizz</span>    </td>
  </tr><tr onclick="document.location.href='/play/view?id=12870132';">
    <td style="text-align: center;color:green;">
      <a href="/play/view?id=12870132" onclick="event.stopPropagation();">
        <i class="fa fa-check-square-o" style="color:green;"></i></a>
    </td>
    <td style="color:green;">
      PTD    </td>
    <td style="text-align: right;color:green;">
      250k    </td>
    <td style="text-align: right;color:green;">
      296k    </td>
    <td style="text-align: center;color:green;">
      2/2    </td>
    <td style="color:green;">
      <span class="width-limited">Watabuffalo</span>, <b class="width-limited">GoldmanSachs</b>    </td>
  </tr><tr onclick="document.location.href='/play/view?id=12870140';">
    <td style="text-align: center;color:green;">
      <a href="/play/view?id=12870140" onclick="event.stopPropagation();">
        <i class="fa fa-check-square-o" style="color:green;"></i></a>
    </td>
    <td style="color:green;">
      BJ    </td>
    <td style="text-align: right;color:green;">
      27M    </td>
    <td style="text-align: right;color:green;">
          </td>
    <td style="text-align: center;color:green;">
      1/1    </td>
    <td style="color:green;">
      <span class="width-limited">Jizz</span>    </td>
  </tr><tr onclick="document.location.href='/play/view?id=12870128';">
    <td style="text-align: center;color:green;">
      <a href="/play/view?id=12870128" onclick="event.stopPropagation();">
        <i class="fa fa-check-square-o" style="color:green;"></i></a>
    </td>
    <td style="color:green;">
      PTD    </td>
    <td style="text-align: right;color:green;">
      250k    </td>
    <td style="text-align: right;color:green;">
      305k    </td>
    <td style="text-align: center;color:green;">
      2/2    </td>
    <td style="color:green;">
      <b class="width-limited">Watabuffalo</b>, <span class="width-limited">GoldmanSachs</span>    </td>
  </tr><tr onclick="document.location.href='/play/view?id=12870135';">
    <td style="text-align: center;color:green;">
      <a href="/play/view?id=12870135" onclick="event.stopPropagation();">
        <i class="fa fa-check-square-o" style="color:green;"></i></a>
    </td>
    <td style="color:green;">
      BJ    </td>
    <td style="text-align: right;color:green;">
      27M    </td>
    <td style="text-align: right;color:green;">
          </td>
    <td style="text-align: center;color:green;">
      2/2    </td>
    <td style="color:green;">
      <span class="width-limited">Jizz</span>, <span class="width-limited">MantasKaleda</span>    </td>
  </tr><tr onclick="document.location.href='/play/view?id=12870138';">
    <td style="text-align: center;color:green;">
      <a href="/play/view?id=12870138" onclick="event.stopPropagation();">
        <i class="fa fa-check-square-o" style="color:green;"></i></a>
    </td>
    <td style="color:green;">
      PTD    </td>
    <td style="text-align: right;color:green;">
      325M    </td>
    <td style="text-align: right;color:green;">
      451M    </td>
    <td style="text-align: center;color:green;">
      2/2    </td>
    <td style="color:green;">
      <span class="width-limited">GoldmanSachs</span>, <b class="width-limited">SadMorty</b>    </td>
  </tr><tr onclick="document.location.href='/play/view?id=12870137';">
    <td style="text-align: center;color:green;">
      <a href="/play/view?id=12870137" onclick="event.stopPropagation();">
        <i class="fa fa-check-square-o" style="color:green;"></i></a>
    </td>
    <td style="color:green;">
      Duel    </td>
    <td style="text-align: right;color:green;">
      210k    </td>
    <td style="text-align: right;color:green;">
      399k    </td>
    <td style="text-align: center;color:green;">
      2/2    </td>
    <td style="color:green;">
      <b class="width-limited">TennisMenace</b>, <span class="width-limited">SadMorty</span>    </td>
  </tr></tbody></table>  
  </div>

</div>

<div class="sep"></div>
  
<div><style>
  .msg-me, msg-me * {
  font-style: italic;
}

.close-btn {
  margin:0;
  margin-top: -7px;
  margin-right: 4px;
  margin-left: -7px;
  display: inline-block;
  padding: 4px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.1);
  cursor: pointer;
  line-height: normal;
  font-size: 10px;
  vertical-align: top;
  background: rgba(0,0,0,0.3);
  color: rgba(255,255,255,0.3);
}
.close-btn:hover {
  color: yellow;
}
.tab-lobby > .close-btn {
  display: none;
}
.chat-window {
  background: rgba(0,0,0,0.35);
  border: 1px solid rgba(255,255,255,0.20);
}

#chatinfo {
  color: #863;
}
#output-panes {
  position: relative;
  height: 400px;
}
.new-activity {
  color: yellow;
  animation: pulseGreen 0.5s infinite;
  animation-direction: alternate;
}
@keyframes pulseGreen {
  0% {
    color: yellow;
  }
  100% {
    color: lightblue;
  }
}
#output-panes > * {
  position: absolute;
  left: 0; right: 0;
  top: 0; bottom: 0;
  height: 400px;
  overflow:auto;
  overflow-x: hidden;
  z-index: 0;
  background: #000;
}
#output-panes > * > * {
  padding: 2px;
  padding-left: 6px;
  white-space: normal;
  text-overflow: ellipsis !important;
}
#chatcli {
  width: 96%;
}
#chat-header {
  background: url('/theme/img/header2.jpg');
  background-position: center bottom;
}
#chat-header > * {
  margin: 4px;
  padding: 4px;
}
#input {
  display: flex;
  flex-direction: row;
  background: #000;
  margin: 0;
  border-top: 1px solid rgba(255,255,255,0.2);
  border-bottom: 1px solid rgba(255,255,255,0.2);
}
#input input {
  border: none;
  padding-left: 0;
  padding-right: 0;
  width: 100%;
}
.msg-srvmsg {
  font-style: italic;
}
.msg-nick-matched {
  background: rgba(255,80,80,0.20);
}
#chat-tabs {
  margin-bottom: -12px;
  border-top: 1px solid rgba(255,255,255,0.2);
}
#chat-tabs > a {
  cursor: pointer;
  display: inline-block;
  padding: 8px;
  max-width: 80px;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,0.2);
  border-top: none;
  background-position: center bottom;
  border-radius: 3px;
  white-space: nowrap;
  opacity: 0.7;
}
#chat-tabs > a.active {
  opacity: 1.0;
  background: url('/theme/img/header2.jpg');
  background-position: center bottom;
}
</style>

<div class="chat-window">
  <div id="chat-header">
    <div id="motd">Welcome to Runechat.com!</div>
  </div>
  <div id="output-panes">
    
  </div>
  <br/></div>

<script id="tmpl-tabs" type="text/x-minibars-template">
{{#properties tabs}}
  <a class="tab-{{@key}}" onclick="ChatClient.switchTab('{{@key}}');">
    <span class="close-btn" onclick="ChatClient.closeTab('{{@key}}');">x</span>
    {{name}}
  </a>
{{/properties}}
</script>

<script id="tmpl-srvmsg" type="text/x-minibars-template">
  <div class="msg-srvmsg {{msgClass}}" style="color: {{textColor}}">
  {{#if link}}<a href="{{link}}" target="_blank" style="color: {{textColor}}">{{/if}}
    {{{iconMarkup}}}{{text}}{{{html}}}
  {{#if link}}</a>{{/if}}
  </div>
</script>

<script id="tmpl-event" type="text/x-minibars-template">
  <div class="msg-event {{msgClass}}">
    <img src="/theme/img/coin.png" width="16" align="absmiddle"/>
    {{text}}
  </div>
</script>

<script id="tmpl-text" type="text/x-minibars-template">
  <div class="msg-text {{msgClass}}">
    <span class="{{from.userClass}}">{{{from.icon}}} {{from.nick}}</span>: 
    {{{iconMarkup}}}{{text}}
  </div>
</script>

<script id="tmpl-me" type="text/x-minibars-template">
  <div class="msg-me {{msgClass}}">
    <span class="{{from.userClass}}">{{{from.icon}}} {{from.nick}}</span>
    {{{iconMarkup}}}<span style="opacity:0.75">{{text}}</span>
  </div>
</script>

<script>

var ChatClient = {
  
  statusInfo : function() {},

  sounds : {
    bing : new Howl({"file":"bing","volume":0.8,"context":"chat","urls":["theme\/sounds\/bing.mp3","theme\/sounds\/bing.ogg"]}),
    notify : new Howl({"file":"click","volume":0.15,"context":"chat","urls":["theme\/sounds\/click.mp3","theme\/sounds\/click.ogg"]}),
    support : new Howl({"file":"support2","volume":0.25,"context":"chat","urls":["theme\/sounds\/support2.mp3","theme\/sounds\/support2.ogg"]}),
  },
  
  signals : {
    ticket : 'bing',
    raffle : 'notify',
    notify : 'notify',
    supportticket : 'support',
  },
  
  lookup : {
    roles : {
      U : 'usr_verified',
      M : 'usr-mod',
      A : 'usr-admin',    
    },
  },
  
  templates : {
    srvmsg : Minibars.compile($('#tmpl-srvmsg').html()),
    event : Minibars.compile($('#tmpl-event').html()),
    text : function() {
      var template = Minibars.compile($('#tmpl-text').html());
      return(function(msg) {
        if(msg.text) {
          var words = msg.text.toLowerCase();
          if(ChatClient.myNick != '' && words.indexOf(ChatClient.myNick.toLowerCase()) != -1) {
            //ChatClient.sounds.notify.play();
            msg.msgClass = 'msg-nick-matched';
          }
        }
        return(template(msg));
      });
      }(),
    me : Minibars.compile($('#tmpl-me').html()),
  },
  
  uiTemplates : {
    tabs : Minibars.compile($('#tmpl-tabs').html()),
  },
  
  ignoreList : [],

    backlogQueue : [],
  queueMessage : function(m) {
    ChatClient.backlogQueue.push(m);
    ChatClient.drainBacklog();
  },
  
  drainBacklog : function() {
    if(!ChatClient.isConnected)
      return;
    if(ChatClient.backlogQueue && ChatClient.backlogQueue.length > 0) {
      ChatClient.backlogQueue.forEach(function(m) {
        ChatClient.send(m);
      });
      ChatClient.backlogQueue = [];
    }
  },
  isConnected : false,
  connectCount : 0,

  handlers : {
    redirect : function(msg) {
      document.location.href = msg.url;
    },
    reload : function(msg) {
      document.location.reload();
    },
    nop : function(msg) {
      
    },
    statusInfo : function(msg) {
      ChatClient.statusInfo(msg.text);
    },
    walletUpdate : function(msg) {
      $('#usrWallet').html(msg.formatted);
    },
    modDutyInfo : function(msg) {
      $('#mod-duty-switch').load('/admin/duty/switch?');
    },
    keepalive : function(msg) {
      ChatClient.currentLatency = (new Date()).getTime() - ChatClient.lastKeepaliveSent;
          },
    bjInfo : function() {},
  },
  
  keepaliveSeq : 0,
  sendKeepalive : function() {
    ChatClient.lastKeepaliveSent = (new Date()).getTime();
    ChatClient.send({ 
      type : 'keepalive', 
      seq : ChatClient.keepaliveSeq++, 'msg-id' : Math.random(), latency : ChatClient.currentLatency });
    setTimeout(ChatClient.sendKeepalive, 30*1000);
  },
  
  linkify : function(text) {
    if (text) {
        text = text.replace(
            /((https?\:\/\/)|(www\.))(\S+)(\w{2,4})(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi,
            function(url){
                var full_url = url;
                if (!full_url.match('^https?:\/\/')) {
                    full_url = 'http://' + full_url;
                }
                return '<a target="_blank" href="' + full_url + '">' + url + '</a>';
            }
        );
    }
    return text;
  },
  
  connect : function() {
    if(!ChatClient.statusInfo)
      ChatClient.statusInfo = function() {};
    ChatClient.websocket = new WebSocket(ChatClient.wsUrl);
    ChatClient.websocket.onopen = function(evt) { 
      ChatClient.isConnected = true;
      ChatClient.statusInfo('connected.');
      ChatClient.send({ type : 'checkin', sid : ChatClient.sessionId });
      ChatClient.drainBacklog();
      ChatClient.connectCount += 1;
      if(ChatClient.connectCount == 1 && ChatClient.onConnect)
        ChatClient.onConnect();
      if(ChatClient.connectCount > 1 && ChatClient.onReConnect)
        ChatClient.onReConnect();
      };
    ChatClient.websocket.onclose = function(evt) { 
      ChatClient.isConnected = false;
      ChatClient.statusInfo('disconnected.');
      if(ChatClient.onDisconnect)
        ChatClient.onDisconnect();
      else
        setTimeout(function() { ChatClient.connect(); }, 2000);
      };
    ChatClient.websocket.onmessage = function(evt) { 
      try {
        var msg = JSON.parse(evt.data);
        if(msg.motd) 
          ChatClient.elements.motd.html(ChatClient.linkify(msg.motd));
        if(msg.setNick) 
          ChatClient.setNick(msg.setNick);
        if(msg.ignoreList) 
          ChatClient.ignoreList = msg.ignoreList;
        if(msg.from && ChatClient.ignoreList.indexOf(msg.from.id) != -1) {
          console.log('IGNORE', msg);
          return;
        }
        msg.room = (msg.room || 'lobby');
        if(!ChatClient.tabList[msg.room]) {
          ChatClient.tabList[msg.room] = { name : msg.roomName || msg.room };
          var tabO = {};
          tabO[msg.room] = ChatClient.tabList[msg.room];
          ChatClient.elements.tabs.append(ChatClient.uiTemplates.tabs({ tabs : tabO }));
          ChatClient.elements.output_panes.append('<div class="pane-'+msg.room+'"></div>');
        }
        if(msg.sound && ChatClient.sounds[msg.sound])
          ChatClient.sounds[msg.sound].play();
        ChatClient.onMessageDisplay(msg);
      }
      catch (err) {
        console.log('error processing message: '+evt.data);
        throw err;
      }
      };
    ChatClient.websocket.onerror = function(evt) { 
      ChatClient.statusInfo('disconnected.');      
      };
  },
  
  onMessageDisplay : function(msg) {
    //console.log('IN', msg);
    if(msg.from && ChatClient.ignoreList.indexOf(msg.from.id) != -1) {
      console.log('IGNORE', msg);
      return;
    }
    if(msg.from) 
      msg.from.userClass = ChatClient.lookup.roles[msg.from.role];
    if(!ChatClient.initializing &&
      msg.signal && ChatClient.signals[msg.signal] && ChatClient.sounds[ChatClient.signals[msg.signal]])
        ChatClient.sounds[ChatClient.signals[msg.signal]].play();
    if(ChatClient.handlers[msg.type]) 
      ChatClient.handlers[msg.type](msg);
    else if(ChatClient.templates[msg.type])
      ChatClient.displayOutput(msg.room, ChatClient.templates[msg.type](msg));
      },
  
  elements : {},
  
  tabList : {},
  
  myNick : '',
  setNick : function(nick) {
    ChatClient.elements.mynick.text(nick);
    ChatClient.myNick = nick;
  },
  
  init : function(wsUrl, sessionId, tabList, ignoreList) {
    this.initializing = true;
    if(ignoreList) this.ignoreList = ignoreList;
    this.wsUrl = wsUrl;
    this.sessionId = sessionId;
    this.elements.output_panes = $('#output-panes');
    this.elements.motd = $('#motd');
    this.elements.status = $('#chatinfo');
    this.elements.cli = $('#chatcli');
    this.elements.mynick = $('#myNick');
    this.elements.tabs = $('#chat-tabs');
    if(tabList) this.tabList = tabList;
    this.elements.tabs.html(this.uiTemplates.tabs({ tabs : this.tabList}));
    $.each(this.tabList, function(index, tab) {
      ChatClient.elements.output_panes.append('<div class="pane-'+index+'"></div>');
      if(tab.tabPending)
        ChatClient.setTabPending(index);
      if(tab.items) $.each(tab.items, function(index2, msgLine) {
        ChatClient.onMessageDisplay(msgLine);
        });
    });
    this.switchTab('lobby');
    this.connect();
    setTimeout(function() {
      ChatClient.scrollToBottom('lobby');
    }, 100);
    setTimeout(ChatClient.sendKeepalive, 10*1000);
    this.initializing = false;
  },
  
  currentTab : false,
  switchTab : function(index) {
    $('#chat-tabs > *').removeClass('active');
    $('.tab-'+index).addClass('active');
    $('#output-panes > *').css('z-index', 0);
    $('.pane-'+index).css('z-index', 10);
    ChatClient.currentTab = index;
    $('.tab-'+index).removeClass('new-activity');
    ChatClient.send({ type : 'opentab', room : index });
  },
  
  closeTab : function(index) {
    delete this.tabList[index];
    $('.tab-'+index).remove();
    $('.pane-'+index).remove();
    ChatClient.send({ type : 'closetab', room : index });
    ChatClient.switchTab('lobby');
  },
    
  send : function(msg) {
    if(ChatClient.websocket)
      ChatClient.websocket.send(JSON.stringify(msg));
    //console.log('OUT', msg);
  },
  
  sendLine : function() {
    var text = ChatClient.elements.cli.val();
    ChatClient.elements.cli.val('');
    ChatClient.send({ type : 'usertext', text : text, currentRoom : ChatClient.currentTab });
  },
  
  displayOutput : function(roomName, html) {
    var toPane = $('.pane-'+roomName);
    var chatLines = $('.pane-'+roomName+' > *');
    if(chatLines.length > 150) {
      chatLines[0].remove();
    }
    toPane.append(html);
    ChatClient.scrollToBottom(roomName);
    if(!ChatClient.initializing && roomName != ChatClient.currentTab)
      ChatClient.setTabPending(roomName);
  },
  
  scrollToBottom : function(roomName) {
    var toPane = $('.pane-'+roomName);
    toPane.scrollTop(toPane.prop("scrollHeight"));
  },
  
  setTabPending : function(roomName) {
    $('.tab-'+roomName).addClass('new-activity');
  },

  statusTimeout : false,
  statusInfo : function(text) {
    this.elements.status.text(text);
    if(ChatClient.statusTimeout) clearTimeout(ChatClient.statusTimeout);
    if(text != '') ChatClient.statusTimeout = setTimeout(function() {
      ChatClient.statusInfo('');
      }, 1500);
  },
  
}

ChatClient.init('ws://runechat.com/ws/', 'ae0f1a9b6d5da01a58111de99683ce1e', {"lobby":{"name":"Runechat","items":[{"type":"text","text":":(","from":{"icon":"<img height=\"20\" style=\"margin:-1px;vertical-align:text-top;\" src=\"\/theme\/img\/ranks\/green-party-hat.gif\"\/>","id":"52696","nick":"dicegame7","role":"U"},"room":"lobby"},{"type":"text","text":"ziva i wouldnt have to beg if u mods were nice for once","from":{"icon":"<img style=\"height:20px;\" class=\"rank-icon\" src=\"\/theme\/img\/ranks\/Whale5.gif\"\/>","id":"48001","nick":"oldschool","role":"U"},"room":"lobby"},{"type":"text","text":"i lost over 3b 07 and nothing...","from":{"icon":"<img style=\"height:20px;\" class=\"rank-icon\" src=\"\/theme\/img\/ranks\/Whale5.gif\"\/>","id":"48001","nick":"oldschool","role":"U"},"room":"lobby"},{"type":"text","text":"self control...","from":{"icon":"<img height=\"20\" style=\"margin:-1px;vertical-align:text-top;\" src=\"\/theme\/img\/ranks\/christmas-cracker.gif\"\/>","id":"44122","nick":"DanGleeSac","role":"U"},"room":"lobby"},{"type":"text","text":"lol","from":{"icon":"<img height=\"20\" style=\"margin:-1px;vertical-align:text-top;\" src=\"\/theme\/img\/ranks\/christmas-cracker.gif\"\/>","id":"44122","nick":"DanGleeSac","role":"U"},"room":"lobby"},{"type":"text","text":"lol","from":{"icon":"<img height=\"20\" style=\"margin:-1px;vertical-align:text-top;\" src=\"\/theme\/img\/ranks\/green-party-hat.gif\"\/>","id":"52696","nick":"dicegame7","role":"U"},"room":"lobby"},{"type":"text","text":"nice for once","from":{"icon":"<img style=\"height:20px;\" class=\"rank-icon\" src=\"\/theme\/img\/ranks\/white-party-hat.gif\"\/>","id":"19349","nick":"Orph","role":"M"},"room":"lobby"},{"type":"text","text":"yeahe iknow that","from":{"icon":"<img style=\"height:20px;\" class=\"rank-icon\" src=\"\/theme\/img\/ranks\/Whale5.gif\"\/>","id":"48001","nick":"oldschool","role":"U"},"room":"lobby"},{"type":"text","text":"lol","from":{"icon":"<img style=\"height:20px;\" class=\"rank-icon\" src=\"\/theme\/img\/ranks\/white-party-hat.gif\"\/>","id":"19349","nick":"Orph","role":"M"},"room":"lobby"},{"type":"text","text":"when it comes to betting the saying \"if at first you dont succeed try try again\" that doesnt apply in betting","from":{"icon":"<img height=\"20\" style=\"margin:-1px;vertical-align:text-top;\" src=\"\/theme\/img\/ranks\/christmas-cracker.gif\"\/>","id":"44122","nick":"DanGleeSac","role":"U"},"room":"lobby"},{"type":"text","text":"we dont need to fund your habits","from":{"icon":"<img style=\"height:20px;\" class=\"rank-icon\" src=\"\/theme\/img\/ranks\/white-party-hat.gif\"\/>","id":"19349","nick":"Orph","role":"M"},"room":"lobby"},{"type":"text","text":"got play rs","from":{"icon":"<img style=\"height:20px;\" class=\"rank-icon\" src=\"\/theme\/img\/ranks\/white-party-hat.gif\"\/>","id":"19349","nick":"Orph","role":"M"},"room":"lobby"},{"type":"text","text":"xD","from":{"icon":"<img style=\"height:20px;\" class=\"rank-icon\" src=\"\/theme\/img\/ranks\/white-party-hat.gif\"\/>","id":"19349","nick":"Orph","role":"M"},"room":"lobby"},{"type":"text","text":"hahah okay orph","from":{"icon":"<img style=\"height:20px;\" class=\"rank-icon\" src=\"\/theme\/img\/ranks\/Whale5.gif\"\/>","id":"48001","nick":"oldschool","role":"U"},"room":"lobby"},{"type":"text","text":"kyo doesnt even play rs","from":{"icon":"<img style=\"height:20px;\" class=\"rank-icon\" src=\"\/theme\/img\/ranks\/Ballin.gif\"\/>","id":"51485","nick":"TennisMenace","role":"U"},"room":"lobby"},{"type":"text","text":"i understand","from":{"icon":"<img style=\"height:20px;\" class=\"rank-icon\" src=\"\/theme\/img\/ranks\/Whale5.gif\"\/>","id":"48001","nick":"oldschool","role":"U"},"room":"lobby"}]}},
  null);

</script>
  <div class="legend" style="padding-top: 18px;">
    <div>
      <a class="bigbutton medium-padding de-emphasized" title="Highscores" 
        href="/share/highscore"><i class="fa fa-trophy"></i> Highscores</a> 
          </div>
    <div style="margin-top: 32px;">
      <a class="bigbutton greenbtn medium-padding" 
        title="Create Game" href="/play/new">
        <i class="fa fa-play"></i> New Game</a> 
              <a class="bigbutton greenbtn medium-padding" title="Sports Betting" href="/bet/index">
        <i class="fa fa-soccer-ball-o"></i> Sports</a>
          </div>
  </div>
</div>

</div>

<script>

$(function() {
  
  var initConnectionParameters = function() {
    ChatClient.queueMessage({"type":"channel","text":"currentgames"});
  };
  
  initConnectionParameters();
  ChatClient.onReConnect = initConnectionParameters;

  var lastChecksum = '';
  ChatClient.handlers.gameTable = function(data) {
    if(lastChecksum != data.checksum) {
      $('#gameoverview').html(data.html);
      lastChecksum = data.checksum;
    }
  };
  
});
  
</script>      </div></div>
      
      <footer>

       	<a href="http://runewealth.com"><img 
         	src="https://i.giphy.com/media/l0HlAzzXdZY204hna/giphy.webp" 
         	width="728" height="90" border="0" /></a> </br>
        &copy; 2014-2018 
        by RuneChat.com All Rights Reserved. We are not affiliated with Jagex LTD&copy; or Runescape&copy; <br/>
        By creating an account, depositing or withdrawing you are agreeing to the Terms Of Service. <br/>
        <div>
        <a href="/help/index">Help</a> &middot;
        <a href="/help/terms">Terms Of Service / Privacy</a> &middot;
        <a href="/help/faq">FAQ</a> &middot;
        <a href="/help/status">Status</a>
        </div>
        
        <div style="font-size: 80%;">
          2.863ms
        </div>

      </footer>
      
      <!-- Facebook Conversion Code for Registrations -->
<script>(function() {
  var _fbq = window._fbq || (window._fbq = []);
  if (!_fbq.loaded) {
    var fbds = document.createElement('script');
    fbds.async = true;
    fbds.src = '//connect.facebook.net/en_US/fbds.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(fbds, s);
    _fbq.loaded = true;
  }
})();
window._fbq = window._fbq || [];
window._fbq.push(['track', '6014323244098', {'value':'0.00','currency':'USD'}]);
</script>
<noscript><img height="1" width="1" alt="" style="display:none" src="https://www.facebook.com/tr?ev=6014323244098&amp;cd[value]=0.00&amp;cd[currency]=USD&amp;noscript=1" /></noscript>
      <!-- Google Code for Remarketing Tag -->
<!--------------------------------------------------
Remarketing tags may not be associated with personally identifiable information or placed on pages related to sensitive categories. See more information and instructions on how to setup the tag on: http://google.com/ads/remarketingsetup
--------------------------------------------------->
<script type="text/javascript">
/* <![CDATA[ */
var google_conversion_id = 1009958477;
var google_custom_params = window.google_tag_params;
var google_remarketing_only = true;
/* ]]> */
</script>
<noscript>
<div style="display:inline;">
</div>
</noscript>
      <script>
(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
e=o.createElement(i);r=o.getElementsByTagName(i)[0];
e.src='//www.google-analytics.com/analytics.js';
r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
ga('create', 'UA-63325717-1');ga('send','pageview');
</script>

      <script>
        var refint = false;
        
        var reportError = function (errorMsg, url, lineNumber, column, errorObj) {
          $.post('/backend/error', { 
            error : errorMsg,
            url : url,
            line : lineNumber,
            }, function(data) { console.log(data);});
          };
          
        window.onerror = reportError;
      </script>

    </body>
</html>
<!---->