<!DOCTYPE html>
<!--[if IE 7]>
<html id="ie7" lang="en">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="en">
<![endif]-->
<!--[if !(IE 7) & !(IE 8)]><!-->
<html lang="en">
<!--<![endif]-->
<head>
	<meta charset="UTF-8" />
	<title>circe-characterWorks | The character TD porfolio of cedric bazillou</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	<link rel="pingback" href="https://circecharacterworks.wordpress.com/xmlrpc.php" />
	<!--[if lt IE 9]>
	<script src="https://s0.wp.com/wp-content/themes/pub/parament/js/html5.js" type="text/javascript"></script>
	<![endif]-->
	<link rel='dns-prefetch' href='//s2.wp.com' />
<link rel='dns-prefetch' href='//s0.wp.com' />
<link rel='dns-prefetch' href='//s1.wp.com' />
<link rel='dns-prefetch' href='//s.pubmine.com' />
<link rel='dns-prefetch' href='//x.bidswitch.net' />
<link rel='dns-prefetch' href='//static.criteo.net' />
<link rel='dns-prefetch' href='//ib.adnxs.com' />
<link rel='dns-prefetch' href='//aax.amazon-adsystem.com' />
<link rel='dns-prefetch' href='//bidder.criteo.com' />
<link rel='dns-prefetch' href='//cas.criteo.com' />
<link rel='dns-prefetch' href='//gum.criteo.com' />
<link rel='dns-prefetch' href='//ads.pubmatic.com' />
<link rel='dns-prefetch' href='//gads.pubmatic.com' />
<link rel='dns-prefetch' href='//tpc.googlesyndication.com' />
<link rel='dns-prefetch' href='//ad.doubleclick.net' />
<link rel='dns-prefetch' href='//googleads.g.doubleclick.net' />
<link rel='dns-prefetch' href='//www.googletagservices.com' />
<link rel='dns-prefetch' href='//cdn.switchadhub.com' />
<link rel='dns-prefetch' href='//delivery.g.switchadhub.com' />
<link rel='dns-prefetch' href='//delivery.swid.switchadhub.com' />
<link rel="alternate" type="application/rss+xml" title="circe-characterWorks &raquo; Feed" href="https://circecharacterworks.wordpress.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="circe-characterWorks &raquo; Comments Feed" href="https://circecharacterworks.wordpress.com/comments/feed/" />
	<script type="text/javascript">
		/* <![CDATA[ */
		function addLoadEvent(func) {
			var oldonload = window.onload;
			if (typeof window.onload != 'function') {
				window.onload = func;
			} else {
				window.onload = function () {
					oldonload();
					func();
				}
			}
		}
		/* ]]> */
	</script>
			<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/s1.wp.com\/wp-includes\/js\/wp-emoji-release.min.js?m=1516999477h&ver=4.9.4"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55357,56692,8205,9792,65039],[55357,56692,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='all-css-0-1' href='https://s2.wp.com/_static/??-eJyNUe1uwyAMfKF5KN20jx/TnoUQl7o1GIHTLG8/0qituk6of9CdfYfNYaYETqJiVBNGSDx6isVMyUmAEohx/sOeXSlP5n8b0wGL2aMm6w5wYnfynsVf50ge7FCMZ+ktP6ZNNttQu3DctHahuKVIOl9AS+wkY62HZHVRBBzIIuMypmWbaPCo1V7OGBR/mpaQ3s6DFrirQTUjXbPv+5SxFKhnoDGA7upu9761bNLYX1IyRWfGRx5RxJFloCq5JauZTBRdm2fQutWjAIuzShJvCGzZUm5ZMy7/XqE/BXuli+k7fHWvn++bj6576fa/yYgIxw==?cssminify=yes' type='text/css' media='all' />
<link rel='stylesheet' id='print-css-1-1' href='https://s0.wp.com/wp-content/mu-plugins/global-print/global-print.css?m=1465851035h&cssminify=yes' type='text/css' media='print' />
<link rel='stylesheet' id='all-css-2-1' href='https://s2.wp.com/_static/??/wp-content/mu-plugins/actionbar/actionbar.css,/wp-content/themes/h4/global.css?m=1516985148j&cssminify=yes' type='text/css' media='all' />
<script type='text/javascript' src='https://s1.wp.com/_static/??-eJyF0G0KwjAMBuAL2dXJxP0Rz1Lr60hdP2zaDT29FSYiVIVAIHkISeQcBDk95hNYmhLXjHhbUmN4JX8BYWmIKqGx5F5Ye5fg0tNaf6QRIjOiGkqtDDr7iguekwVzQZXu50rkJsL8lxmkoPRFRDDdUTuEw3vn7x9Y1MHu267fbfp2263NA675cvs='></script>
<link rel='stylesheet' id='all-css-0-2' href='https://s1.wp.com/wp-content/mu-plugins/highlander-comments/style.css?m=1377793621h&cssminify=yes' type='text/css' media='all' />
<!--[if lt IE 8]>
<link rel='stylesheet' id='highlander-comments-ie7-css'  href='https://s1.wp.com/wp-content/mu-plugins/highlander-comments/style-ie7.css?m=1351637563h&#038;ver=20110606' type='text/css' media='all' />
<![endif]-->
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://circecharacterworks.wordpress.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://s1.wp.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress.com" />
<link rel='shortlink' href='https://wp.me/1sAoK' />

<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="website" />
<meta property="og:title" content="circe-characterWorks" />
<meta property="og:description" content="The character TD porfolio of cedric bazillou" />
<meta property="og:url" content="https://circecharacterworks.wordpress.com/" />
<meta property="og:site_name" content="circe-characterWorks" />
<meta property="og:image" content="https://s0.wp.com/i/blank.jpg" />
<meta property="og:locale" content="en_US" />
<meta name="twitter:site" content="@wordpressdotcom" />
<meta property="fb:app_id" content="249643311490" />
<link rel="shortcut icon" type="image/x-icon" href="https://s2.wp.com/i/favicon.ico" sizes="16x16 24x24 32x32 48x48" />
<link rel="icon" type="image/x-icon" href="https://s2.wp.com/i/favicon.ico" sizes="16x16 24x24 32x32 48x48" />
<link rel="apple-touch-icon-precomposed" href="https://s0.wp.com/i/webclip.png" />
<link rel='openid.server' href='https://circecharacterworks.wordpress.com/?openidserver=1' />
<link rel='openid.delegate' href='https://circecharacterworks.wordpress.com/' />
<link rel="search" type="application/opensearchdescription+xml" href="https://circecharacterworks.wordpress.com/osd.xml" title="circe-characterWorks" />
<link rel="search" type="application/opensearchdescription+xml" href="https://s1.wp.com/opensearch.xml" title="WordPress.com" />
<meta name="application-name" content="circe-characterWorks" /><meta name="msapplication-window" content="width=device-width;height=device-height" /><meta name="msapplication-tooltip" content="The character TD porfolio of cedric bazillou" /><meta name="msapplication-task" content="name=Subscribe;action-uri=https://circecharacterworks.wordpress.com/feed/;icon-uri=https://s2.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=https://s2.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=https://s2.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=https://s2.wp.com/i/favicon.ico" /><meta name="title" content="circe-characterWorks on WordPress.com" />
<meta name="description" content="The character TD porfolio of cedric bazillou" />
		<script type="text/javascript">
		var __ATA_PP = { pt: 0, ht: 0, tn: 'parament', amp: false, siteid: 8982 };
		var __ATA = __ATA || {};
		__ATA.cmd = __ATA.cmd || [];
		__ATA.criteo = __ATA.criteo || {};
		__ATA.criteo.cmd = __ATA.criteo.cmd || [];
		</script>
		<script type="text/javascript" src="//s.pubmine.com/head.js" async></script><style type="text/css" id="syntaxhighlighteranchor"></style>
<script type="text/javascript">
	window.google_analytics_uacct = "UA-52447-2";
</script>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-52447-2']);
	_gaq.push(['_setDomainName', 'wordpress.com']);
	_gaq.push(['_initData']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
	})();
</script>
</head>

<body class="home blog mp6 customizer-styles-applied highlander-enabled highlander-dark infinite-scroll">

<div id="page-wrap" class="contain">
	<header id="branding" role="banner">
		<h1 id="site-title"><a href="https://circecharacterworks.wordpress.com">circe-characterWorks</a></h1>
					<h2 id="site-description">The character TD porfolio of cedric bazillou</h2>		
			</header><!-- #branding -->

	<nav id="menu" role="navigation"><div id="primary-menu" class="menu"><ul>
<li class="page_item page-item-31"><a href="https://circecharacterworks.wordpress.com/about-2/">About</a></li>
<li class="page_item page-item-11"><a href="https://circecharacterworks.wordpress.com/resume/">resume</a></li>
<li class="page_item page-item-5"><a href="https://circecharacterworks.wordpress.com/demo_reel_work/">Demo reel</a></li>
<li class="page_item page-item-1800"><a href="https://circecharacterworks.wordpress.com/download/">Download</a></li>
</ul></div>
</nav>

<div id="container" class="contain">
	<div id="main" role="main">

									
<article id="post-2365" class="contain post-2365 post type-post status-publish format-standard hentry category-uncategorized has-byline">

	<div class="title">
					<h2 class="entry-title"><a href="https://circecharacterworks.wordpress.com/2018/03/18/pathfrompolysoup-rigging-non-typical-components-with-custom-nodes/" rel="bookmark">PathFromPolySoup: rigging non typical components with custom&nbsp;nodes</a></h2>				<div class="entry-byline">
			<span>Posted by <a href="https://circecharacterworks.wordpress.com/author/circerigging/" title="View all posts by circerigging">circerigging</a> on <a href="https://circecharacterworks.wordpress.com/2018/03/18/pathfrompolysoup-rigging-non-typical-components-with-custom-nodes/">March 18, 2018</a></span>
					</div>

		<div class="entry-meta">
						Posted in: <a href="https://circecharacterworks.wordpress.com/category/uncategorized/" rel="category tag">Uncategorized</a>.			
			
							<span class="comments"><a href="https://circecharacterworks.wordpress.com/2018/03/18/pathfrompolysoup-rigging-non-typical-components-with-custom-nodes/#respond">Leave a comment</a></span>
					</div><!-- entry-meta -->

	</div><!-- end title -->

	<div class="entry-content">
		<p>In today&#8217;s post i will about parts of my work  on feature film animation Mune and Ballerina.</p>
<div class="embed-vimeo"><iframe src="https://player.vimeo.com/video/260557352" width="627" height="351" frameborder="0" title="cedricBazillou_cfxReel2018" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>
<p>During those projects my position was related to character rigging and TD.<br />
It was really a rich experience being able to interact with talented peoples from other department like character Fx and simulation.</p>
<p><img data-attachment-id="2366" data-permalink="https://circecharacterworks.wordpress.com/2018/03/18/pathfrompolysoup-rigging-non-typical-components-with-custom-nodes/mune-photo-04/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/03/mune-photo-04.jpg?w=627" data-orig-size="2117,900" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="MUNE-photo-04" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/03/mune-photo-04.jpg?w=627?w=300" data-large-file="https://circecharacterworks.files.wordpress.com/2018/03/mune-photo-04.jpg?w=627?w=627" class="alignnone size-full wp-image-2366" src="https://circecharacterworks.files.wordpress.com/2018/03/mune-photo-04.jpg?w=627" alt="MUNE-photo-04" srcset="https://circecharacterworks.files.wordpress.com/2018/03/mune-photo-04.jpg?w=627 627w, https://circecharacterworks.files.wordpress.com/2018/03/mune-photo-04.jpg?w=1254 1254w, https://circecharacterworks.files.wordpress.com/2018/03/mune-photo-04.jpg?w=150 150w, https://circecharacterworks.files.wordpress.com/2018/03/mune-photo-04.jpg?w=300 300w, https://circecharacterworks.files.wordpress.com/2018/03/mune-photo-04.jpg?w=768 768w, https://circecharacterworks.files.wordpress.com/2018/03/mune-photo-04.jpg?w=1024 1024w" sizes="(max-width: 627px) 100vw, 627px"   /></p>
<p>On Mune the unique nature and artistic style of the characters was raising problem across the production. To achieve the look above on Sohone ( the bulky yellow sun guardian) Look Dev department needed 20000 hair guides ( keep in mind we where in 2013 on linux with maya and the guerilla renderer).</p>
<p>The simulation time and rig complexity was simply above was we were able to afford.</p>
<p><img data-attachment-id="2369" data-permalink="https://circecharacterworks.wordpress.com/2018/03/18/pathfrompolysoup-rigging-non-typical-components-with-custom-nodes/mune-photo-01/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/03/mune-photo-01.jpg?w=627" data-orig-size="2147,900" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="MUNE-photo-01" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/03/mune-photo-01.jpg?w=627?w=300" data-large-file="https://circecharacterworks.files.wordpress.com/2018/03/mune-photo-01.jpg?w=627?w=627" class="alignnone size-full wp-image-2369" src="https://circecharacterworks.files.wordpress.com/2018/03/mune-photo-01.jpg?w=627" alt="MUNE-photo-01" srcset="https://circecharacterworks.files.wordpress.com/2018/03/mune-photo-01.jpg?w=627 627w, https://circecharacterworks.files.wordpress.com/2018/03/mune-photo-01.jpg?w=1254 1254w, https://circecharacterworks.files.wordpress.com/2018/03/mune-photo-01.jpg?w=150 150w, https://circecharacterworks.files.wordpress.com/2018/03/mune-photo-01.jpg?w=300 300w, https://circecharacterworks.files.wordpress.com/2018/03/mune-photo-01.jpg?w=768 768w, https://circecharacterworks.files.wordpress.com/2018/03/mune-photo-01.jpg?w=1024 1024w" sizes="(max-width: 627px) 100vw, 627px"   /></p>
<p>Especially with the moon temple where 50 moon spiders, sohone and Mune will met and interact. This challenge is what inspired me and enable me to present a prototype which was deployed in production: the <em><strong>pathFromPolysoup</strong> </em>node.</p>
<h3><span style="color:#ff9900;">Hair from an artitistic point of view:</span></h3>
<p>Like any art subject we tend to identify pattern and structuration on the element we study .</p>
<p><img data-attachment-id="2371" data-permalink="https://circecharacterworks.wordpress.com/2018/03/18/pathfrompolysoup-rigging-non-typical-components-with-custom-nodes/barberdeano-mens-hairstyles-summer-fall-winter-2017-textured-mohawk/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/03/barberdeano-mens-hairstyles-summer-fall-winter-2017-textured-mohawk.jpg?w=627" data-orig-size="1080,1078" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="barberdeano-mens-hairstyles-summer-fall-winter-2017-textured-mohawk" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/03/barberdeano-mens-hairstyles-summer-fall-winter-2017-textured-mohawk.jpg?w=627?w=300" data-large-file="https://circecharacterworks.files.wordpress.com/2018/03/barberdeano-mens-hairstyles-summer-fall-winter-2017-textured-mohawk.jpg?w=627?w=627" class="alignnone size-full wp-image-2371" src="https://circecharacterworks.files.wordpress.com/2018/03/barberdeano-mens-hairstyles-summer-fall-winter-2017-textured-mohawk.jpg?w=627" alt="barberdeano-mens-hairstyles-summer-fall-winter-2017-textured-mohawk" srcset="https://circecharacterworks.files.wordpress.com/2018/03/barberdeano-mens-hairstyles-summer-fall-winter-2017-textured-mohawk.jpg?w=627 627w, https://circecharacterworks.files.wordpress.com/2018/03/barberdeano-mens-hairstyles-summer-fall-winter-2017-textured-mohawk.jpg?w=150 150w, https://circecharacterworks.files.wordpress.com/2018/03/barberdeano-mens-hairstyles-summer-fall-winter-2017-textured-mohawk.jpg?w=300 300w, https://circecharacterworks.files.wordpress.com/2018/03/barberdeano-mens-hairstyles-summer-fall-winter-2017-textured-mohawk.jpg?w=768 768w, https://circecharacterworks.files.wordpress.com/2018/03/barberdeano-mens-hairstyles-summer-fall-winter-2017-textured-mohawk.jpg?w=1024 1024w, https://circecharacterworks.files.wordpress.com/2018/03/barberdeano-mens-hairstyles-summer-fall-winter-2017-textured-mohawk.jpg 1080w" sizes="(max-width: 627px) 100vw, 627px"   /></p>
<p>No matter the style on the Mohawk above we can see triangular clumps larger at the base and gradually getting closer at the tip.</p>
<p><img data-attachment-id="2372" data-permalink="https://circecharacterworks.wordpress.com/2018/03/18/pathfrompolysoup-rigging-non-typical-components-with-custom-nodes/92xri/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/03/92xri.jpg?w=627" data-orig-size="736,826" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="92xrI" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/03/92xri.jpg?w=627?w=267" data-large-file="https://circecharacterworks.files.wordpress.com/2018/03/92xri.jpg?w=627?w=627" class="alignnone size-full wp-image-2372" src="https://circecharacterworks.files.wordpress.com/2018/03/92xri.jpg?w=627" alt="92xrI" srcset="https://circecharacterworks.files.wordpress.com/2018/03/92xri.jpg?w=627 627w, https://circecharacterworks.files.wordpress.com/2018/03/92xri.jpg?w=134 134w, https://circecharacterworks.files.wordpress.com/2018/03/92xri.jpg?w=267 267w, https://circecharacterworks.files.wordpress.com/2018/03/92xri.jpg 736w" sizes="(max-width: 627px) 100vw, 627px"   /></p>
<p>Same with this cartoon female concept: broad mass  describe the the flow of follicles and imprint rhythm to the overall composition.</p>
<h3><span style="color:#ff9900;">Maya nHair implementation:</span></h3>
<p>In maya and canonical hairsystem an array of hair guides are attached to scalp object</p>
<p><img data-attachment-id="2375" data-permalink="https://circecharacterworks.wordpress.com/2018/03/18/pathfrompolysoup-rigging-non-typical-components-with-custom-nodes/folliclegraph2/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/03/folliclegraph2.png?w=627" data-orig-size="673,594" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="follicleGraph2" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/03/folliclegraph2.png?w=627?w=300" data-large-file="https://circecharacterworks.files.wordpress.com/2018/03/folliclegraph2.png?w=627?w=627" class="alignnone size-full wp-image-2375" src="https://circecharacterworks.files.wordpress.com/2018/03/folliclegraph2.png?w=627" alt="follicleGraph2" srcset="https://circecharacterworks.files.wordpress.com/2018/03/folliclegraph2.png?w=627 627w, https://circecharacterworks.files.wordpress.com/2018/03/folliclegraph2.png?w=150 150w, https://circecharacterworks.files.wordpress.com/2018/03/folliclegraph2.png?w=300 300w, https://circecharacterworks.files.wordpress.com/2018/03/folliclegraph2.png 673w" sizes="(max-width: 627px) 100vw, 627px"   /></p>
<p>The final dynamic hair strands are interpolated between them.</p>
<p><img data-attachment-id="2376" data-permalink="https://circecharacterworks.wordpress.com/2018/03/18/pathfrompolysoup-rigging-non-typical-components-with-custom-nodes/follicle3/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/03/follicle3.png?w=627" data-orig-size="815,383" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="follicle3" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/03/follicle3.png?w=627?w=300" data-large-file="https://circecharacterworks.files.wordpress.com/2018/03/follicle3.png?w=627?w=627" class="alignnone size-full wp-image-2376" src="https://circecharacterworks.files.wordpress.com/2018/03/follicle3.png?w=627" alt="follicle3" srcset="https://circecharacterworks.files.wordpress.com/2018/03/follicle3.png?w=627 627w, https://circecharacterworks.files.wordpress.com/2018/03/follicle3.png?w=150 150w, https://circecharacterworks.files.wordpress.com/2018/03/follicle3.png?w=300 300w, https://circecharacterworks.files.wordpress.com/2018/03/follicle3.png?w=768 768w, https://circecharacterworks.files.wordpress.com/2018/03/follicle3.png 815w" sizes="(max-width: 627px) 100vw, 627px"   /></p>
<p>With the image above we can see that a curve shape can be attached either to a nurbs surface or a polygonal mesh and each guide will create 6 dependency nodes.</p>
<p>Maintenance and evaluation of dozen of thousand of guide will seriously impact scene size and performance.</p>
<h3><span style="color:#ff9900;">Enter the gungeon:</span></h3>
<p>My idea in this case was really simple and came from one observation:</p>
<p>Why do we need to manage so many elements?</p>
<p><img data-attachment-id="2377" data-permalink="https://circecharacterworks.wordpress.com/2018/03/18/pathfrompolysoup-rigging-non-typical-components-with-custom-nodes/curveshape/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/03/curveshape.png?w=627" data-orig-size="620,600" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="curveShape" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/03/curveshape.png?w=627?w=300" data-large-file="https://circecharacterworks.files.wordpress.com/2018/03/curveshape.png?w=627?w=620" class="alignnone size-full wp-image-2377" src="https://circecharacterworks.files.wordpress.com/2018/03/curveshape.png?w=627" alt="curveShape" srcset="https://circecharacterworks.files.wordpress.com/2018/03/curveshape.png 620w, https://circecharacterworks.files.wordpress.com/2018/03/curveshape.png?w=150 150w, https://circecharacterworks.files.wordpress.com/2018/03/curveshape.png?w=300 300w" sizes="(max-width: 620px) 100vw, 620px"   /></p>
<p>How about merging them?</p>
<p><img data-attachment-id="2378" data-permalink="https://circecharacterworks.wordpress.com/2018/03/18/pathfrompolysoup-rigging-non-typical-components-with-custom-nodes/shapeparenting/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/03/shapeparenting.png?w=627" data-orig-size="621,275" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="shapeParenting" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/03/shapeparenting.png?w=627?w=300" data-large-file="https://circecharacterworks.files.wordpress.com/2018/03/shapeparenting.png?w=627?w=621" class="alignnone size-full wp-image-2378" src="https://circecharacterworks.files.wordpress.com/2018/03/shapeparenting.png?w=627" alt="shapeParenting" srcset="https://circecharacterworks.files.wordpress.com/2018/03/shapeparenting.png 621w, https://circecharacterworks.files.wordpress.com/2018/03/shapeparenting.png?w=150 150w, https://circecharacterworks.files.wordpress.com/2018/03/shapeparenting.png?w=300 300w" sizes="(max-width: 621px) 100vw, 621px"   /></p>
<p>If you use Yeti you can preview your hair and think all of them are merged together. Unfortunately they are simply sharing the same parent.</p>
<p>My achievement was to step further a way from the problem and get an original angle from it.</p>
<p><img data-attachment-id="2380" data-permalink="https://circecharacterworks.wordpress.com/2018/03/18/pathfrompolysoup-rigging-non-typical-components-with-custom-nodes/hairslice/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/03/hairslice.png?w=627" data-orig-size="603,749" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="hairSlice" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/03/hairslice.png?w=627?w=242" data-large-file="https://circecharacterworks.files.wordpress.com/2018/03/hairslice.png?w=627?w=603" class="alignnone size-full wp-image-2380" src="https://circecharacterworks.files.wordpress.com/2018/03/hairslice.png?w=627" alt="hairSlice" srcset="https://circecharacterworks.files.wordpress.com/2018/03/hairslice.png 603w, https://circecharacterworks.files.wordpress.com/2018/03/hairslice.png?w=121 121w, https://circecharacterworks.files.wordpress.com/2018/03/hairslice.png?w=242 242w" sizes="(max-width: 603px) 100vw, 603px"   /></p>
<p>Above we can see how by extracting the curve points we can build and structure the same information into an hairSlice: a simple mesh face replicating the curve Hull.</p>
<p><img data-attachment-id="2383" data-permalink="https://circecharacterworks.wordpress.com/2018/03/18/pathfrompolysoup-rigging-non-typical-components-with-custom-nodes/mohawkslice/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/03/mohawkslice.png?w=627" data-orig-size="711,794" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="mohawkSlice" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/03/mohawkslice.png?w=627?w=269" data-large-file="https://circecharacterworks.files.wordpress.com/2018/03/mohawkslice.png?w=627?w=627" class="alignnone size-full wp-image-2383" src="https://circecharacterworks.files.wordpress.com/2018/03/mohawkslice.png?w=627" alt="mohawkSlice" srcset="https://circecharacterworks.files.wordpress.com/2018/03/mohawkslice.png?w=627 627w, https://circecharacterworks.files.wordpress.com/2018/03/mohawkslice.png?w=134 134w, https://circecharacterworks.files.wordpress.com/2018/03/mohawkslice.png?w=269 269w, https://circecharacterworks.files.wordpress.com/2018/03/mohawkslice.png 711w" sizes="(max-width: 627px) 100vw, 627px"   />The first part of the scene optimization problem was solved:</p>
<ul>
<li>HairSlices could now be merged into logical unit and deformed efficiently.</li>
<li>It was time to think of a way to uncompile mesh faces into haircurves.</li>
</ul>
<h3><span style="color:#ff9900;">PathFromPolySoup implementation:</span></h3>
<p><img data-attachment-id="2385" data-permalink="https://circecharacterworks.wordpress.com/2018/03/18/pathfrompolysoup-rigging-non-typical-components-with-custom-nodes/polysoup/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/03/polysoup.png?w=627" data-orig-size="486,624" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="polySoup" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/03/polysoup.png?w=627?w=234" data-large-file="https://circecharacterworks.files.wordpress.com/2018/03/polysoup.png?w=627?w=486" class="alignnone size-full wp-image-2385" src="https://circecharacterworks.files.wordpress.com/2018/03/polysoup.png?w=627" alt="polySoup" srcset="https://circecharacterworks.files.wordpress.com/2018/03/polysoup.png 486w, https://circecharacterworks.files.wordpress.com/2018/03/polysoup.png?w=117 117w, https://circecharacterworks.files.wordpress.com/2018/03/polysoup.png?w=234 234w" sizes="(max-width: 486px) 100vw, 486px"   /></p>
<p>My prototype was first build in python in a couple hour</p>
<p><img data-attachment-id="2386" data-permalink="https://circecharacterworks.wordpress.com/2018/03/18/pathfrompolysoup-rigging-non-typical-components-with-custom-nodes/polysoupconnections/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/03/polysoupconnections.png?w=627" data-orig-size="569,991" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="polySoupConnections" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/03/polysoupconnections.png?w=627?w=172" data-large-file="https://circecharacterworks.files.wordpress.com/2018/03/polysoupconnections.png?w=627?w=569" class="alignnone size-full wp-image-2386" src="https://circecharacterworks.files.wordpress.com/2018/03/polysoupconnections.png?w=627" alt="polySoupConnections" srcset="https://circecharacterworks.files.wordpress.com/2018/03/polysoupconnections.png 569w, https://circecharacterworks.files.wordpress.com/2018/03/polysoupconnections.png?w=86 86w, https://circecharacterworks.files.wordpress.com/2018/03/polysoupconnections.png?w=172 172w" sizes="(max-width: 569px) 100vw, 569px"   /></p>
<p>A mesh where several hairSlices were merged was labelled a polySoup.</p>
<p>It will be the only input of the pathFromPolySOup node which output curve data ( you can visualize them with a nurbsCurve shape but the output attribute can be directly connected to your HairSystem shape).</p>
<p>&nbsp;</p>
<p>Thats it for today, in the coming week i will speak more about the utility nodes and deformers that bind this system together in a production environment. I hope it was informative and spawn new ideas with other people.</p>
		<div class="wpcnt">
			<div class="wpa wpmrec">
				<span class="wpa-about">Advertisements</span>
				<div class="u">		<div style="padding-bottom:15px;width:300px;height:250px;float:left;margin-right:5px;margin-top:0px">
		<div id="atatags-26942-5ab327fc87732">
			<script type="text/javascript">
			__ATA.cmd.push(function() {
				__ATA.initSlot('atatags-26942-5ab327fc87732',  {
					collapseEmpty: 'before',
					sectionId: '26942',
					width: 300,
					height: 250
				});
			});
			</script>
		</div></div>		<div style="padding-bottom:15px;width:300px;height:250px;float:left;margin-top:0px">
		<div id="atatags-114160-5ab327fc8776c">
			<script type="text/javascript">
			__ATA.cmd.push(function() {
				__ATA.initSlot('atatags-114160-5ab327fc8776c',  {
					collapseEmpty: 'before',
					sectionId: '114160',
					width: 300,
					height: 250
				});
			});
			</script>
		</div></div></div>
						<div id="crt-1392514718" style="width:300px;height:250px;display:none !important;"></div>
		<script type="text/javascript">
(function(){var c=function(){var a=document.getElementById("crt-1392514718");window.Criteo?(a.parentNode.style.setProperty("display","inline-block","important"),a.style.setProperty("display","block","important"),window.Criteo.DisplayAcceptableAdIfAdblocked({zoneid:388248,containerid:"crt-1392514718",collapseContainerIfNotAdblocked:!0,callifnotadblocked:function(){a.style.setProperty("display","none","important");a.style.setProperty("visbility","hidden","important")}})):(a.style.setProperty("display","none","important"),a.style.setProperty("visibility","hidden","important"))};if(window.Criteo)c();else{if(!__ATA.criteo.script){var b=document.createElement("script");b.src="//static.criteo.net/js/ld/publishertag.js";b.onload=function(){for(var a=0;a<__ATA.criteo.cmd.length;a++){var b=__ATA.criteo.cmd[a];"function"===typeof b&&b()}};(document.head||document.getElementsByTagName("head")[0]).appendChild(b);__ATA.criteo.script=b}__ATA.criteo.cmd.push(c)}})();
		</script>		<div id="crt-1550206097" style="width:300px;height:250px;display:none !important;"></div>
		<script type="text/javascript">
(function(){var c=function(){var a=document.getElementById("crt-1550206097");window.Criteo?(a.parentNode.style.setProperty("display","inline-block","important"),a.style.setProperty("display","block","important"),window.Criteo.DisplayAcceptableAdIfAdblocked({zoneid:837497,containerid:"crt-1550206097",collapseContainerIfNotAdblocked:!0,callifnotadblocked:function(){a.style.setProperty("display","none","important");a.style.setProperty("visbility","hidden","important")}})):(a.style.setProperty("display","none","important"),a.style.setProperty("visibility","hidden","important"))};if(window.Criteo)c();else{if(!__ATA.criteo.script){var b=document.createElement("script");b.src="//static.criteo.net/js/ld/publishertag.js";b.onload=function(){for(var a=0;a<__ATA.criteo.cmd.length;a++){var b=__ATA.criteo.cmd[a];"function"===typeof b&&b()}};(document.head||document.getElementsByTagName("head")[0]).appendChild(b);__ATA.criteo.script=b}__ATA.criteo.cmd.push(c)}})();
		</script>
			</div>
		</div>	</div>

	
</article>							
<article id="post-2331" class="contain post-2331 post type-post status-publish format-standard hentry category-research has-byline">

	<div class="title">
					<h2 class="entry-title"><a href="https://circecharacterworks.wordpress.com/2018/01/25/beyond-modular-procedural-rigging-ubernodes-and-custom-manipulators-in-action/" rel="bookmark">Beyond modular procedural rigging: ubernodes and custom manipulators in&nbsp;action</a></h2>				<div class="entry-byline">
			<span>Posted by <a href="https://circecharacterworks.wordpress.com/author/circerigging/" title="View all posts by circerigging">circerigging</a> on <a href="https://circecharacterworks.wordpress.com/2018/01/25/beyond-modular-procedural-rigging-ubernodes-and-custom-manipulators-in-action/">January 25, 2018</a></span>
					</div>

		<div class="entry-meta">
						Posted in: <a href="https://circecharacterworks.wordpress.com/category/research/" rel="category tag">Research</a>.			
			
							<span class="comments"><a href="https://circecharacterworks.wordpress.com/2018/01/25/beyond-modular-procedural-rigging-ubernodes-and-custom-manipulators-in-action/#respond">Leave a comment</a></span>
					</div><!-- entry-meta -->

	</div><!-- end title -->

	<div class="entry-content">
		<p>In today&#8217;s post we will take a look at the result of my research.</p>
<p>My profound belief in Maya was that the most efficient way to achieve performance and ease in maintenance was to build a custom component dedicated to one specific task.</p>
<p>To pursue this goal i build and wrote around 300 customs nodes over the last 4 years ( with some solver, manipulator and other Maya elements mixed in ).</p>
<p>It is my joy and pleasure to feature the <em>Muppet node</em>.</p>
<p><img data-attachment-id="2336" data-permalink="https://circecharacterworks.wordpress.com/muppetgraph/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/01/muppetgraph.png?w=627" data-orig-size="841,348" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="muppetGraph" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/01/muppetgraph.png?w=627?w=300" data-large-file="https://circecharacterworks.files.wordpress.com/2018/01/muppetgraph.png?w=627?w=627" class="alignnone size-full wp-image-2336" src="https://circecharacterworks.files.wordpress.com/2018/01/muppetgraph.png?w=627" alt="muppetGraph" srcset="https://circecharacterworks.files.wordpress.com/2018/01/muppetgraph.png?w=627 627w, https://circecharacterworks.files.wordpress.com/2018/01/muppetgraph.png?w=150 150w, https://circecharacterworks.files.wordpress.com/2018/01/muppetgraph.png?w=300 300w, https://circecharacterworks.files.wordpress.com/2018/01/muppetgraph.png?w=768 768w, https://circecharacterworks.files.wordpress.com/2018/01/muppetgraph.png 841w" sizes="(max-width: 627px) 100vw, 627px"   /></p>
<h2>Taming anarchy and complexities:</h2>
<p>Following the rise of computer power , memory and multi-threading capability, our character rigs have become quite complex.</p>
<p><a href="https://circecharacterworks.files.wordpress.com/2018/01/mrv_graph.png" target="_blank" rel="noopener"><img data-attachment-id="2338" data-permalink="https://circecharacterworks.wordpress.com/2018/01/25/beyond-modular-procedural-rigging-ubernodes-and-custom-manipulators-in-action/mrv_graph/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/01/mrv_graph.png?w=627" data-orig-size="2216,1323" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="mrv_graph" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/01/mrv_graph.png?w=627?w=300" data-large-file="https://circecharacterworks.files.wordpress.com/2018/01/mrv_graph.png?w=627?w=627" class="alignnone size-full wp-image-2338" src="https://circecharacterworks.files.wordpress.com/2018/01/mrv_graph.png?w=627" alt="mrv_graph" srcset="https://circecharacterworks.files.wordpress.com/2018/01/mrv_graph.png?w=627 627w, https://circecharacterworks.files.wordpress.com/2018/01/mrv_graph.png?w=1254 1254w, https://circecharacterworks.files.wordpress.com/2018/01/mrv_graph.png?w=150 150w, https://circecharacterworks.files.wordpress.com/2018/01/mrv_graph.png?w=300 300w, https://circecharacterworks.files.wordpress.com/2018/01/mrv_graph.png?w=768 768w, https://circecharacterworks.files.wordpress.com/2018/01/mrv_graph.png?w=1024 1024w" sizes="(max-width: 627px) 100vw, 627px"   /></a></p>
<p style="text-align:center;"><em>(to open this picture at its original size click on the image above)</em></p>
<p>In such a case its not unusual to find more than 10 thousand nodes in your asset file.</p>
<p>This can introduce bigger file size, slower rig evaluation and time required to load animation .</p>
<p><a href="https://circecharacterworks.files.wordpress.com/2018/01/muppetconnections.png" target="_blank" rel="noopener"><img data-attachment-id="2339" data-permalink="https://circecharacterworks.wordpress.com/2018/01/25/beyond-modular-procedural-rigging-ubernodes-and-custom-manipulators-in-action/muppetconnections/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/01/muppetconnections.png?w=627" data-orig-size="2422,1164" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="muppetConnections" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/01/muppetconnections.png?w=627?w=300" data-large-file="https://circecharacterworks.files.wordpress.com/2018/01/muppetconnections.png?w=627?w=627" class="alignnone size-full wp-image-2339" src="https://circecharacterworks.files.wordpress.com/2018/01/muppetconnections.png?w=627" alt="muppetConnections" srcset="https://circecharacterworks.files.wordpress.com/2018/01/muppetconnections.png?w=627 627w, https://circecharacterworks.files.wordpress.com/2018/01/muppetconnections.png?w=1254 1254w, https://circecharacterworks.files.wordpress.com/2018/01/muppetconnections.png?w=150 150w, https://circecharacterworks.files.wordpress.com/2018/01/muppetconnections.png?w=300 300w, https://circecharacterworks.files.wordpress.com/2018/01/muppetconnections.png?w=768 768w, https://circecharacterworks.files.wordpress.com/2018/01/muppetconnections.png?w=1024 1024w" sizes="(max-width: 627px) 100vw, 627px"   /></a></p>
<p style="text-align:center;"><em>( between the 2 graphs above which one do you think evaluates faster even in the latest parallel evaluation framework?) </em></p>
<h2>Evaluating rigs over 100 frames per seconds:</h2>
<div class="embed-vimeo"><iframe src="https://player.vimeo.com/video/252656404" width="627" height="470" frameborder="0" title="Beyond modular procedural rigging: Muppet node early demonstration" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>
<h2>UberNode decomposition:</h2>
<p>This project started as a simple practice to convert  legacy python prototypes into  more refined c++ components .</p>
<p>Several time, i spend some time refactoring my network design in order to control in a more optimal way how the data will flow .</p>
<p>After some experimentation, it started to make sense to pack as many elements in the same node:</p>
<ul>
<li>The main system controls 99 output bones</li>
<li>has build-in ik/fk serial blending rig</li>
<li>controls limb segment, ik arcs and twistReaders.</li>
<li>exposes stretchy limbs</li>
<li>has internal limb/spine ik solvers.</li>
</ul>
<h4>0 &#8211; Source file and credits:</h4>
<p>In order to let people compare results i will use a publicly available rig:</p>
<p>the MorpheusRig2 from cgmonks [<a href="http://www.cgmonks.com/tools/maya-tools/cgmtoolbox-2-0/">http://www.cgmonks.com/tools/maya-tools/cgmtoolbox-2-0/</a>](<em><strong>mrv2_m1_animateBeta_01_02112016.mb</strong></em>)</p>
<p>My research focusing mainly on body rig  the file was  heavily modified and stripped down to expose the common functionalities you expect for the general silhouette animation.</p>
<h4>1 &#8211; Serial chain blender:</h4>
<p>One common design one can met in Maya is the infamous ik/fk chain blending .</p>
<p><img data-attachment-id="2341" data-permalink="https://circecharacterworks.wordpress.com/2018/01/25/beyond-modular-procedural-rigging-ubernodes-and-custom-manipulators-in-action/blendconcept/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/01/blendconcept.png?w=627" data-orig-size="712,794" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="blendConcept" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/01/blendconcept.png?w=627?w=269" data-large-file="https://circecharacterworks.files.wordpress.com/2018/01/blendconcept.png?w=627?w=627" class="alignnone size-full wp-image-2341" src="https://circecharacterworks.files.wordpress.com/2018/01/blendconcept.png?w=627" alt="blendConcept" srcset="https://circecharacterworks.files.wordpress.com/2018/01/blendconcept.png?w=627 627w, https://circecharacterworks.files.wordpress.com/2018/01/blendconcept.png?w=135 135w, https://circecharacterworks.files.wordpress.com/2018/01/blendconcept.png?w=269 269w, https://circecharacterworks.files.wordpress.com/2018/01/blendconcept.png 712w" sizes="(max-width: 627px) 100vw, 627px"   /></p>
<p>The basic idea for using 3 chains was historically to overcome some limitation of the default ik solver ( which have basic fk mode blending). Its also one of the first element a beginner can study :</p>
<ul>
<li>how for example to implement a squash and stretch limb module</li>
<li>What about space switching?</li>
</ul>
<p><img data-attachment-id="2342" data-permalink="https://circecharacterworks.wordpress.com/2018/01/25/beyond-modular-procedural-rigging-ubernodes-and-custom-manipulators-in-action/pairblend/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/01/pairblend.png?w=627" data-orig-size="423,579" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="pairBlend" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/01/pairblend.png?w=627?w=219" data-large-file="https://circecharacterworks.files.wordpress.com/2018/01/pairblend.png?w=627?w=423" class=" size-full wp-image-2342 aligncenter" src="https://circecharacterworks.files.wordpress.com/2018/01/pairblend.png?w=627" alt="pairBlend" srcset="https://circecharacterworks.files.wordpress.com/2018/01/pairblend.png 423w, https://circecharacterworks.files.wordpress.com/2018/01/pairblend.png?w=110 110w, https://circecharacterworks.files.wordpress.com/2018/01/pairblend.png?w=219 219w" sizes="(max-width: 423px) 100vw, 423px"   /></p>
<p>Instead of sticking with blendColor to mix some input values I always was interested by the <em><strong>PairBlend </strong></em>node which was release after Alias acquire kaydara ( around maya 7 and the HIK solver first integration attempts) .</p>
<p>The important part here is that its respecting your data type and as such does not introduce any kind of unitConversion node .</p>
<p><img data-attachment-id="2343" data-permalink="https://circecharacterworks.wordpress.com/2018/01/25/beyond-modular-procedural-rigging-ubernodes-and-custom-manipulators-in-action/blendgraph/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/01/blendgraph.png?w=627" data-orig-size="439,452" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="blendGraph" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/01/blendgraph.png?w=627?w=291" data-large-file="https://circecharacterworks.files.wordpress.com/2018/01/blendgraph.png?w=627?w=439" class=" size-full wp-image-2343 aligncenter" src="https://circecharacterworks.files.wordpress.com/2018/01/blendgraph.png?w=627" alt="blendGraph" srcset="https://circecharacterworks.files.wordpress.com/2018/01/blendgraph.png 439w, https://circecharacterworks.files.wordpress.com/2018/01/blendgraph.png?w=146 146w, https://circecharacterworks.files.wordpress.com/2018/01/blendgraph.png?w=291 291w" sizes="(max-width: 439px) 100vw, 439px"   /></p>
<p>&nbsp;</p>
<p>It was working quite well , but i felt compelled to improve / reduce the number of nodes to manage. What i wanted to address was  how to operate on a list of input pair  values.</p>
<p>That was the start of my first chain blender : the <strong>blendQueue Node</strong>(shameless plug : <a href="https://circecharacterworks.wordpress.com/download/">https://circecharacterworks.wordpress.com/download/)</a></p>
<p><img data-attachment-id="1826" data-permalink="https://circecharacterworks.wordpress.com/download/queuenode/" data-orig-file="https://circecharacterworks.files.wordpress.com/2012/06/queuenode.png?w=627" data-orig-size="419,273" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;}" data-image-title="queueNode" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2012/06/queuenode.png?w=627?w=300" data-large-file="https://circecharacterworks.files.wordpress.com/2012/06/queuenode.png?w=627?w=419" class="aligncenter size-full wp-image-1826" title="queueNode" src="https://circecharacterworks.files.wordpress.com/2012/06/queuenode.png?w=627" alt="" srcset="https://circecharacterworks.files.wordpress.com/2012/06/queuenode.png 419w, https://circecharacterworks.files.wordpress.com/2012/06/queuenode.png?w=150 150w, https://circecharacterworks.files.wordpress.com/2012/06/queuenode.png?w=300 300w" sizes="(max-width: 419px) 100vw, 419px"   /></p>
<p>As an interesting side study i did implement a sequential blend mode which was useful to blend from neutral pose to start animation pose in the context of cloth simulation.</p>
<p><img data-attachment-id="1835" data-permalink="https://circecharacterworks.wordpress.com/download/queuegraph/" data-orig-file="https://circecharacterworks.files.wordpress.com/2012/06/queuegraph.png?w=627" data-orig-size="476,500" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;}" data-image-title="queueGraph" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2012/06/queuegraph.png?w=627?w=286" data-large-file="https://circecharacterworks.files.wordpress.com/2012/06/queuegraph.png?w=627?w=476" class="aligncenter size-full wp-image-1835" title="queueGraph" src="https://circecharacterworks.files.wordpress.com/2012/06/queuegraph.png?w=627" alt="" srcset="https://circecharacterworks.files.wordpress.com/2012/06/queuegraph.png 476w, https://circecharacterworks.files.wordpress.com/2012/06/queuegraph.png?w=143 143w, https://circecharacterworks.files.wordpress.com/2012/06/queuegraph.png?w=286 286w" sizes="(max-width: 476px) 100vw, 476px"   /></p>
<p>Some year later i made some observation and took some notes of what i need to improve in my chainBlender nodes.</p>
<p>It was time to write a <em><strong>milkShake node:</strong></em></p>
<p><a href="https://github.com/cedricB/circeCharacterWorksTools/blob/master/maya/plug-ins/milkShake.py"> https://github.com/cedricB/circeCharacterWorksTools/blob/master/maya/plug-ins/milkShake.py</a></p>
<p>Usually the first rigging layer is related to the asset  motion. Depending of your project , industry and time constraint this hierarchy will roughly mimic skeleton and real life anatomy.</p>
<p><img data-attachment-id="2350" data-permalink="https://circecharacterworks.wordpress.com/2018/01/25/beyond-modular-procedural-rigging-ubernodes-and-custom-manipulators-in-action/svenautodesk/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/01/svenautodesk.png?w=627" data-orig-size="569,634" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="svenAutodesk" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/01/svenautodesk.png?w=627?w=269" data-large-file="https://circecharacterworks.files.wordpress.com/2018/01/svenautodesk.png?w=627?w=569" class=" size-full wp-image-2350 aligncenter" src="https://circecharacterworks.files.wordpress.com/2018/01/svenautodesk.png?w=627" alt="svenAutodesk" srcset="https://circecharacterworks.files.wordpress.com/2018/01/svenautodesk.png 569w, https://circecharacterworks.files.wordpress.com/2018/01/svenautodesk.png?w=135 135w, https://circecharacterworks.files.wordpress.com/2018/01/svenautodesk.png?w=269 269w" sizes="(max-width: 569px) 100vw, 569px"   /></p>
<p>One common pattern is to layout your character in neutral position in relation to animation sharing/retargeting: the T-pose</p>
<p><img data-attachment-id="2351" data-permalink="https://circecharacterworks.wordpress.com/2018/01/25/beyond-modular-procedural-rigging-ubernodes-and-custom-manipulators-in-action/orcautodesklearningchannel/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/01/orcautodesklearningchannel.png?w=627" data-orig-size="414,664" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="orcAutodeskLearningChannel" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/01/orcautodesklearningchannel.png?w=627?w=187" data-large-file="https://circecharacterworks.files.wordpress.com/2018/01/orcautodesklearningchannel.png?w=627?w=414" class=" size-full wp-image-2351 aligncenter" src="https://circecharacterworks.files.wordpress.com/2018/01/orcautodesklearningchannel.png?w=627" alt="orcAutodeskLearningChannel" srcset="https://circecharacterworks.files.wordpress.com/2018/01/orcautodesklearningchannel.png 414w, https://circecharacterworks.files.wordpress.com/2018/01/orcautodesklearningchannel.png?w=94 94w, https://circecharacterworks.files.wordpress.com/2018/01/orcautodesklearningchannel.png?w=187 187w" sizes="(max-width: 414px) 100vw, 414px"   /></p>
<p>Another school/ point of view is to get the entity in relaxed state in regards to deformation , closer to the most common state: its the A-Pose (for example in video game you might want your character between a t-pose and walking/idle position).</p>
<p><img data-attachment-id="2353" data-permalink="https://circecharacterworks.wordpress.com/2018/01/25/beyond-modular-procedural-rigging-ubernodes-and-custom-manipulators-in-action/offsetcomponents/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/01/offsetcomponents.png?w=627" data-orig-size="236,249" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="offsetComponents" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/01/offsetcomponents.png?w=627?w=236" data-large-file="https://circecharacterworks.files.wordpress.com/2018/01/offsetcomponents.png?w=627?w=236" class=" size-full wp-image-2353 aligncenter" src="https://circecharacterworks.files.wordpress.com/2018/01/offsetcomponents.png?w=627" alt="offsetComponents" srcset="https://circecharacterworks.files.wordpress.com/2018/01/offsetcomponents.png 236w, https://circecharacterworks.files.wordpress.com/2018/01/offsetcomponents.png?w=142 142w" sizes="(max-width: 236px) 100vw, 236px"   /></p>
<p>Usually we organize and fit this skeleton into the render mesh, and in order to manipulate and restore the skeleton to its bindpose most people introduce intermediate groups which enable them to simply set the channel attribute to zero to reset the their pose.</p>
<p>Resetting hierarchies can be done in Maya very robustly with the <em><strong>DagPose</strong> </em>command and node (thats you will find on skinned bone construction history with a default name of bindpose&#8230;)</p>
<p><img data-attachment-id="2348" data-permalink="https://circecharacterworks.wordpress.com/2018/01/25/beyond-modular-procedural-rigging-ubernodes-and-custom-manipulators-in-action/transformnode/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/01/transformnode.png?w=627" data-orig-size="420,385" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="transformNode" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/01/transformnode.png?w=627?w=300" data-large-file="https://circecharacterworks.files.wordpress.com/2018/01/transformnode.png?w=627?w=420" class=" size-full wp-image-2348 aligncenter" src="https://circecharacterworks.files.wordpress.com/2018/01/transformnode.png?w=627" alt="transformNode" srcset="https://circecharacterworks.files.wordpress.com/2018/01/transformnode.png 420w, https://circecharacterworks.files.wordpress.com/2018/01/transformnode.png?w=150 150w, https://circecharacterworks.files.wordpress.com/2018/01/transformnode.png?w=300 300w" sizes="(max-width: 420px) 100vw, 420px"   /></p>
<p>Taking advantage of maya joint/transform node design we can also set the initial rotation of the skeleton components into their rotate axis or joint orient attribute (if their type is a joint)</p>
<p><img data-attachment-id="2349" data-permalink="https://circecharacterworks.wordpress.com/2018/01/25/beyond-modular-procedural-rigging-ubernodes-and-custom-manipulators-in-action/hiknode/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/01/hiknode.png?w=627" data-orig-size="538,674" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="hIKNode" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/01/hiknode.png?w=627?w=239" data-large-file="https://circecharacterworks.files.wordpress.com/2018/01/hiknode.png?w=627?w=538" class=" size-full wp-image-2349 aligncenter" src="https://circecharacterworks.files.wordpress.com/2018/01/hiknode.png?w=627" alt="hIKNode" srcset="https://circecharacterworks.files.wordpress.com/2018/01/hiknode.png 538w, https://circecharacterworks.files.wordpress.com/2018/01/hiknode.png?w=120 120w, https://circecharacterworks.files.wordpress.com/2018/01/hiknode.png?w=239 239w" sizes="(max-width: 538px) 100vw, 538px"   /></p>
<p>The only missing attribute to cover all my need was an offsetTranslation attribute.</p>
<p>This can be implemented in a custom transform node or you can hack maya hikEffector node usually used in HumanIk motion capture rig.</p>
<p>In motionbuilder to emulate offset animation controller present in 3dsmax you can set pre/post rotation property and write your value in the rotatePivotTranslate.</p>
<p><img data-attachment-id="2347" data-permalink="https://circecharacterworks.wordpress.com/2018/01/25/beyond-modular-procedural-rigging-ubernodes-and-custom-manipulators-in-action/milknode/" data-orig-file="https://circecharacterworks.files.wordpress.com/2018/01/milknode.png?w=627" data-orig-size="370,650" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="milkNode" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2018/01/milknode.png?w=627?w=171" data-large-file="https://circecharacterworks.files.wordpress.com/2018/01/milknode.png?w=627?w=370" class=" size-full wp-image-2347 aligncenter" src="https://circecharacterworks.files.wordpress.com/2018/01/milknode.png?w=627" alt="milkNode" srcset="https://circecharacterworks.files.wordpress.com/2018/01/milknode.png 370w, https://circecharacterworks.files.wordpress.com/2018/01/milknode.png?w=85 85w, https://circecharacterworks.files.wordpress.com/2018/01/milknode.png?w=171 171w" sizes="(max-width: 370px) 100vw, 370px"   /></p>
<p>Thats why i felt it was necessary to reproduce the hierarchy state inside the <em>chainBlender</em>. The translate/rotate offset enable the character to be set in A-pose without intermediate components and will play an important role in streamline rig evaluation.</p>
<p>This node output bundle rotation/translate and even matrix attribute and can be connect to any other regular maya node.</p>
<h4>2 &#8211; Twist Segment:</h4>
<h4>3 &#8211; Twist Reader:</h4>
<h4>4 &#8211; Bending limb through arc nodes:</h4>
<h4>5 &#8211; Homebrew ik 2 bones with stretchy parameters:</h4>
<h2>Controlling the data flow and pruning cycle design:</h2>
<p>e</p>
<h2>Challenging Motionbuilder humanIK:</h2>
<p>e</p>
<h2>What about rigs without nodes? a peek at manipulator:</h2>
<p>e</p>
<p>&nbsp;</p>
<div id="atatags-370373-5ab327fc90a0e">
        <script type="text/javascript">
            __ATA.cmd.push(function() {
                __ATA.initVideoSlot('atatags-370373-5ab327fc90a0e', {
                    sectionId: '370373',
                    format: 'inread'
                });
            });
        </script>
    </div>	</div>

	
</article>							
<article id="post-2078" class="contain post-2078 post type-post status-publish format-standard hentry category-uncategorized has-byline">

	<div class="title">
					<h2 class="entry-title"><a href="https://circecharacterworks.wordpress.com/2016/10/06/chronicles-of-cedrick-escape-from-pymel-bay/" rel="bookmark">Chronicles of CedricK: escape from Pymel&nbsp;Bay</a></h2>				<div class="entry-byline">
			<span>Posted by <a href="https://circecharacterworks.wordpress.com/author/circerigging/" title="View all posts by circerigging">circerigging</a> on <a href="https://circecharacterworks.wordpress.com/2016/10/06/chronicles-of-cedrick-escape-from-pymel-bay/">October 6, 2016</a></span>
					</div>

		<div class="entry-meta">
						Posted in: <a href="https://circecharacterworks.wordpress.com/category/uncategorized/" rel="category tag">Uncategorized</a>.			
			
							<span class="comments"><a href="https://circecharacterworks.wordpress.com/2016/10/06/chronicles-of-cedrick-escape-from-pymel-bay/#respond">Leave a comment</a></span>
					</div><!-- entry-meta -->

	</div><!-- end title -->

	<div class="entry-content">
		<p>As anyone can guess the last 3 years were quite challenging: i was lucky enough to travel and work in Canada, Spain and Scotland.</p>
<p>I didn&#8217;t manage to update this blog in the meantime, but todays post will but related to maya development .</p>
<p>Last week <a href="http://chrisevans3d.com/personal.htm">Chris Evans</a> wrote a post on <a href="http://www.chrisevans3d.com/pub_blog/saveload-skinweights-125x-faster/">skin-weights saving/loading in Maya,</a> I will try to talk here about the part I find relevant and lastly elements we can improve.</p>
<h4><span style="color:#ff6600;"><strong>Downloadable files and tool:</strong></span></h4>
<p>After a review of this task and additional information you will be able see some benchmark using different methods and tool.</p>
<p>The one i wrote for this occasion can be grab on my git hub account:</p>
<ul>
<li> <a href="https://github.com/cedricB/skinIO">https://github.com/cedricB/skinIO</a></li>
</ul>
<h4><span style="color:#ff6600;"><strong>State of the art and current configuration:</strong></span></h4>
<p>Saving and loading weights is a common task any character TD will face at some point.</p>
<p>Usually in the rigging pipeline :</p>
<ul>
<li>This update can be motivated when a character model has changed.</li>
<li>A rig module has changed or animation department request a special feature.</li>
</ul>
<p>Those updates will mean our rig need to be rebuilt.</p>
<p>Back in the day changing skeleton layout requires people to detach their skin deformer but is no longer needed.</p>
<p>Another observation is that we usually are interested to updated a whole character skincluster or build it from scratch:</p>
<ul>
<li>loading weight on selected points is quite rare ( but easy to do ).</li>
</ul>
<h4><span style="color:#ff6600;"><strong>Practical interaction and scripting access:</strong></span></h4>
<p>On a scripting point of view this task can be done with the commands <a href="http://help.autodesk.com/cloudhelp/2015/ENU/Maya-Tech-Docs/CommandsPython/skinPercent.html" target="subFrame"><b>skinPercent</b></a>  and <b><a href="http://help.autodesk.com/cloudhelp/2015/ENU/Maya-Tech-Docs/CommandsPython/skinCluster.html" target="subFrame">skinCluster</a>.</b></p>
<pre class="brush: python; collapse: false; title: ; wrap-lines: false; notranslate" title="">

#lets try this code in the python script Editor
vertexToWrite = ['bodySuit.vtx[0]',
                 'bodySuit.vtx[1]',
                 'bodySuit.vtx[2]']

#when you want to write some point weights
maya.cmds.skinPercent(vertexToWrite,
                      'bodySuitSkinCluster1',
                      transformValue = ('spine1',0.5),
                                       ('spine2', 0.5)])
#We can see you can specify as argument the component you wish to act upon
</pre>
<p>This example can illustrate some of maya strong points : its nodal nature,  openness and scripting capacity  .</p>
<p>A very interesting design choice  was made by the maya architects:</p>
<ul>
<li>letting user having free access to attributes .</li>
</ul>
<p>This freedom let you read/write data at will and connect compatible element together and this process can be done without having  to select their parent node</p>
<p>In contrast  in 3dsmax the skinOps command is only accessible from the command panel after  a skin modifier have been selected, unfrtunately :</p>
<ul>
<li>Some exposed function are broken or doesn&#8217;t support undo&#8230;</li>
</ul>
<h4><span style="color:#ff6600;"><strong>Skincluster node study:</strong></span></h4>
<p>To continue the 3dsmax analogy an operator which act on set of points is called a <em>deformer.</em></p>
<ul>
<li>its a specialized node which only update point attributes  (so normals /position are quite common, but usually not the topology nor the uvs)</li>
</ul>
<p>In our case a skincluster purpose is to attach a set of points to a joint and then define a smooth falloff between regions.</p>
<p><img data-attachment-id="2301" data-permalink="https://circecharacterworks.wordpress.com/2016/10/06/chronicles-of-cedrick-escape-from-pymel-bay/lbs_equation/" data-orig-file="https://circecharacterworks.files.wordpress.com/2016/10/lbs_equation.png?w=627" data-orig-size="511,230" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="lbs_equation" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2016/10/lbs_equation.png?w=627?w=300" data-large-file="https://circecharacterworks.files.wordpress.com/2016/10/lbs_equation.png?w=627?w=511" class=" size-full wp-image-2301 aligncenter" src="https://circecharacterworks.files.wordpress.com/2016/10/lbs_equation.png?w=627" alt="lbs_equation" srcset="https://circecharacterworks.files.wordpress.com/2016/10/lbs_equation.png 511w, https://circecharacterworks.files.wordpress.com/2016/10/lbs_equation.png?w=150 150w, https://circecharacterworks.files.wordpress.com/2016/10/lbs_equation.png?w=300 300w" sizes="(max-width: 511px) 100vw, 511px"   /></p>
<p style="text-align:center;"><em>( above the equation in academic papers: not very useful and readable isn&#8217;t it?)</em></p>
<p style="text-align:left;">In common terms each influence will move all points rigidly ( as if the whole shape was parented to it ) and then bone vertex weights will be used to define how we mix things together.</p>
<p><img data-attachment-id="2297" data-permalink="https://circecharacterworks.wordpress.com/2016/10/06/chronicles-of-cedrick-escape-from-pymel-bay/skinmatrix/" data-orig-file="https://circecharacterworks.files.wordpress.com/2016/10/skinmatrix.png" data-orig-size="1640,380" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="skinmatrix" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2016/10/skinmatrix.png?w=300" data-large-file="https://circecharacterworks.files.wordpress.com/2016/10/skinmatrix.png?w=627" class="alignleft size-large wp-image-2297" src="https://circecharacterworks.files.wordpress.com/2016/10/skinmatrix.png?w=627&#038;h=145" alt="skinmatrix" srcset="https://circecharacterworks.files.wordpress.com/2016/10/skinmatrix.png?w=627&amp;h=145 627w, https://circecharacterworks.files.wordpress.com/2016/10/skinmatrix.png?w=1252&amp;h=290 1252w, https://circecharacterworks.files.wordpress.com/2016/10/skinmatrix.png?w=150&amp;h=35 150w, https://circecharacterworks.files.wordpress.com/2016/10/skinmatrix.png?w=300&amp;h=70 300w, https://circecharacterworks.files.wordpress.com/2016/10/skinmatrix.png?w=768&amp;h=178 768w, https://circecharacterworks.files.wordpress.com/2016/10/skinmatrix.png?w=1024&amp;h=237 1024w" sizes="(max-width: 627px) 100vw, 627px"   /></p>
<p style="text-align:left;">Without any surprise the main input attribute used to define this behavior is the <em>matrix</em> attribute.</p>
<p style="text-align:left;">Each influences <em>worldMatrix</em> will feed this list and tell the deformer  when to update our shape point positions.</p>
<p style="text-align:left;">In order to parent the shape to a joint we need to convert points into this joint space:</p>
<ul>
<li style="text-align:left;">at bind Time Maya will store your joint worldInverseMatrix into the correct <em>bindPrematrix</em> attribute.</li>
</ul>
<p><img data-attachment-id="2150" data-permalink="https://circecharacterworks.wordpress.com/2016/10/06/chronicles-of-cedrick-escape-from-pymel-bay/skincluster/" data-orig-file="https://circecharacterworks.files.wordpress.com/2016/10/skincluster.png?w=627" data-orig-size="317,441" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="skincluster" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2016/10/skincluster.png?w=627?w=216" data-large-file="https://circecharacterworks.files.wordpress.com/2016/10/skincluster.png?w=627?w=317" class="alignnone size-full wp-image-2150" src="https://circecharacterworks.files.wordpress.com/2016/10/skincluster.png?w=627" alt="skincluster" srcset="https://circecharacterworks.files.wordpress.com/2016/10/skincluster.png 317w, https://circecharacterworks.files.wordpress.com/2016/10/skincluster.png?w=108 108w, https://circecharacterworks.files.wordpress.com/2016/10/skincluster.png?w=216 216w" sizes="(max-width: 317px) 100vw, 317px"   /></p>
<p>Technically weight data are stored into a compound attribute:</p>
<ul>
<li>each vertex will have a sparse array of float/double related to the joints influencing them</li>
<li>One other fun fact is that you can connect this attribute ( maya being a nodal application remember?) to have animatable weights ( it will slow down your rig in a tremendous manner on complex character though).</li>
</ul>
<p>This choice was mostly driven for it flexibity:</p>
<ul>
<li>when you paint weights or colors on a set of points having a sparse array attribute save space and memory.</li>
</ul>
<p>Its interesting to see that this attribute is inherited from <span style="color:#000000;"><em><strong>weightGeometryFilter</strong></em> </span>parent class and as such is shared between all kind of deformer in maya ( very useful example of class design and inheritance).</p>
<p><img data-attachment-id="2305" data-permalink="https://circecharacterworks.wordpress.com/2016/10/06/chronicles-of-cedrick-escape-from-pymel-bay/deformerinheritance/" data-orig-file="https://circecharacterworks.files.wordpress.com/2016/10/deformerinheritance.png?w=627" data-orig-size="742,359" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="deformerinheritance" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2016/10/deformerinheritance.png?w=627?w=300" data-large-file="https://circecharacterworks.files.wordpress.com/2016/10/deformerinheritance.png?w=627?w=627" class=" size-full wp-image-2305 aligncenter" src="https://circecharacterworks.files.wordpress.com/2016/10/deformerinheritance.png?w=627" alt="deformerinheritance" srcset="https://circecharacterworks.files.wordpress.com/2016/10/deformerinheritance.png?w=627 627w, https://circecharacterworks.files.wordpress.com/2016/10/deformerinheritance.png?w=150 150w, https://circecharacterworks.files.wordpress.com/2016/10/deformerinheritance.png?w=300 300w, https://circecharacterworks.files.wordpress.com/2016/10/deformerinheritance.png 742w" sizes="(max-width: 627px) 100vw, 627px"   /></p>
<h4><span style="color:#ff6600;"><strong>Saving weights from the grounds up:</strong></span></h4>
<p>Now that we have a rough idea on how maya skincluster is implemented we can start looking on how this task was done through the year:</p>
<p><span style="color:#ff6600;">1 &#8211; Skinpercent vertex iteration:<strong><br />
</strong></span></p>
<p>Back in mel days we where using a combination of  fopen / fclose / fflush to write line by lines the influences index and weights list of each vertex component.</p>
<p>The most easy way to do that was to use a simple line separator like space.</p>
<p>Nowadays we can do it easily with python:</p>
<pre class="brush: python; collapse: false; title: ; wrap-lines: false; notranslate" title="">
#skinData mix joint index / weights: 65 0.2 12 0.56 5 0.24
with open ('targetskinFile.txt', 'w') as targetskinFile:
    targetskinFile.write(skinData)
</pre>
<p>Python context is a really powerful tool and concept: here it will automatically close your file once it goes out of scope.</p>
<p>Lets see now how to actually extract some usefull data.</p>
<pre class="brush: python; collapse: false; title: ; wrap-lines: false; notranslate" title="">

pointCount = maya.cmds.polyEvaluate(meshTransform, v=True)
skinCommand = 'findRelatedSkinCluster {}'.format(meshTransform)
skinDeformer = maya.mel.eval(skinCommand)

jointArray = maya.cmds.skinCluster(skinDeformer,
                                   q=True,
                                   inf=True)

for pointIndex in xrange(pointCount):
    component = '{meshTransform}.vtx[{vertexIndex}]'

    component = component.format(meshTransform=meshTransform,
                                 vertexIndex=pointIndex)

    weightData = maya.cmds.skinPercent(component,
                                       skinDeformer,
                                       q=True,
                                       value=True,
                                       ignoreBelow=0.000001)

    influenceData = maya.cmds.skinPercent(component,
                                          skinDeformer,
                                          q=True,
                                          transform=True,
                                          ignoreBelow=0.000001)

    influenceIndices = [jointArray.index(joint) for joint in jointArray]

    skinData = zip(influenceIndices, weightData)
</pre>
<p>Above you can see how to gather the weights for the provided component(most of the time vertex mesh ):</p>
<ul>
<li>The first lines gather the skinCluster node from the mesh history</li>
<li>determines how many points are deformed ( a more robust method involves getting the skincluster set but  90 percent of time user use all shape points.</li>
<li>And lastly gather the influence list</li>
</ul>
<p>The main part of the code is then put under a loop and act on each point:</p>
<ul>
<li>the first skinpercent command gather weights which are above the provided threshold (ignoreBellow=0.000001)</li>
<li>the second call will return an array of joint names hence the list comprehension at the end of the loop uesd to collect  their index )</li>
</ul>
<p><img data-attachment-id="2314" data-permalink="https://circecharacterworks.wordpress.com/2016/10/06/chronicles-of-cedrick-escape-from-pymel-bay/weightclass/" data-orig-file="https://circecharacterworks.files.wordpress.com/2016/10/weightclass.png?w=627" data-orig-size="883,937" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="weightclass" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2016/10/weightclass.png?w=627?w=283" data-large-file="https://circecharacterworks.files.wordpress.com/2016/10/weightclass.png?w=627?w=627" class="alignnone size-full wp-image-2314" src="https://circecharacterworks.files.wordpress.com/2016/10/weightclass.png?w=627" alt="weightclass" srcset="https://circecharacterworks.files.wordpress.com/2016/10/weightclass.png?w=627 627w, https://circecharacterworks.files.wordpress.com/2016/10/weightclass.png?w=141 141w, https://circecharacterworks.files.wordpress.com/2016/10/weightclass.png?w=283 283w, https://circecharacterworks.files.wordpress.com/2016/10/weightclass.png?w=768 768w, https://circecharacterworks.files.wordpress.com/2016/10/weightclass.png 883w" sizes="(max-width: 627px) 100vw, 627px"   /></p>
<p style="text-align:center;"><em>( In the next update of  skinIO module on git hub you will be able to look at the pointWeight class example: it will mostly be used to benchmark and compare methods)</em></p>
<p>2 &#8211; Low level attribute parsing:</p>
<p>e</p>
<p><span style="color:#ff6600;">3 &#8211; MFnSkinCluster influence iteration:</span></p>
<p>At some point, the natural evolution of a skinweights IO tool will involve acting on components:</p>
<ul>
<li>It can be useful to swap sides or mirror elements.</li>
<li>Sort elements and prepare data in for weight transfer (  here we can only do a one to one assigment ).</li>
</ul>
<p>At this point most people start to look at a higher degree of abstraction to actually save/read data to/from disk.</p>
<p>The most popular choice in game industry  is to use Xml ( because of 3dsmax and through dotnet).</p>
<p>it was also choosed by maya developper to save deformer weights ( skincluster is still done through UV and texture maps&#8230; ).</p>
<p>Years ago when i was testing the different options to save weight faster I start by saving  them as well into an xml file.I was having correct result with python cElementTree, but on my data set Json proved to be actually faster.</p>
<p>One thing that stroke me is that people are still trying to export skin weights in <strong>xml</strong> on a per <strong>Vertex</strong> basis.</p>
<p>At some point i tried to reverse my way of thinking  and to save the data from a joint point of view:</p>
<ul>
<li>each influence will carry a list  of vertex index and matching list  of weights.</li>
</ul>
<p>Lets take a look at this task by using the API  (as skinPercent -q -transform &#8220;jointToRead&#8221; average values instead of giving the list of weigts of the provided component&#8230;).</p>
<pre class="brush: python; collapse: false; title: ; wrap-lines: false; notranslate" title="">
import maya.OpenMaya
import maya.OpenMayaAnim
import maya.cmds 

def get_mobject(node):
    #sample code from chad vernon
    selectionList = maya.OpenMaya.MSelectionList()
    selectionList.add(node)
    oNode = maya.OpenMaya.MObject()
    selectionList.getDependNode(0, oNode)

    return oNode

skinCommand = 'findRelatedSkinCluster {}'.format(meshTransform)
skinDeformer = maya.mel.eval(skinCommand)

#Gather some data relative to influences
jointArray = maya.cmds.skinCluster(skinDeformer,
                                   q=True,
                                   inf=True)

influenceCount = len(jointArray)

#go from command to Api world
skinClusterApiObject = get_mobject(skinDeformer)
shapeApiObj = get_mobject(shape)

shapePath   = OpenMaya.MDagPath()
maya.OpenMaya.MDagPath().getAPathTo(shapeApiObj, shapePath)

#Now we can request skin data with the API by using MFnSkinCluster
skinFunctionUtils = maya.OpenMayaAnim.MFnSkinCluster(skinClusterApiObject)

influenceObjectPaths = maya.OpenMaya.MDagPathArray()
skinFunctionUtils.influenceObjects(influenceObjectPaths) 

componentFunctionUtils = OpenMaya.MFnSingleIndexedComponent()

vertexElements = OpenMaya.MIntArray()
vertexIndexSelectionList = maya.OpenMaya.MSelectionList()
vertexWeights = maya.OpenMaya.MFloatArray()

for jointIndex in xrange(influenceCount):
    vertexComponents = OpenMaya.MObject()
    skinFunctionUtils.getPointsAffectedByInfluence(influenceObjectPaths[jointIndex],
                                                   vertexIndexSelectionList,
                                                   vertexWeights)

    if vertexIndexSelectionList.length() &amp;amp;amp;amp;amp;lt; 1:
        continue

    vertexIndexSelectionList.getDagPath(0, shapePath, vertexComponents)
    componentFunctionUtils.setObject(vertexComponents)
    componentFunctionUtils.getElements(vertexElements)
    skinData = zip(vertexElements, vertexWeights)

</pre>
<p><span style="color:#ff6600;">4 &#8211; MFnSkinCluster and python Api  tricks:</span></p>
<p>As seen previously,using the python API show great improvement in speed but in the end the correct answer in my case was to dump the whole shape at once:</p>
<ul>
<li>instead of filtering point weights below a certain threshold the APImethod will expose all values( even zero one ) for all influences .</li>
</ul>
<p><img data-attachment-id="2218" data-permalink="https://circecharacterworks.wordpress.com/2016/10/06/chronicles-of-cedrick-escape-from-pymel-bay/svenskin/" data-orig-file="https://circecharacterworks.files.wordpress.com/2016/10/svenskin.png?w=627" data-orig-size="1029,1009" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="svenskin" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2016/10/svenskin.png?w=627?w=300" data-large-file="https://circecharacterworks.files.wordpress.com/2016/10/svenskin.png?w=627?w=627" class="alignnone size-full wp-image-2218" src="https://circecharacterworks.files.wordpress.com/2016/10/svenskin.png?w=627" alt="svenskin" srcset="https://circecharacterworks.files.wordpress.com/2016/10/svenskin.png?w=627 627w, https://circecharacterworks.files.wordpress.com/2016/10/svenskin.png?w=150 150w, https://circecharacterworks.files.wordpress.com/2016/10/svenskin.png?w=300 300w, https://circecharacterworks.files.wordpress.com/2016/10/svenskin.png?w=768 768w, https://circecharacterworks.files.wordpress.com/2016/10/svenskin.png?w=1024 1024w, https://circecharacterworks.files.wordpress.com/2016/10/svenskin.png 1029w" sizes="(max-width: 627px) 100vw, 627px"   /></p>
<p style="text-align:center;"><em>Above sven rig strip down to only its influence object and geometries ( from autodesk open source project :  <a href="https://github.com/cedricB/skinIO/blob/master/sven.skin001.zip">https://github.com/cedricB/skinIO/blob/master/sven.skin001.zip</a>)</em></p>
<p>One interesting side effect is that for a mesh with 12000 vertices ( 36000 tris ) and 170 joint you will have a 2 million float list ( and no need for influence index ). As such its best to use other method if one as to process very dense mesh.</p>
<p>Lets see how we can do it with actual code:</p>
<p>e</p>
<p>In python it makes more sense to save this kind of data set as a whole in a <strong>binary</strong> format:</p>
<p>weightLength=&#8217;d&#8217;*exposedSkinData.length()<br />
binWeights=struct.pack(weightLength,*exposedSkinData)</p>
<p>with open(binFile ,&#8217;wb&#8217;) as weightData:<br />
weightData.write(binWeights)</p>
<p>The final product can  package every asset files into a zip archive.</p>
<p><img data-attachment-id="2276" data-permalink="https://circecharacterworks.wordpress.com/2016/10/06/chronicles-of-cedrick-escape-from-pymel-bay/abcasset/" data-orig-file="https://circecharacterworks.files.wordpress.com/2016/10/abcasset.png?w=627" data-orig-size="304,547" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="abcasset" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2016/10/abcasset.png?w=627?w=167" data-large-file="https://circecharacterworks.files.wordpress.com/2016/10/abcasset.png?w=627?w=304" class=" size-full wp-image-2276 aligncenter" src="https://circecharacterworks.files.wordpress.com/2016/10/abcasset.png?w=627" alt="abcasset" srcset="https://circecharacterworks.files.wordpress.com/2016/10/abcasset.png 304w, https://circecharacterworks.files.wordpress.com/2016/10/abcasset.png?w=83 83w, https://circecharacterworks.files.wordpress.com/2016/10/abcasset.png?w=167 167w" sizes="(max-width: 304px) 100vw, 304px"   /></p>
<p><em>(above : it made more sense to me to bundle several skincluster present into a file as a skin asset instead of having one file per element)</em></p>
<p><img data-attachment-id="2279" data-permalink="https://circecharacterworks.wordpress.com/2016/10/06/chronicles-of-cedrick-escape-from-pymel-bay/abcjson/" data-orig-file="https://circecharacterworks.files.wordpress.com/2016/10/abcjson.png?w=627" data-orig-size="907,537" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="abcjson" data-image-description="" data-medium-file="https://circecharacterworks.files.wordpress.com/2016/10/abcjson.png?w=627?w=300" data-large-file="https://circecharacterworks.files.wordpress.com/2016/10/abcjson.png?w=627?w=627" class="alignnone size-full wp-image-2279" src="https://circecharacterworks.files.wordpress.com/2016/10/abcjson.png?w=627" alt="abcjson" srcset="https://circecharacterworks.files.wordpress.com/2016/10/abcjson.png?w=627 627w, https://circecharacterworks.files.wordpress.com/2016/10/abcjson.png?w=150 150w, https://circecharacterworks.files.wordpress.com/2016/10/abcjson.png?w=300 300w, https://circecharacterworks.files.wordpress.com/2016/10/abcjson.png?w=768 768w, https://circecharacterworks.files.wordpress.com/2016/10/abcjson.png 907w" sizes="(max-width: 627px) 100vw, 627px"   /></p>
<p><em>(above a sample of json dictionnary: each skincluster will have the same structure and point to a binary file ( either alembic or bin file))</em></p>
<p><span style="color:#ff6600;">6 &#8211; Maya ascii/binary injection:</span></p>
<p>Another alternative, opened to mel scripter and maya native user, is to take advantage of maya nature and leverage is strong points.</p>
<p>It is kind of sad to see nowadays softimage user bashing mel, and trying to promote pymel as the only correct way to interact with maya.(sorry but Ice and visual programming is not cool nor new to any nodal application user ).</p>
<p>Unfortunately pymel design which enforce object programming:</p>
<ul>
<li>cuts maya user from its architecture,</li>
<li>uses and expose api element to beginners( messing with MObject will have terrible consequence in your UI or scripts&#8230; ( look at motionbuilder instability if you want to see one concrete example of this potential disaster)</li>
<li>slower than both mel and and maya command</li>
<li>carry subtle bugs</li>
<li>pollutes maya namespace and scripted plugin at import times.</li>
</ul>
<p>end of the rant&#8230;</p>
<h4><span style="color:#ff6600;"><strong>Benchmarking and final toughts:</strong></span></h4>
<p>So the funny trick to save and load weight is to actually let maya do all the work:</p>
<ul>
<li><em><strong>exporting</strong> </em>a selected skincluster node in either binary or ascii format (you need to unsure no connection ,history other other accessory elements are included  at save time ).</li>
</ul>
<p>Lets call it maya ascii/binary injection.( there is a really intersting section in the API documention on mayaAscii filter with similar concepts).</p>
<p><em>(The following test can be carried out on your side if you dowmload and use script from :</em></p>
<p><em><a href="https://github.com/cedricB/skinIO">https://github.com/cedricB/skinIO</a></em></p>
<p>On my laptop using <strong>Chris script</strong> ( after correcting the missing import statements )</p>
<p>sven Export weight methods will produce this result  in the script editor:</p>
<p>Exported skinWeights for 22 meshes in 1.80200004578 seconds.</p>
<p><strong>The binary extraction methods </strong>from the script I will share on github:<br />
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-<br />
Processings took 0.82452176412 seconds</p>
<p><strong>The ascii extraction methods</strong><br />
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-<br />
Processings took 2.28121973499 seconds</p>
<p>(slower but still reasonable with retrospective to the amount of work involved&#8230; )</p>
<p>The last methods will take advantage of alembic cache node:<br />
Saving 22 elements took 0.473954696144 seconds<br />
Export to D:/SuitSkinCluster1.abc was successful<br />
Geometry SuitShape<br />
Number of vertex 18148<br />
Number of influences 216<br />
Number of weights Samples 3919968<br />
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-<br />
Processings took 0.313700978128 seconds</p>
<p><em><strong>(SKIPPING 21 other elements)</strong></em><br />
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-<br />
Processings took 0.516421672774 seconds</p>
<p>Thats it for today, I hope you had a good read.</p>
	</div>

	
</article>					
		<nav id="posts-nav" class="paged-navigation contain">
			<h1 class="assistive-text">Posts navigation</h1>
			<div class="nav-older"><a href="https://circecharacterworks.wordpress.com/page/2/" >&larr; Older Entries</a></div>
			<div class="nav-newer"></div>
		</nav>

	</div><!-- end main -->

	<ul id="sidebar" role="complementary">
	<li id="pages-2" class="widget widget_pages"><h2 class="widget-title">Pages</h2>		<ul>
			<li class="page_item page-item-31"><a href="https://circecharacterworks.wordpress.com/about-2/">About</a></li>
<li class="page_item page-item-11"><a href="https://circecharacterworks.wordpress.com/resume/">resume</a></li>
<li class="page_item page-item-5"><a href="https://circecharacterworks.wordpress.com/demo_reel_work/">Demo reel</a></li>
<li class="page_item page-item-1800"><a href="https://circecharacterworks.wordpress.com/download/">Download</a></li>
		</ul>
		</li><li id="categories-3" class="widget widget_categories"><h2 class="widget-title">Categories</h2>		<ul>
	<li class="cat-item cat-item-438089"><a href="https://circecharacterworks.wordpress.com/category/motion-capture/" >Motion Capture</a>
</li>
	<li class="cat-item cat-item-668"><a href="https://circecharacterworks.wordpress.com/category/research/" >Research</a>
</li>
	<li class="cat-item cat-item-173392"><a href="https://circecharacterworks.wordpress.com/category/rigging/" >Rigging</a>
</li>
	<li class="cat-item cat-item-2929"><a href="https://circecharacterworks.wordpress.com/category/scripting/" >scripting</a>
</li>
	<li class="cat-item cat-item-1"><a href="https://circecharacterworks.wordpress.com/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-131"><a href="https://circecharacterworks.wordpress.com/category/work/" >Work</a>
</li>
		</ul>
</li><li id="text-3" class="widget widget_text"><h2 class="widget-title">Currently:</h2>			<div class="textwidget"><p>Building tools and plugins in Toronto</p>
<p>Mostly in motionbuilder and 3dsmax</p>
</div>
		</li><li id="meta-4" class="widget widget_meta"><h2 class="widget-title">Meta</h2>			<ul>
			<li><a href="https://wordpress.com/start?ref=wplogin">Register</a></li>			<li><a href="https://circecharacterworks.wordpress.com/wp-login.php">Log in</a></li>
			<li><a href="https://circecharacterworks.wordpress.com/feed/">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="https://circecharacterworks.wordpress.com/comments/feed/">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="https://wordpress.com/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.com</a></li>			</ul>
			</li><li id="text-5" class="widget widget_text"><h2 class="widget-title">Food Nodes Disciples</h2>			<div class="textwidget"><p><a href="http://www.raymondfaenza.com/">Raymond Faenza</a><br />
<a href="http://fsanges.blogspot.ca/">Felipe Sanges</a></p>
</div>
		</li><li id="text-4" class="widget widget_text"><h2 class="widget-title">Rigging Links</h2>			<div class="textwidget"><p><a href="http://www.leftbulb.blogspot.ca">Maulik Kataria</a><br />
<a href="http://www.charleslooker.com/">Charles Looker</a><br />
<a href="http://www.bradnoble.net/index.html">Brad Noble</a><br />
<a href="http://www.chrisevans3d.com/pub_blog/">Chris Evans</a><br />
<a href="http://www.djx.com.au/blog/">David Johnson</a><br />
<a href="http://nathanhorne.com/">Nathan Horne</a><br />
<a href="http://techarttiki.blogspot.fr/">Adam Pletcher</a><br />
<a href="http://www.jonasavrin.com/">Jonas Avrin</a><br />
<a href="http://www.tylergood.net/">Tyler Good</a><br />
<a href="http://jeremyernst.wordpress.com/">Jeremy Ernst</a><br />
<a href="http://griffinanimation.com/">Ryan Griffin</a><br />
<a href="http://codecg.com/">ANOOP A.K</a></p>
</div>
		</li>		<div class="wpcnt">
			<div class="wpa wpwidesky">
				<span class="wpa-about">Advertisements</span>
				<div class="u">
							<div style="padding-bottom:15px;width:160px;height:600px;">
		<div id="atatags-286348-5ab327fc9a3ae">
			<script type="text/javascript">
			__ATA.cmd.push(function() {
				__ATA.initSlot('atatags-286348-5ab327fc9a3ae',  {
					collapseEmpty: 'before',
					sectionId: '286348',
					width: 160,
					height: 600
				});
			});
			</script>
		</div></div>
				</div>
						<div id="crt-679782997" style="width:160px;height:600px;display:none !important;"></div>
		<script type="text/javascript">
(function(){var c=function(){var a=document.getElementById("crt-679782997");window.Criteo?(a.parentNode.style.setProperty("display","inline-block","important"),a.style.setProperty("display","block","important"),window.Criteo.DisplayAcceptableAdIfAdblocked({zoneid:563902,containerid:"crt-679782997",collapseContainerIfNotAdblocked:!0,callifnotadblocked:function(){a.style.setProperty("display","none","important");a.style.setProperty("visbility","hidden","important")}})):(a.style.setProperty("display","none","important"),a.style.setProperty("visibility","hidden","important"))};if(window.Criteo)c();else{if(!__ATA.criteo.script){var b=document.createElement("script");b.src="//static.criteo.net/js/ld/publishertag.js";b.onload=function(){for(var a=0;a<__ATA.criteo.cmd.length;a++){var b=__ATA.criteo.cmd[a];"function"===typeof b&&b()}};(document.head||document.getElementsByTagName("head")[0]).appendChild(b);__ATA.criteo.script=b}__ATA.criteo.cmd.push(c)}})();
		</script>
			</div>
		</div></ul><!-- end sidebar -->
</div><!-- end container -->


</div><!-- end page-wrap -->
<footer id="colophon" role="contentinfo">
	<div id="site-generator">
		<a href="https://wordpress.com/?ref=footer_website">Create a free website or blog at WordPress.com.</a>
			</div>
</footer>

		<script type="text/javascript">
		//<![CDATA[
		var infiniteScroll = {"settings":{"id":"main","ajaxurl":"https:\/\/circecharacterworks.wordpress.com\/?infinity=scrolling","type":"click","wrapper":true,"wrapper_class":"infinite-wrap","footer":"container","click_handle":"1","text":"Older posts","totop":"Scroll back to top","currentday":"06.10.16","order":"DESC","scripts":[],"styles":[],"google_analytics":false,"offset":0,"history":{"host":"circecharacterworks.wordpress.com","path":"\/page\/%d\/","use_trailing_slashes":true,"parameters":""},"query_args":{"error":"","m":"","p":0,"post_parent":"","subpost":"","subpost_id":"","attachment":"","attachment_id":0,"name":"","pagename":"","page_id":0,"second":"","minute":"","hour":"","day":0,"monthnum":0,"year":0,"w":0,"category_name":"","tag":"","cat":"","tag_id":"","author":"","author_name":"","feed":"","tb":"","paged":0,"meta_key":"","meta_value":"","preview":"","s":"","sentence":"","title":"","fields":"","menu_order":"","embed":"","category__in":[],"category__not_in":[],"category__and":[],"post__in":[],"post__not_in":[],"post_name__in":[],"tag__in":[],"tag__not_in":[],"tag__and":[],"tag_slug__in":[],"tag_slug__and":[],"post_parent__in":[],"post_parent__not_in":[],"author__in":[],"author__not_in":[],"posts_per_page":3,"ignore_sticky_posts":false,"suppress_filters":false,"cache_results":false,"update_post_term_cache":true,"lazy_load_term_meta":true,"update_post_meta_cache":true,"post_type":"","nopaging":false,"comments_per_page":"50","no_found_rows":false,"order":"DESC"},"last_post_date":"2016-10-06 08:57:23","stats":"blog=21589438&v=wpcom&tz=0&user_id=0&subd=circecharacterworks&x_pagetype=infinite-click"}};
		//]]>
		</script>
		<!--  -->
<script type='text/javascript' src='//0.gravatar.com/js/gprofiles.js?ver=201812y'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='https://s1.wp.com/wp-content/mu-plugins/gravatar-hovercards/wpgroho.js?m=1380573781h'></script>

	<script>
		//initialize and attach hovercards to all gravatars
		jQuery( document ).ready( function( $ ) {

			if (typeof Gravatar === "undefined"){
				return;
			}

			if ( typeof Gravatar.init !== "function" ) {
				return;
			}			

			Gravatar.profile_cb = function( hash, id ) {
				WPGroHo.syncProfileData( hash, id );
			};
			Gravatar.my_hash = WPGroHo.my_hash;
			Gravatar.init( 'body', '#wp-admin-bar-my-account' );
		});
	</script>

		<div style="display:none">
	</div>
<script type='text/javascript'>
/* <![CDATA[ */
var HighlanderComments = {"loggingInText":"Logging In\u2026","submittingText":"Posting Comment\u2026","postCommentText":"Post Comment","connectingToText":"Connecting to %s","commentingAsText":"%1$s: You are commenting using your %2$s account.","logoutText":"Log Out","loginText":"Log In","connectURL":"https:\/\/circecharacterworks.wordpress.com\/public.api\/connect\/?action=request","logoutURL":"https:\/\/circecharacterworks.wordpress.com\/wp-login.php?action=logout&_wpnonce=a408f40df4","homeURL":"https:\/\/circecharacterworks.wordpress.com\/","postID":"2365","gravDefault":"identicon","enterACommentError":"Please enter a comment","enterEmailError":"Please enter your email address here","invalidEmailError":"Invalid email address","enterAuthorError":"Please enter your name here","gravatarFromEmail":"This picture will show whenever you leave a comment. Click to customize it.","logInToExternalAccount":"Log in to use details from one of these accounts.","change":"Change","changeAccount":"Change Account","comment_registration":"","userIsLoggedIn":"","isJetpack":"","text_direction":"ltr"};
/* ]]> */
</script>
<script type='text/javascript' src='https://s2.wp.com/_static/??/wp-content/js/jquery/jquery.autoresize.js,/wp-content/mu-plugins/highlander-comments/script.js?m=1516198001j'></script>

	<div id="carousel-reblog-box">
		<form action="#" name="carousel-reblog">
			<textarea id="carousel-reblog-content" name="carousel-reblog-content" placeholder="Add your thoughts here... (optional)"></textarea>
			<label for="carousel-reblog-to-blog-id" id="carousel-reblog-lblogid">Post to</label>
			<select name="carousel-reblog-to-blog-id" id="carousel-reblog-to-blog-id">
						</select>

			<div class="submit">
				<span class="canceltext"><a href="#" class="cancel">Cancel</a></span>
				<input type="submit" name="carousel-reblog-submit" class="button" id="carousel-reblog-submit" value="Reblog Post" />
				<input type="hidden" id="carousel-reblog-blog-id" value="21589438" />
				<input type="hidden" id="carousel-reblog-blog-url" value="https://circecharacterworks.wordpress.com" />
				<input type="hidden" id="carousel-reblog-blog-title" value="circe-characterWorks" />
				<input type="hidden" id="carousel-reblog-post-url" value="" />
				<input type="hidden" id="carousel-reblog-post-title" value="" />
			</div>

			<input type="hidden" id="_wpnonce" name="_wpnonce" value="f3d0413efd" /><input type="hidden" name="_wp_http_referer" value="/" />		</form>

		<div class="arrow"></div>
	</div>
<script type='text/javascript' src='https://s1.wp.com/_static/??-eJzTLy/QTc7PK0nNK9EvyClNz8wr1i+uzCtJrMjITM/IAeKS1CJMEWP94uSizIISoOIM5/yiVL2sYh19yo1yKiotzgioLMnIzwOaaJ9ra2hiZGRsYmRobJIFAFr0QPk='></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://s0.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "https://s0.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?m=1363304414h&amp;ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();

// Infinite scroll support
jQuery( function( $ ) {
	$( document.body ).on( 'post-load', function() {
		SyntaxHighlighter.highlight();
	} );
} );
</script>
<link rel='stylesheet' id='all-css-0-3' href='https://s1.wp.com/wp-content/mu-plugins/carousel/jetpack-carousel.css?m=1481571546h&cssminify=yes' type='text/css' media='all' />
<!--[if lte IE 8]>
<link rel='stylesheet' id='jetpack-carousel-ie8fix-css'  href='https://s1.wp.com/wp-content/mu-plugins/carousel/jetpack-carousel-ie8fix.css?m=1412618825h&#038;ver=20121024' type='text/css' media='all' />
<![endif]-->
<link rel='stylesheet' id='all-css-2-3' href='https://s1.wp.com/wp-content/mu-plugins/tiled-gallery/tiled-gallery.css?m=1443731146h&cssminify=yes' type='text/css' media='all' />
<script type='text/javascript'>
/* <![CDATA[ */
var actionbardata = {"siteID":"21589438","siteName":"circe-characterWorks","siteURL":"http:\/\/circecharacterworks.wordpress.com","icon":"<img alt='' src='https:\/\/s1.wp.com\/i\/logo\/wpcom-gray-white.png' class='avatar avatar-50' height='50' width='50' \/>","canManageOptions":"","canCustomizeSite":"","isFollowing":"","themeSlug":"pub\/parament","signupURL":"https:\/\/wordpress.com\/start\/","loginURL":"https:\/\/circecharacterworks.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fcircecharacterworks.wordpress.com%2F2018%2F03%2F18%2Fpathfrompolysoup-rigging-non-typical-components-with-custom-nodes%2F","themeURL":"","xhrURL":"https:\/\/circecharacterworks.wordpress.com\/wp-admin\/admin-ajax.php","nonce":"0359d4b39b","isSingular":"","isFolded":"","isLoggedIn":"","isMobile":"","subscribeNonce":"<input type=\"hidden\" id=\"_wpnonce\" name=\"_wpnonce\" value=\"a2ab230af8\" \/>","referer":"https:\/\/circecharacterworks.wordpress.com\/","canFollow":"1","feedID":"1808478","statusMessage":"","customizeLink":"https:\/\/circecharacterworks.wordpress.com\/wp-admin\/customize.php?url=https%3A%2F%2Fcircecharacterworks.wordpress.com%2F","i18n":{"view":"View site","follow":"Follow","following":"Following","edit":"Edit","login":"Log in","signup":"Sign up","customize":"Customize","report":"Report this content","themeInfo":"Get theme: Parament","shortlink":"Copy shortlink","copied":"Copied","followedText":"New posts from this site will now appear in your <a href=\"https:\/\/wordpress.com\/\">Reader<\/a>","foldBar":"Collapse this bar","unfoldBar":"Expand this bar","editSubs":"Manage subscriptions","viewReader":"View site in Reader","viewReadPost":"View post in Reader","subscribe":"Sign me up","enterEmail":"Enter your email address","followers":"","alreadyUser":"Already have a WordPress.com account? <a href=\"https:\/\/circecharacterworks.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fcircecharacterworks.wordpress.com%2F2018%2F03%2F18%2Fpathfrompolysoup-rigging-non-typical-components-with-custom-nodes%2F\">Log in now.<\/a>","stats":"Stats"}};
/* ]]> */
</script>
<script type='text/javascript'>
/* <![CDATA[ */
var jetpackCarouselStrings = {"widths":[370,700,1000,1200,1400,2000],"is_logged_in":"","lang":"en","ajaxurl":"https:\/\/circecharacterworks.wordpress.com\/wp-admin\/admin-ajax.php","nonce":"a70ecd25ef","display_exif":"1","display_geo":"1","single_image_gallery":"1","single_image_gallery_media_file":"","background_color":"black","comment":"Comment","post_comment":"Post Comment","write_comment":"Write a Comment...","loading_comments":"Loading Comments...","download_original":"View full size <span class=\"photo-size\">{0}<span class=\"photo-size-times\">\u00d7<\/span>{1}<\/span>","no_comment_text":"Please be sure to submit some text with your comment.","no_comment_email":"Please provide an email address to comment.","no_comment_author":"Please provide your name to comment.","comment_post_error":"Sorry, but there was an error posting your comment. Please try again later.","comment_approved":"Your comment was approved.","comment_unapproved":"Your comment is in moderation.","camera":"Camera","aperture":"Aperture","shutter_speed":"Shutter Speed","focal_length":"Focal Length","comment_registration":"0","require_name_email":"1","login_url":"https:\/\/circecharacterworks.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fcircecharacterworks.wordpress.com%2F2018%2F03%2F18%2Fpathfrompolysoup-rigging-non-typical-components-with-custom-nodes%2F","blog_id":"21589438","local_comments_commenting_as":"<fieldset><label for=\"email\">Email (Required)<\/label> <input type=\"text\" name=\"email\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-email-field\" \/><\/fieldset><fieldset><label for=\"author\">Name (Required)<\/label> <input type=\"text\" name=\"author\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-author-field\" \/><\/fieldset><fieldset><label for=\"url\">Website<\/label> <input type=\"text\" name=\"url\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-url-field\" \/><\/fieldset>","reblog":"Reblog","reblogged":"Reblogged","reblog_add_thoughts":"Add your thoughts here... (optional)","reblogging":"Reblogging...","post_reblog":"Post Reblog","stats_query_args":"blog=21589438&v=wpcom&tz=0&user_id=0&subd=circecharacterworks","is_public":"1","reblog_enabled":""};
/* ]]> */
</script>
<script type='text/javascript' src='https://s2.wp.com/_static/??-eJyVUMsOwjAM+yFKeIoT4ltKFyClS0uTbvD3dEibEIdJ3JzEdpxAn4yLrMgKXqDBjhym59LLAr5GbTEplCuxQKA7CjwKFrxZbgLmGTLxhZj0NYEZrm1aYnO2GVorirkiEzvMmZq6cOr96aDZurvMiZxS5EE0oRm2szkWwQAeNVVnMzZGDbELZQhcvyn9JZ49Ov01HN26eloEK4L6EXzqlFGGwKf2uN5v1qvddnfY+DdPdJ+8'></script>
<script type='text/javascript' src='https://platform.twitter.com/widgets.js?ver=20111117'></script>
<script type='text/javascript' src='https://s2.wp.com/_static/??-eJyVy8EOwiAMANAfslYTHXowfsuAhhRLJaxI/Hu97rTs+A4PR4XwViM1LB2q9MS6oA02owZe5vDy3CJUJlT6UCONrOmYlwPuuXX7sVCENItQ+671X8/yOF9u95Ob3NXlHw12Q+E='></script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script type="text/javascript">
			jQuery.extend( infiniteScroll.settings.scripts, ["jquery-core","jquery-migrate","jquery","mobile-useragent-info","postmessage","jquery_inview","jetpack_resize","spin","jquery.spin","grofiles-cards","wpgroho","jquery.autoresize","highlander-comments","syntaxhighlighter-core","syntaxhighlighter-brush-python","devicepx","jetpack_likes_queuehandler","the-neverending-homepage","wpcom-masterbar-js","wpcom-masterbar-tracks-js","wpcom-actionbar-bar","jetpack-carousel","swfobject","videopress","twitter-widgets","twitter-widgets-infinity","twitter-widgets-pending","tiled-gallery"] );
			jQuery.extend( infiniteScroll.settings.styles, ["wpcom-smileys","jetpack_likes","wordads-global","wordads-parament","the-neverending-homepage","wpcom-core-compat-playlist-styles","wpcom-text-widget-styles","mp6hacks","wpcom-bbpress2-staff-css","parament","jetpack-widget-social-icons-styles","noticons","geo-location-flair","reblogging","a8c-global-print","wpcom-actionbar-bar","h4-global","highlander-comments","highlander-comments-ie7","jetpack-carousel","tiled-gallery","jetpack-carousel-ie8fix"] );
		</script><script src="//stats.wp.com/w.js?56" type="text/javascript" async defer></script>
<script type="text/javascript">
_tkq = window._tkq || [];
_stq = window._stq || [];
_tkq.push(['storeContext', {'blog_id':'21589438','blog_tz':'0','user_lang':'en','blog_lang':'en','user_id':'0'}]);
_stq.push(['view', {'blog':'21589438','v':'wpcom','tz':'0','user_id':'0','subd':'circecharacterworks'}]);
_stq.push(['extra', {'crypt':'UE5XaGUuOTlwaD85flAmcm1mcmZsaDhkV11YdTdvUG14Q2VDQTR4LlUsLi82dU1mai9BMkM9QjRQOXBLb118enZ5ci5OWSY9YyVqP0s3T015MT1bNS5SRFNaVlhkRzk5fkpFRmcmeE5kZ0lnRlZ0PXZUJixRMGJ5M0loMT9MUkJxS3kwVX42LmIxTDRKTmUsN3pqQTdLblJ6SnYvNl1oRH5VNG9jZWxGZixSbUFjcDYxX1ZOLTlNVGg5elEzcCx8LktvZW1xbExFeF9ZeWFEZVIrcVhsQTNjVmhSaEo3QWJVVX4yYmw3JkglK1M='}]);
_stq.push([ 'clickTrackerInit', '21589438', '0' ]);
	</script>
<noscript><img src="https://pixel.wp.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /></noscript>
<script>
if ( 'object' === typeof wpcom_mobile_user_agent_info ) {

	wpcom_mobile_user_agent_info.init();
	var mobileStatsQueryString = "";
	
	if( false !== wpcom_mobile_user_agent_info.matchedPlatformName )
		mobileStatsQueryString += "&x_" + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
	
	if( false !== wpcom_mobile_user_agent_info.matchedUserAgentName )
		mobileStatsQueryString += "&x_" + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
	
	if( wpcom_mobile_user_agent_info.isIPad() )
		mobileStatsQueryString += "&x_" + 'ipad_views' + '=' + 'views';

	if( "" != mobileStatsQueryString ) {
		new Image().src = document.location.protocol + '//pixel.wp.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
	}
	
}
</script>
</body>
</html>