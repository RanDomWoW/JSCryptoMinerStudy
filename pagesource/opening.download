<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en-US">
<head>
<meta http-equiv='Content-Type' content='text/html; charset=windows-1251'>
<meta http-equiv='Content-Language' content='en'>
<link href='//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.css' rel='stylesheet' >
<link href='resize_css/style.css' rel='stylesheet'>
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800,300italic,400italic,600italic,700italic,800italic&subset=latin,cyrillic,cyrillic-ext' rel='stylesheet' type='text/css'>

<title>Resize images and pictures Online! Use our servise - Opening.Download</title>
</head>

<body>
<div class="main-nav-wrapper">
	<div class="wrap">
		<nav>
			<table cellpadding='0' border='0' cellspacing='0'><tr>
				<td style='width: 15%;'><a href="/" class="logo">Opening.Download</a></td>
				<td style='text-align: center;'>
					
				</td>
				<td style='width: 10%; text-align: right;'>
					
				</td></tr>
			</table>
		</nav>
	</div>
</div>

<div class="upload-area">
	<div class="wrap">
		<h2>1. Upload</h2>
		<div class="button-upload" style="margin-top:30px;">
			<span>Upload images</span>
			<div class="grey" style="font-size: 13px;">Click or drag files here</div>
			<input id='fileupload' type='file' name='files[]' multiple>
		</div>
		<div class='upload_warning'>At the same time can be 12 photos to upload the new, delete unnecessary</div>
	</div>
	

	<div style="margin-top:60px;margin-bottom:10px; text-align: center;">



</div>

</div>

<div class='content'>
	<div class='work-area' style='position: relative;'>
		<div id='progress' class='progress'><div class='progress-bar'></div></div>
		
		<div class="wrap">
			<h2>2. Select</h2>
			<div id='uploads'></div>
			<div class='btn-area grey'>To select the uploaded image click on the preview above or click<button class='btn btn-group-action select-all' disabled>Select all</button><button class='btn btn-group-action delete-all' disabled>Delete all</button></div>
		</div>

		<div class="wrap">
			<h2 style='padding-top: 10px;'>3. Resize</h2>
			<div style="max-width: 500px; margin: 0 auto;">
				<form id='options_form' style='margin-top: 40px; margin-bottom: 40px;'>
					<input type='hidden' name='lang' value='en'>
					<div class='slider-area'>
						<span class='options-label' style='margin-right: 5px;'>Width:</span><span id='widthamount'></span>px
						<div id='resizeselect' class='slider'></div>
						<ul class='scale-list' data-slider='#resizeselect'><li style="left: 0%"><span class="scale-tic"></span><span class="scale-label" style="margin-left: -5px;" data-val="30">30</span></li><li style="left: 18.3673%"><span class="scale-tic"></span><span class="scale-label" style="margin-left: -10px;" data-val="300">300</span></li><li style="left: 31.9728%"><span class="scale-tic"></span><span class="scale-label" style="margin-left: -10px;" data-val="500">500</span></li><li style="left: 52.381%"><span class="scale-tic"></span><span class="scale-label" style="margin-left: -10px;" data-val="800">800</span></li><li style="left: 65.9864%"><span class="scale-tic"></span><span class="scale-label" style="margin-left: -15px;" data-val="1000">1000</span></li><li style="left: 86.3946%"><span class="scale-tic"></span><span class="scale-label" style="margin-left: -15px;" data-val="1300">1300</span></li><li style="left: 100%"><span class="scale-tic"></span><span class="scale-label" style="margin-left: -15px;" data-val="1500">1500</span></li></ul>					</div>
					<div class='slider-area'>
						<span class='options-label'>Quality:</span>
						<div id='qualityselect' class='slider'></div>
						<ul class='scale-list' data-slider='#qualityselect'><li style="left: 0%"><span class="scale-tic"></span><span class="scale-label" style="margin-left: -10px;" data-val="1">low</span></li><li style="left: 33.3333%"><span class="scale-tic"></span><span class="scale-label" style="margin-left: -20px;" data-val="2">medium</span></li><li style="left: 66.6667%"><span class="scale-tic"></span><span class="scale-label" style="margin-left: -15px;" data-val="3">high</span></li><li style="left: 100%"><span class="scale-tic"></span><span class="scale-label" style="margin-left: -15px;" data-val="4">best</span></li></ul>					</div>
					<div class='slider-area'>
						<span class='options-label'>File type:</span>
						<div id='formatselect' class='slider'></div>
						<ul class='scale-list' data-slider='#formatselect'><li style="left: 0%"><span class="scale-tic"></span><span class="scale-label" style="margin-left: -35px;" data-val="1">don't change</span></li><li style="left: 50%"><span class="scale-tic"></span><span class="scale-label" style="margin-left: -10px;" data-val="2">JPG</span></li><li style="left: 100%"><span class="scale-tic"></span><span class="scale-label" style="margin-left: -10px;" data-val="3">PNG</span></li></ul>					</div>
					<button id='get_resize' disabled>Resize</button>
				</form>
			</div>
		</div>
		
		<div class='q_overlay'></div>
	</div>
	
	<div class='result-area'>
		<div class="wrap">
			<h2 style='padding-top:30px;'>4. Result</h2>
			<div style="max-width: 500px; margin: 0 auto; text-align: center;">
				<div class='result_tip grey'>To get the result, click on the "Resize" button</div>
				<table id='results' style='width: 100%; margin-bottom: 5px;' cellspacing='0'></table>
				<a href="ssi/download.php?all" class="download download-all" style="display: none; text-transform: none;"></a>
			</div>
		</div>
	</div>
</div>

<div class="help">

	<div class="wrap" style="color: #FFF; padding-top: 10px;">
	<h2>How to change or reduce the size of an image online.</h2>
<p>Opening.Download service is a convenient tool for resizing images online. With a single interface for all devices.</p>
<p>Today for such a simple action as reducing the image you can do without complicated programs for editing the image. Using the online service gives you complete freedom: you work with photos and pictures on any your computer or tablet. And the ability to resize multiple images at the same time saves you time!</br>
Reduce the image online in two steps. Enjoy with pleasure!</p>
<p>Opening.Download service will help to quickly resize the image:</p></br>
<p>First step. Click "Upload images" and select from 1 to 12 images in jpg / png format. You will see thumbnails of the downloaded images - click on the ones you want to change, or click "Select All" to select all images.</p>
<p>The second step. Select the desired resolution in width (in pixels) to which you want to reduce the image, as well as the format (jpg / png) and the quality of the resulting images. Then click "Resize" - the result at the same moment! You will be presented with a list of changed images showing the file sizes. Save the images by clicking "Download".</p>
<p>As you can see, everything is quite simple! And this is not all that allows the online service Opening.Download.</p>
<p>Please note: images are only allowed in jpg / png format, the size of one uploaded image should not exceed 15 MB, at the resolution - no more than 6000 pixels in width or height. In 99% of cases, these restrictions are not relevant.</p>
<p>In addition to increasing or decreasing the resolution of images, drawings, pictures, there are other possibilities that are not obvious at first sight.</p>
<p>Processing a large number of images. The ability to simultaneously resize images at the same size significantly speeds up the process. To reduce several images, just select all, set the desired size in pixels by width and click "Resize". In this way, you can reduce up to 12 images per time. Do not forget to save the entire image by clicking "Download". To process the following image, click on "Delete All" and after loading a new group of images.</p>
<p>Reducing the weight of the image (in megabytes in size). In some cases, the size of the image becomes a limitation, for example, slow Internet or a small amount of memory on the device. In such cases, to reduce the weight of the image, use our service. After clicking on the "Resize" button in the list of processed files, the size of the received files is indicated. Experiment. You can change the quality from high to medium - this will immediately affect the weight of the picture. If you need to change the weight of the image without losing quality, try, leaving in the settings of high quality, reduce the resolution of the image until you are satisfied with the result.</p>
<p>Change the image format. The most common image formats are jpg / png. The service allows you to change the format from jpeg to png and vice versa without loss of quality. It's as easy as reducing the picture: just set the slider with the choice of format in the right place.</p>
<p>Creating avatars. From a favorite image or original picture you often want to make an avatar. It's easy: just reduce the image or drawing to the size that is required for the site.</p>
<p>All these features are available online: the reduction of pictures is extremely fast, you do not have to wait!</p>
Wellcome to <a href="/opening.html">Opening page</a></div>
	
	
</div>


<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js'></script>
<script src='//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js'></script>
<script src='js/jquery.ui.touch-punch.min.js'></script>
<script src='js/jquery.iframe-transport.js'></script>
<script src='js/jquery.fileupload.js'></script>
<script src='js/jquery.fileupload-process.js'></script>
<script src='js/jquery.fileupload-validate.js'></script>
<script src='js/jquery.noty.js'></script>

<script id='UplTemplate' type='template'><div class='upl-item'><img class='upl-thumb' src='{{thumbnail}}' title='{{img_info}}'><button class='upl-remove' data-url='{{deleteUrl}}'></button></div></script>
<script id='ResTemplate' type='template'><tr><td><img class='result-thumbl' src='{{thumbnail}}'></td><td>{{img_info}}</td><td>{{img_size}}KB</td><td>{{img_format}}</td><td><a class='download' href='#'>Download</a></td></tr></script>

<script>

$('#resizeselect').slider({ min: 30, max: 1500, value: 500, slide: function(event, ui){ $('#widthamount').html(ui.value); } });
$('#qualityselect').slider({ min: 1, max: 4, value: 3, slide: $.noop });
$('#formatselect').slider({
	min: 1,
	max: 3,
	value: 1,
	slide: function(event, ui){
		var v = ui.value == 3, $quality_scale = $('.scale-list[data-slider="#qualityselect"]');
		$('#qualityselect').slider( v ? "disable" : "enable");
		v ? $quality_scale.off('click.slider', '.scale-label') : $quality_scale.on('click.slider', '.scale-label', scale_label);
		$quality_scale.toggleClass('scale-disabled', v);
	}
});

$('#widthamount').html($('#resizeselect').slider('value'));

function scale_label(){
	var $this = $(this), $slider = $($this.parents('.scale-list:first').data('slider'));
	$slider.slider({ value: $this.data('val') }).slider('option', 'slide')(null, { value: $slider.slider('value') });
	return false;
}
$('.scale-list').on('click.slider', '.scale-label', scale_label);


$(document).bind('drop dragover', function(e){ e.preventDefault(); });

$('#fileupload').fileupload({
	url: 'ssi/upload.php',
	dropZone: $('.button-upload'),
	dataType: 'json',
	maxFileSize: 15728640,
	minFileSize: 1024,
	maxNumberOfFiles: 10,
	sequentialUploads: true,
	acceptFileTypes: /(\.|\/)(jpe?g|png)$/i,
	formData: { "lang": "en" },
	})
.on('fileuploadchange', function(e, data){
	var res = [], error, error_index, file,
		acceptFileTypes = $(this).fileupload('option', 'acceptFileTypes'),
		max_file_size = $(this).fileupload('option', 'maxFileSize'),
		min_file_size = $(this).fileupload('option', 'minFileSize'),
		messages = $(this).fileupload('option', 'messages'),
		allow_uploads_cnt = $(this).fileupload('option', 'maxNumberOfFiles') - $('#uploads').children().length,
		selected_cnt = data.files.length;

	for( var i = 0; i < selected_cnt; i++ ){
		error = false;
		file = data.files[i];
		if( !(acceptFileTypes.test(file.type) || acceptFileTypes.test(file.name)) ){ error = 'acceptFileTypes'; error_index = 'accept_file_types'; }
		else if( file.size > max_file_size ){ error = 'maxFileSize'; error_index = 'max_file_size'; }
		else if( file.size < min_file_size ){ error = 'minFileSize'; error_index = 'min_file_size'; }
		
		if( !error ){
			res.push(file);
			if( res.length == allow_uploads_cnt ){ break; }
		}
		else{
			show_message('"'+ file.name +'" - '+ messages[error]);
			send_report({ "name": file.name, "size": file.size, "type": file.type.split('/').pop(), "error_index": error_index });
		}
	}
	
	data.files = res;
})
.on('fileuploadstart', function(e, data){
	$('.content').addClass('content-show');
	$('.work-area').show();
	$(this).attr('disabled', 'disabled').parent().addClass('upload-dsbl');
	$('button').attr('disabled', 'disabled');
	$('#progress').css({ opacity: 1 });
})
.on('fileuploadstop', function(e, data){
	var loaded_cnt = $('#uploads').children().length;
	if( loaded_cnt < $(this).fileupload('option', 'maxNumberOfFiles') ){
		$(this).removeAttr('disabled').parent().removeClass('upload-dsbl');
	}
	else{
		$('.upload_warning').show();
	}
	if( loaded_cnt > 0 ){ $('button').removeAttr('disabled'); }
	$('#progress').css({ opacity: 0 }).find('.progress-bar').css('width', 0);
})
.on('fileuploaddone', function(e, data){
	$.each(data.result.files, function(index, file){
		if( !file.error && file.thumbnailUrl ){
			var template = $.trim($('#UplTemplate').html()),
				img_info = file.img_width +' x '+ file.img_height +', '+ (file.size / 1024).toFixed(2) +'KB, '+ file.type.toUpperCase();
			
			$(template.replace(/{{thumbnail}}/ig, file.thumbnailUrl).replace(/{{deleteUrl}}/ig, 'ssi/ajax.php?delfile='+ file.name +'&lang='+ file.lang).replace(/{{img_info}}/ig, img_info))
				.data('name', file.name)
				.addClass('selected')
				.tooltip({
					show: null,
					position: {
						my: "center top",
						at: "center bottom"
					},
					open: function(event, ui){
						ui.tooltip.animate({ top: ui.tooltip.position().top + 10 }, "fast");
					},
					hide: false,
					tooltipClass: "custom-tooltip arrow-top"
				})
				.appendTo($('#uploads'));
		}
		else{ show_message('"'+ file.name +'" - '+ (file.error || data.messages.uploadError)); }
	});
})
.on('fileuploadfail', function (e, data) {
	$.each(data.files, function(index, file){ show_message('"'+ file.name +'" - '+ data.jqXHR.responseText); });
})
.on('fileuploadprocessalways', function (e, data) {
	$.each(data.files, function(index, file){
		if( file.error ){ show_message('"'+ file.name +'" - '+ file.error); }
	});
})
.on('fileuploadprogressall', function (e, data) {
      var progress = parseInt(data.loaded / data.total * 100);
      $('#progress .progress-bar').css('width', progress + '%');
  });


$.ajaxSetup({
	dataType: "json",
	type: "POST"
});

$('#uploads').on('click', '.upl-remove', function(){
	$.ajax({
		url: $(this).data('url'),
		context: $(this),
		beforeSend: function(){
			$('button').attr('disabled', 'disabled');
			$('.q_overlay').show();
		},
		success: function(data){
			if( data.success ){
				$(this).parents('.upl-item:first').remove();
				$('tr', '#results').filter(function(index){ return $(this).data("origName") == data.name; }).remove();
				$('#fileupload').removeAttr('disabled').parent().removeClass('upload-dsbl');
			}
			else{ show_message(data.error); }
		},
		complete: function(){
			$('button').removeAttr('disabled');
			$('.q_overlay, .upload_warning').hide();
			if( $('#uploads').children().length == 0 ){ $('.btn-group-action, #get_resize').attr('disabled', 'disabled'); }
			toogle_result_tip();
		}
	});
	return false;
})
.on('click', '.upl-item', function(){ $(this).toggleClass('selected'); });


$('#get_resize').click(function(){
	$.noty.closeAll();
	var obj = [], selected_items = $('#uploads').find('.selected'),
		items_cnt = selected_items.length,
		resize_options = { 'w': $('#resizeselect').slider("value"), 'q': $('#qualityselect').slider("value"), 't': $('#formatselect').slider("value") };

	if( !items_cnt ){ return show_message('Select images', {killer: true}); }
	$.each(selected_items, function(){ obj.push($(this).data('name')); });
	
	$.ajax({
		url: 'ssi/ajax.php',
		data: { "resize": obj, "options": resize_options, "lang": $('[name=lang]', "#options_form").val() },
		beforeSend: function(){
			$('button').attr('disabled', 'disabled');
			$('.q_overlay').show();
		},
		success: function(data){
			if( !data.error ){
				var container = $('#results'), item, dubl, cont = '';
				for( var i = 0, c = data.res.length; i < c; i++ ){
					dubl = '';
					item = data.res[i];
					if( !item.error ){
						cont = $.trim($('#ResTemplate').html()).replace(/{{thumbnail}}/ig, item.thumbUrl).replace(/{{img_info}}/ig, item.w +' x '+ item.h).replace(/{{img_size}}/ig, (item.size / 1024).toFixed(2)).replace(/{{img_format}}/ig, item.t.toUpperCase());
						cont = $(cont).data({ 'name': item.name, 'origName': item.origName }).find('.download').data('url', item.downloadUrl).end();
						
						dubl = $('tr', container).filter(function(index){ return $(this).data("name") == item.name; });
						dubl.length == 0 ?  cont.appendTo(container) : cont.replaceAll(dubl);
					}
					else{ show_message('"'+ item.origName +'" - '+ item.error); }
				}
				
				$('#uploads .selected').removeClass('selected');
				$('html, body').animate({ scrollTop: $("#options_form").offset().top }, 500);
			}
			else{ show_message(data.error); }
		},
		complete: function(){
			$('button').removeAttr('disabled');
			$('.q_overlay').hide();
			toogle_result_tip();
		}
	});
	
	return false;
});


$('#results').on('click', '.download', function(event){
	event.preventDefault();
	window.location.href = $(this).data('url');
});


function show_message(msg, opt){
	var noty_default = {
		text: '',
		type: 'warning',
		layout: 'top',
		theme: 'someOtherTheme',
		timeout: 5000,
		maxVisible: 5,
		killer: false, 
		animation: { speed: 300 }
	}
	
	noty_default.text = msg;
	for( var key in opt ){
		if( opt.hasOwnProperty(key) ){
			noty_default[key] = opt[key];
		}
	}
	noty(noty_default);
	return false;
}

function send_report(send_data){
	$.post('ssi/ajax.php?send_report', send_data);
}

function toogle_result_tip(){
	var tr = $('tr', '#results').length;
	$('.result_tip').toggle(tr == 0);
	$('.download-all').toggle(tr > 1);
}

$('.select-all').click(function(){
	var items = $('#uploads').find('.upl-item');
	items.toggleClass('selected', (items.not('.selected').length > 0));
});

$('.delete-all').click(function(){
	$.ajax({
		url: 'ssi/ajax.php',
		data: { "delete_all": "" },
		beforeSend: function(){
			$('#fileupload').attr('disabled', 'disabled').parent().addClass('upload-dsbl');
			$('button').attr('disabled', 'disabled');
			$('.q_overlay').show();
		},
		success: function(data){
			if( data.success ){
				$('#uploads, #results').empty();
				$('#fileupload').removeAttr('disabled').parent().removeClass('upload-dsbl');
				$('.upload_warning').hide();
			}
			else{ show_message(data.error); }
		},
		complete: function(){
			$('button').removeAttr('disabled');
			$('.q_overlay').hide();
			if( $('#uploads').children().length == 0 ){ $('.btn-group-action, #get_resize').attr('disabled', 'disabled'); }
			toogle_result_tip();
		}
	});
	return false;
})
</script>

</body>
</html>