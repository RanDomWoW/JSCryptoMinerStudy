<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.0/css/font-awesome.css" rel="stylesheet">
    <link href="https://29a.ch/css/style.cache-972ffa7ebadc6f08.css" rel="stylesheet" type="text/css">
    <link title="news feed" href="https://29a.ch/feed.atom" rel="alternate" type="application/atom+xml">
    <title>Jonas Wagner - 29a.ch</title>
    <meta name="description" content="29a.ch is the personal website of Jonas Wagner.">
    <link rel="canonical" href="https://29a.ch">
    <meta property="og:title" content="Jonas Wagner">
    <meta property="og:url" content="http://29a.ch/">
    <meta property="fb:app_id" content="829086800516580">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="29a.ch by Jonas Wagner">
    <meta name="google-site-verification" content="W2rep1XLz-hNlz_SjxvKbrzzY7Pf01lRfPCj4d_RX4U">
    <script>
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-5205069-2']);
      _gaq.push(['_setDomainName', '29a.ch']);
      _gaq.push(['_setSiteSpeedSampleRate', 50]);
      _gaq.push(['_trackPageview']);
      
    </script>
  </head>
  <body>
    <header>
      <div class="box">
        <h1><a href="https://29a.ch/">29a.ch</a>&nbsp;<small>by Jonas Wagner</small></h1><i onclick="document.querySelector('nav').classList.toggle('show')" class="show-nav icon-reorder"></i>
        <nav>
          <ul>
            <li><a href="https://29a.ch/">home</a></li>
            <li><a href="https://29a.ch/about">about me</a></li>
            <li><a href="https://29a.ch/articles">articles</a></li>
            <li><a href="https://29a.ch/experiments">experiments</a></li>
            <li><a href="https://29a.ch/software">software</a></li>
            <li class="social"><a href="https://twitter.com/29a_ch" title="Follow me on twitter"><i class="icon-twitter"></i></a></li>
            <li class="social"><a href="https://github.com/jwagner" title="View my github profile"><i class="icon-github-alt"></i></a></li>
          </ul>
        </nav>
      </div>
    </header>
    <div id="background">
      <picture class="background-picture">
        <source media="(max-width: 760px)" srcset="data:image/gif;base64,R0lGODlhAQABAAAAACw="><img src="https://29a.ch/css/fractal-2560.cache-748efd5625a8d86f.jpg" srcset="https://29a.ch/css/fractal-1280.cache-196ab3d318550c3f.jpg 1280w,https://29a.ch/css/fractal-1366.cache-4cbceb7352b3d1c3.jpg 1366w,https://29a.ch/css/fractal-1600.cache-4c7064caa18b9b41.jpg 1600w,https://29a.ch/css/fractal-1920.cache-6f7f2e244bef1950.jpg 1920w,https://29a.ch/css/fractal-2560.cache-748efd5625a8d86f.jpg 2560w" height="192">
      </picture>
    </div>
    <main class="home">
      <section class="experiments">
        <h2><i class="icon-beaker"></i>&nbsp;Experiments</h2>
        <div>
          <div class="experiment"><a style="background-image: url(&quot;https://29a.ch/images/screenshot.cache-e2e28156bbdc68ae.png&quot;);" href="//29a.ch/2015/12/06/time-stretching-audio-javascript" title="TimeStretch Player">
              <div class="description">
                <h2>TimeStretch Player</h2>
                <p>A audio player that can change the speed and pitch of audio independently.</p>
              </div></a></div>
          <div class="experiment"><a style="background-image: url(&quot;https://29a.ch/images/image.cache-df96ac0d87828d3a.jpg&quot;);" href="//29a.ch/2015/06/07/javascript-film-emulation" title="Analog Film Emulator">
              <div class="description">
                <h2>Analog Film Emulator</h2>
                <p>A tool to emulate the look of analog film.</p>
              </div></a></div>
          <div class="experiment"><a style="background-image: url(&quot;https://29a.ch/images/image.cache-69be3146ebc7d099.jpg&quot;);" href="//29a.ch/2015/08/16/forensically-photo-forensics-for-the-web" title="Forensically">
              <div class="description">
                <h2>Forensically</h2>
                <p>A set of tools to forensically analyze photos.</p>
              </div></a></div>
          <div class="experiment"><a style="background-image: url(&quot;https://29a.ch/images/teaser-2.cache-f59740696a926460.jpg&quot;);" href="//29a.ch/sandbox/2011/neonflames/" title="Neonflames">
              <div class="description">
                <h2>Neonflames</h2>
                <p>Draw your own nebula right in your browser.</p>
              </div></a></div>
        </div>
        <p><i class="icon-double-angle-right"></i>&nbsp;<a href="https://29a.ch/experiments">View all my experiments</a></p>
      </section>
      <div class="articles">
        <h2>Recent Articles</h2>
        <article>
          <h1><a href="https://29a.ch/2017/06/22/urban-astrophotography">Urban Astrophotography</a></h1>
          <div class="meta">By   <a href="https://29a.ch/about" rel="author">Jonas Wagner</a>,&nbsp;
            <time>2017-06-25</time>
            <div class="social"><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2F29a.ch%2F2017%2F06%2F22%2Furban-astrophotography&amp;text=Urban%20Astrophotography&amp;via=29a_ch" target="_blank" class="twitter-share">Tweet</a><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2F29a.ch%2F2017%2F06%2F22%2Furban-astrophotography" target="_blank" class="facebook-share">Share on Facebook</a>
            </div>
          </div><p><a href="https://29a.ch/2017/06/22/urban-astrophotography/cover.jpg"><img src="https://29a.ch/images/cover.cache-12afbf434c990dab.jpg" alt="Milkyway Core over Zurich"></a>
<small>The milkyway core over Zurich.</small></p>
<p>One of the first lessons in astrophotography is that you better find a dark place,
far away from the lights of civilization if you want to take good pictures of the night sky.</p>
<blockquote style="font-size: 1.2em">Wouldn’t it be beautiful if it was possible to photograph the Milky Way in the middle
of a city?</blockquote>

<p><em>I wanted to try.</em></p>
<h2 id="step-by-step">Step by Step</h2>
<p>I packed my camera onto my bike and rode into night to take a few photos.
This is what they looked like after I developed them using <a href="http://rawtherapee.com/">RawTherapee</a>.</p>
<p><img src="https://29a.ch/images/camera.cache-6ee1b11272a7f1be.jpg" alt="straight out of camera"><br><small>Straigh out of camera</small></p>
<p>When you take a picture of the night sky in a city this is about what you will get.
At least we can see Saturn and a few stars. Let’s try to peek through the haze.</p>
<p>The first step is to collect more light. The more light we capture with our camera
the easier it will be to separate the photons coming from the nebulae in the galactic center from
the noise. We can gather more light by capturing more photographs.
The only problem is of course that the stars are moving.</p>
<p><video autoplay loop muted="" playsinline="" style="width: 100%">
  <source type="video/webm" src="https://29a.ch/2017/06/22/urban-astrophotography/rotation.webm"></source>
  <source type="video/mp4" src="https://29a.ch/2017/06/22/urban-astrophotography/rotation.mp4"></source>
</video>
<br><small>The stars are moving</small></p>
<p>We can fix this problem by aligning the images based on the stars. I used <a href="http://hugin.sourceforge.net/">Hugin</a> for this job.</p>
<p><video autoplay loop muted="" playsinline="" style="width: 100%">
  <source type="video/mp4" src="https://29a.ch/2017/06/22/urban-astrophotography/rotation2.mp4"></source>
  <source type="video/webm" src="https://29a.ch/2017/06/22/urban-astrophotography/rotation2.webm"></source>
</video>
<br><small>The earth slowly turning</small></p>
<p>The next step is to combine (stack) all of the images into one.
The ground will look blurry because it moves but the stars will remain sharp.
I used <a href="https://free-astro.org/index.php/Siril">Siril</a> for this task.</p>
<p><img src="https://29a.ch/images/blur.cache-1fc3e422a7d36e7f.jpg" alt="Sharp night sky with blurred ground"></p>
<p>Now this is where the magic happens. We remove the ground and stars from the image
and then blur it a lot.</p>
<p><img src="https://29a.ch/images/pollution.cache-51005ad97cbce996.jpg" alt="Light pollution"></p>
<p>All this image now contains is the light pollution. Let’s subtract<sup>1</sup> it.</p>
<p><img src="https://29a.ch/images/darkness.cache-d543397044604674.jpg" alt="Night sky with ligh pollution removed"></p>
<p>With all of the light pollution gone darkness remains.</p>
<p>Now we can amplify the faint light in the image, increase contrast and denoise.</p>
<p><img src="https://29a.ch/images/faint-light.cache-09b3267be7135bed.jpg" alt="Faint light amplified"></p>
<p>Finally we add the recovered light back to one of the original images and apply some final tweaks.</p>
<p><img src="https://29a.ch/images/cover.cache-12afbf434c990dab.jpg" alt="Milkyway Core over Zurich"></p>
<h2 id="why-this-is-possible">Why this is possible</h2>
<p>This is possible because of two main reasons.
Light pollution is the result of light being scattered (light bouncing of particles in the air) in the air.
Unlike for instance dense smoke, light pollution does not block the light from the glowing gas clouds of the Milky Way.
This means that the signal is still there just very weak compared to the city lights.</p>
<p>The other reason is that the light pollution, especially higher above the horizon becomes more and more even.
That’s the property that allows us to separate it from the more focused light of the stars and nebula using a high pass filter.</p>
<h2 id="settings-equipment">Settings &amp; Equipment</h2>
<p>In case you are curious about the equipment and settings used:
Nikon D810, Samyang 24/1.4 @ 2.8, ISO 100, 9 pictures @ 20s, combined using winsorized sigma clipping.</p>
<h2 id="conclusions">Conclusions</h2>
<p>The result is definitely noisy and not of the highest quality but still it amazes me, that this is even possible.</p>
<blockquote style="font-size: 1.2em">A consumer grade camera and free software can reveal the center of our home galaxy behind the bright haze of city lights,
showing us our place in our galaxy and the the universe beyond.</blockquote>

<p>I’m curious how much farther I can push this technique with deliberately chosen framing, tweaked settings, more exposures and maybe a <a href="https://en.wikipedia.org/wiki/Didymium">Didymium</a> filter.</p>
<h2 id="further-reading">Further Reading</h2>
<p>If you want to learn about astrophotography in general I recommend you to read <a href="http://www.lonelyspeck.com">lonelyspeck.com</a>.
Ian is a much better writer than I will ever be and he has written a lot of great articles.</p>
<p><sup>1</sup>: In practice you want to use grain extract/merge here since subtraction in most graphics software clips negative values to zero.</p>

          <p class="comment-count"><a href="https://29a.ch/2017/06/22/urban-astrophotography#disqus_thread" data-disqus-identifier="2017/06/22/urban-astrophotography">Comments</a></p>
        </article>
        <article>
          <h1><a href="https://29a.ch/2017/02/05/jpeg-forensics-in-forensically">JPEG Forensics in Forensically</a></h1>
          <div class="meta">By   <a href="https://29a.ch/about" rel="author">Jonas Wagner</a>,&nbsp;
            <time>2017-02-05</time>
            <div class="social"><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2F29a.ch%2F2017%2F02%2F05%2Fjpeg-forensics-in-forensically&amp;text=JPEG%20Forensics%20in%20Forensically&amp;via=29a_ch" target="_blank" class="twitter-share">Tweet</a><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2F29a.ch%2F2017%2F02%2F05%2Fjpeg-forensics-in-forensically" target="_blank" class="facebook-share">Share on Facebook</a>
            </div>
          </div><p>In this brave new world of alternative facts the people need the tools to tell
true from false.</p>
<p><img src="https://29a.ch/images/screenshot.cache-165b41613147b223.png" alt="screenshot"></p>
<p>Well either that or maybe I was just playing with JPEG encoding and some of that crossed
over into my little <a href="https://29a.ch/photo-forensics/">web based photo forensics tool</a> in the form of some new tools. ;)</p>
<h2 id="jpeg-comments">JPEG Comments</h2>
<p>The JPEG file format contains a section for comments marked by 0xFFFE (COM).
These exist in addition to the usual Exif, IPTC and XMP data.
In some cases they can contain interesting information that is either not available
in the other meta data or has been stripped.</p>
<p>For instance images from wikipedia contain a link back to the image:</p>
<blockquote>
<p><code>File source: https://commons.wikimedia.org/wiki/File:...</code></p>
</blockquote>
<p>Older versions of Photoshop also seem to leave a JPEG Comment too</p>
<blockquote>
<p><code>File written by Adobe Photoshop 4.0</code></p>
</blockquote>
<p>Some versions of libgd (commonly used in PHP web applications) seem to leave
comments indicating the version of the library used and the quality the image was saved at:</p>
<blockquote>
<p><code>CREATOR: gd-jpeg v1.0 (using IJG JPEG v62), quality = 90</code></p>
</blockquote>
<p>The <a href="https://29a.ch/photo-forensics/">JPEG Analysis in Forensically</a> allows you to view these.</p>
<h2 id="quantization-tables">Quantization Tables</h2>
<p>This is probably the most interesting bit of information revealed by this new tool
in <a href="https://29a.ch/photo-forensics/">Forensically</a>.</p>
<p>A basic understanding of how JPEG works can help in understanding this tool so I will try to give you some intuition using the noble art of hand waving.</p>
<p>If you already understand JPEG you should probably skip over this gross oversimplification.</p>
<p>JPEG is in general a lossy image compression format. It achieves good compression rates
by discarding some of the information contained in the original image.</p>
<p>For this compression the image is divided in 8x8 pixel blocks.
Rather than storing the individual pixel values for each of the 64 pixels in the block directly JPEG saves how much they are like one of 64 fixed “patterns” (coefficients).
If these patterns are chosen in the right way this
transform is still essentially lossless (except for rounding errors)
meaning you can back the original image by combining these patterns.</p>
<h4 id="jpeg-patterns">JPEG Patterns</h4>
<p><img src="https://29a.ch/2017/02/05/jpeg-forensics-in-forensically/DCT-8x8.png" alt=""><br><small>JPEG DCT Coefficients by <a href="https://en.wikipedia.org/wiki/Discrete_cosine_transform#/media/File:DCT-8x8.png">Devcore</a> (Public Domain)</small></p>
<p>Now that the image is expressed in terms of these patterns JPEG can selectively discard some of the detail in the image.</p>
<p>How much information about which pattern is discarded is defined in a set of tables that is stored inside of each JPEG image.
These tables are called quantization tables.</p>
<h4 id="example-quantization-table-for-quality-95">Example quantization table for quality 95</h4>
<p><img src="https://29a.ch/2017/02/05/jpeg-forensics-in-forensically/q-table.png" alt="example jpeg quantization table"></p>
<p>There are some suggestions in the JPEG standard on how to calculate these tables for a given quality value (1-99). As it turns out not everyone is using these same tables and quality values.</p>
<p>This is good for us as it means that by looking at the quantization tables used in a JPEG image we can learn something about the device that created the JPEG image.</p>
<h4 id="identifying-manipulated-images-using-jpeg-quantization-tables">Identifying manipulated images using JPEG quantization tables</h4>
<p>Most computer software and internet services use the standard quantization tables. The very notable exception to this rule are Adobe products, namely Photoshop. This means that we can <strong>detect images that have been last saved using Photoshop</strong> just by looking at their quantization tables.</p>
<p>Many digital camera manufacturers also have their own secret sauce for creating quantization tables.
Meaning that by comparing the quantization tables between different images taken with the same type of camera and setting we can identify whether an image was potentially created by that camera or not.</p>
<h4 id="automatic-identification-of-quantization-tables">Automatic identification of quantization tables</h4>
<p>Forensically currently automatically identifies quantization tables that have been created according to the standard. In that case it will display <code>Standard JPEG Table Quality=95</code>.</p>
<p>It does also automatically recognize some of the quantization tables used by photoshop.
In this case it will display <code>Photoshop quality=85</code>.</p>
<p><strong>I’m missing a complete set of sample images for older photoshop versions using the 0-12 quality scale. If you happen to have one and would be willing to share it please let me know.</strong></p>
<p>If the quantization table is not recognized it will output <code>Non Standard JPEG Table, closest quality=82</code> or <code>Unknown Table</code>.</p>
<h4 id="summary">Summary</h4>
<p>JPEG images contain tables that specify how the image was compressed. Different software and devices use different quantization tables therefore by looking at the quantization tables we can learn something about the device or software that saved the image.</p>
<h4 id="additional-resources">Additional Resources</h4>
<ul>
<li>Presentation <a href="https://dfrws.org/sites/default/files/session-files/pres-using_jpeg_quantization_tables_to_identify_imagery_processed_by_software.pdf">Using JPEG Quantization Tables to Identify Imagery Processed by Software</a> by Jesse Kornblum</li>
<li>Paper <a href="https://www.dfrws.org/sites/default/files/session-files/paper-using_jpeg_quantization_tables_to_identify_imagery_processed_by_software.pdf">Using JPEG Quantization Tables to Identify Imagery
Processed by Software</a> by Jesse Kornblum</li>
<li><a href="http://www.ists.dartmouth.edu/library/204.pdf">Digital Image Ballistics from JPEG Quantization</a> by Hany Farid</li>
</ul>
<h2 id="structural-analysis">Structural Analysis</h2>
<p>In addition to the quantization tables the order of the different sections (markers) of a JPEG image also reveal detail about it’s creation. In short images that were created in the same way should in general have the same structure. If they don’t it’s an indication that the image may have been tampered with.</p>
<h2 id="string-extraction">String Extraction</h2>
<p>Sometimes images contain (meta) data in odd places.
A simple way to find these is to scan the image for sequences of sensible characters. A traditional tool to do this is the <a href="https://en.wikipedia.org/wiki/Strings_(Unix">strings</a> program in Unix-like operating systems.</p>
<p>For example I’ve found images that have been edited with Lightroom that contained a complete xml description of all the edits done to the image hidden in the XMP metadata.</p>
<h4 id="facebook-meta-data">Facebook Meta Data</h4>
<p>When using this tool on an image downloaded from facebook one will often find a string like</p>
<blockquote>
<p><code>FBMD01000a9...</code></p>
</blockquote>
<p>From what I can tell this string is present in images that are uploaded via the web interface.
A quick google does not reveal much about it’s contents. But it’s presence is a good indicator that an image came from facebook.</p>
<p>I might add a ‘facebook detector’ that looks for the presence &amp; structure of these fields in the future.</p>
<p>Poke around using these new tools and see what you can find! :)</p>

          <p class="comment-count"><a href="https://29a.ch/2017/02/05/jpeg-forensics-in-forensically#disqus_thread" data-disqus-identifier="2017/02/05/jpeg-forensics-in-forensically">Comments</a></p>
        </article>
        <article>
          <h1><a href="https://29a.ch/2016/08/11/principal-component-analysis-for-photo-forensics">Principal Component Analysis for Photo Forensics</a></h1>
          <div class="meta">By   <a href="https://29a.ch/about" rel="author">Jonas Wagner</a>,&nbsp;
            <time>2016-08-11</time>
            <div class="social"><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2F29a.ch%2F2016%2F08%2F11%2Fprincipal-component-analysis-for-photo-forensics&amp;text=Principal%20Component%20Analysis%20for%20Photo%20Forensics&amp;via=29a_ch" target="_blank" class="twitter-share">Tweet</a><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2F29a.ch%2F2016%2F08%2F11%2Fprincipal-component-analysis-for-photo-forensics" target="_blank" class="facebook-share">Share on Facebook</a>
            </div>
          </div><p>As mentioned earlier I have been playing around with <a href="https://en.wikipedia.org/wiki/Principal_component_analysis">Principal Component Analysis</a> (PCA)
for photo forensics. The results of this have now landed in my <a href="https://29a.ch/photo-forensics/#pca">Photo Forensics Tool</a>.</p>
<p>In essence <em>PCA</em> offers a different perspective on the data which allows us to find <a href="https://en.wikipedia.org/wiki/Outlier">outliers</a> more easily.
For instance colors that just don’t quite fit into the image will often be more apparent
when looking at the principal components of an image.
Compression artifacts do also tend to be far more visible, especially in the
second and third principal components. Now before you fall asleep, let me give you an example.</p>
<h2 id="example">Example</h2>
<p>This is a photo that I recently took:</p>
<p><a href="https://www.flickr.com/photos/80225884@N06/28266828992"><img src="https://29a.ch/images/photo.cache-3a4bddd3aa8bc899.jpg" alt="Photo of a Sunset"></a></p>
<p>To the naked eye this photo does not show any clear signs of manipulation.
Let’s see what we can find by looking at the principal components.</p>
<h2 id="first-principal-component">First Principal Component</h2>
<p><img src="https://29a.ch/images/pca1.cache-f18f53887dd88b48.jpg" alt="First principal component"></p>
<p>Still nothing suspicious, let’s check the second one:</p>
<h2 id="second-principal-component">Second Principal Component</h2>
<p><img src="https://29a.ch/images/pca2.cache-21a4cfdbf9e52348.gif" alt="Second principal component"></p>
<p>And indeed this is where I have removed an insect flying in front of the lens
using the <a href="https://daisy.users.greyc.fr/papers/2013/SA/">inpainting algorithm</a> algorithm (content aware fill in photoshop speak) provided by G’MIC.
If you are interested Pat David has a nice <a href="http://blog.patdavid.net/2014/02/getting-around-in-gimp-gmic-inpainting.html">tutorial on how to use this</a>
in the GIMP.</p>
<h2 id="resistance-to-compression">Resistance to Compression</h2>
<p><img src="https://29a.ch/images/compressed.cache-2887129a63dd8b09.jpg" alt="Second principal component"></p>
<p>This technique does still work with more heavily compressed images.
To illustrate this I have run the same analysis I did above on the smaller &amp; more compressed
version of the photo used in this article rather than the original.
As you can clearly see the anomaly caused by the manipulation is still present
and quite clear but not as clear as when analyzing a less compressed version of the image.
You can also see that the PCA is quite good at revealing the artifacts caused by (re)compression.</p>
<h2 id="further-reading">Further Reading</h2>
<p>If you found this interesting you should consider reading my article <a href="https://29a.ch/2016/07/08/black-white-photo-pca/">Black and White Conversion using PCA</a>
which introduces a tool which applies the very same techniques to create beautiful black and white conversions of photographs.</p>
<p>If you want another image to play with try the one in this
<a href="https://hackerfactor.com/blog/index.php?/archives/322-Body-By-Victoria.html">post</a>
by Neal Krawetz is interesting. It can be quite revealing. :)</p>

          <p class="comment-count"><a href="https://29a.ch/2016/08/11/principal-component-analysis-for-photo-forensics#disqus_thread" data-disqus-identifier="2016/08/11/principal-component-analysis-for-photo-forensics">Comments</a></p>
        </article>
        <article>
          <h1><a href="https://29a.ch/2016/08/04/ditherlicious-1-bit-image-dithering">Ditherlicious - 1 Bit Image Dithering</a></h1>
          <div class="meta">By   <a href="https://29a.ch/about" rel="author">Jonas Wagner</a>,&nbsp;
            <time>2016-08-04</time>
            <div class="social"><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2F29a.ch%2F2016%2F08%2F04%2Fditherlicious-1-bit-image-dithering&amp;text=Ditherlicious%20-%201%20Bit%20Image%20Dithering&amp;via=29a_ch" target="_blank" class="twitter-share">Tweet</a><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2F29a.ch%2F2016%2F08%2F04%2Fditherlicious-1-bit-image-dithering" target="_blank" class="facebook-share">Share on Facebook</a>
            </div>
          </div><p>While experimenting with <a href="https://29a.ch/2016/07/08/black-white-photo-pca">Black and White Conversion using PCA</a>
I also investigated dithering algorithms and played with those.
I found that <a href="https://en.wikipedia.org/wiki/Dither#Algorithms">Stucki Dithering</a> would yield rather pleasant results.
So I created a little application for just that:
<a href="https://29a.ch/ditherlicious/">Ditherlicious</a>.</p>
<div style="overflow: hidden;height:512px">
<a href="https://29a.ch/ditherlicious/"><img alt="screenshot" style="max-width:none" src="https://29a.ch/2016/08/04/ditherlicious-1-bit-image-dithering/screenshot.png"></a>
</div>

<p>Open <a href="https://29a.ch/ditherlicious/">Ditherlicious</a></p>
<div style="overflow: hidden;">
I find that it works really nicely on high key photographs like this:
<a href="https://www.flickr.com/photos/tuncaycoskun/16683939452"><img alt="example" style="max-width:none" src="https://29a.ch/2016/08/04/ditherlicious-1-bit-image-dithering/example.png"></a>
</div>

<p>Photo by <a href="https://www.flickr.com/photos/tuncaycoskun/16683939452">Tuncay</a> (CC BY)</p>
<p>I hope you enjoy playing with it. :)</p>

          <p class="comment-count"><a href="https://29a.ch/2016/08/04/ditherlicious-1-bit-image-dithering#disqus_thread" data-disqus-identifier="2016/08/04/ditherlicious-1-bit-image-dithering">Comments</a></p>
        </article>
        <article>
          <h1><a href="https://29a.ch/2016/07/08/black-white-photo-pca">Black and White Conversion using PCA</a></h1>
          <div class="meta">By   <a href="https://29a.ch/about" rel="author">Jonas Wagner</a>,&nbsp;
            <time>2016-07-08</time>
            <div class="social"><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2F29a.ch%2F2016%2F07%2F08%2Fblack-white-photo-pca&amp;text=Black%20and%20White%20Conversion%20using%20PCA&amp;via=29a_ch" target="_blank" class="twitter-share">Tweet</a><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2F29a.ch%2F2016%2F07%2F08%2Fblack-white-photo-pca" target="_blank" class="facebook-share">Share on Facebook</a>
            </div>
          </div><p>I have been hacking on my <a href="https://29a.ch/photo-forensics/">photo forensics tool</a> lately.
I found a
<a href="http://www.cs.dartmouth.edu/farid/downloads/tutorials/digitalimageforensics.pdf">few</a>
<a href="https://www.hackerfactor.com/papers/bh-usa-07-krawetz-wp.pdf">references</a>
that suggested that performing <a href="https://en.wikipedia.org/wiki/Principal_component_analysis">PCA</a> on the colors of an image might reveal interesting information hidden to the naked eye.
When implementing this feature I noticed that it did a quite good job at doing black &amp; white conversions of photos.
Thinking about this it does actually make some sense, the first principal component
maximizes the variance of the values. So it should result in a wide tonal range in the resulting photograph.
This led me to develop a tool to explore this idea in more detail.</p>
<p>This experimental tool is now available for you to play with:<br> <a href="https://29a.ch/sandbox/2016/monochrome-photo-pca/">29a.ch/sandbox/2016/monochrome-photo-pca/</a>.</p>
<p>To give you a quick example let’s start with one of my own photographs:
<a href="https://29a.ch/sandbox/2016/monochrome-photo-pca/"><img src="https://29a.ch/images/original.cache-89817ff50ec06757.jpg" alt="original photo"></a></p>
<p>While the composition with so much empty space is debatable,
I find this photo fairly good example of an image where a straight luminosity conversion fails.
This is because the really saturated colors in the sky look bright/intense even if the straight
up luminosity values do not suggest that.</p>
<p><div>
<img src="https://29a.ch/images/example.cache-13afb7abee4948ff.jpg" onmouseover="this.nextElementSibling.style.display=&apos;block&apos;;this.style.display=&apos;none&apos;;" onclick="this.onmouseover()" alt="pca conversion">
<img src="https://29a.ch/images/luminosity.cache-b809907d41d6df98.jpg" onmouseout="this.previousElementSibling.style.display=&apos;block&apos;;this.style.display=&apos;none&apos;;" style="display:none" onclick="this.onmouseout()" alt="luminosity conversion">
</div>
<em>Hover it to see the results of a straight luminosity conversion instead.</em></p>
<p>In this case the PCA conversion does (in my opinion) a better job at reflecting the tonality in the sky.
I’d strongly suggest that you experiment with <a href="https://29a.ch/sandbox/2016/monochrome-photo-pca/">the tool</a> yourself.</p>
<p>If you want a bit more detail on how exactly the conversions work please have a look at the <a href="https://29a.ch/sandbox/2016/monochrome-photo-pca/#help">help page</a>.</p>
<p>Do I think this is the best technique for black and white conversions? No.
You will always be able to get better results by manually tweaking the conversion
to fit your vision. Is it an interesting result? I’d say so.</p>

          <p class="comment-count"><a href="https://29a.ch/2016/07/08/black-white-photo-pca#disqus_thread" data-disqus-identifier="2016/07/08/black-white-photo-pca">Comments</a></p>
        </article>
        <article>
          <h1><a href="https://29a.ch/2016/06/25/smartcrop-1">Smartcrop.js 1.0</a></h1>
          <div class="meta">By   <a href="https://29a.ch/about" rel="author">Jonas Wagner</a>,&nbsp;
            <time>2016-06-25</time>
            <div class="social"><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2F29a.ch%2F2016%2F06%2F25%2Fsmartcrop-1&amp;text=Smartcrop.js%201.0&amp;via=29a_ch" target="_blank" class="twitter-share">Tweet</a><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2F29a.ch%2F2016%2F06%2F25%2Fsmartcrop-1" target="_blank" class="facebook-share">Share on Facebook</a>
            </div>
          </div><p><a href="https://github.com/jwagner/smartcrop.js"><img src="https://29a.ch/images/smartcrop.cache-63ec3389ce748afb.jpg" alt="smartcrop illustration"></a></p>
<p>I’ve just released version 1.0 of <a href="https://github.com/jwagner/smartcrop.js">smartcrop.js</a>.
Smartcrop.js is a javascript library I wrote to perform smart image cropping,
mainly for generating good thumbnails.
The new version includes much better support for node.js by dropping the canvas dependency
(via <a href="https://github.com/jwagner/smartcrop-gm">smartcrop-gm</a>
and <a href="https://github.com/jwagner/smartcrop-sharp">smartcrop-sharp</a>)
as well as support for face detection by providing annotations.
The API has been cleaned up a little bit and is now using Promises.</p>
<p>Another little takeaway from this release is that I should set up CI even for my little
open source projects. I come to this conclusion after having created a
dependency mess using <code>npm link</code> locally which lead to everything working
fine on my machine but the published modules being broken. I’ve already set
up travis for <a href="https://github.com/jwagner/smartcrop-gm">smartcrop-gm</a>,
<a href="https://github.com/jwagner/smartcrop-sharp">smartcrop-sharp</a> and
<a href="https://github.com/jwagner/simplex-noise.js">simplex-noise.js</a>.
More of my projects are likely to follow.</p>

          <p class="comment-count"><a href="https://29a.ch/2016/06/25/smartcrop-1#disqus_thread" data-disqus-identifier="2016/06/25/smartcrop-1">Comments</a></p>
        </article>
        <article>
          <h1><a href="https://29a.ch/2016/03/08/normalmap-javascript-lighting-effects">Normalmap.js Javascript Lighting Effects</a></h1>
          <div class="meta">By   <a href="https://29a.ch/about" rel="author">Jonas Wagner</a>,&nbsp;
            <time>2016-03-13</time>
            <div class="social"><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2F29a.ch%2F2016%2F03%2F08%2Fnormalmap-javascript-lighting-effects&amp;text=Normalmap.js%20Javascript%20Lighting%20Effects&amp;via=29a_ch" target="_blank" class="twitter-share">Tweet</a><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2F29a.ch%2F2016%2F03%2F08%2Fnormalmap-javascript-lighting-effects" target="_blank" class="facebook-share">Share on Facebook</a>
            </div>
          </div><p><img src="https://29a.ch/images/logo.cache-c9ba0406cddcb28b.png" alt="Logo">
Back in 2010 I did a <a href="https://29a.ch/2010/3/24/normal-mapping-with-javascript-and-canvas-tag">little experiment</a> with <a href="http://wiki.polycount.com/wiki/Normal_map">normal mapping</a> and the canvas element.
The normal mapping technique makes it possible to create interactive lighting effects based on textures.
Looking for an excuse to dive into computer graphics again,
I created a new version of this demo.</p>
<p>This time I used WebGL Shaders and a more advanced physically inspired material
system based on publications by
<a href="http://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_notes_v2.pdf">Epic Games</a>
and <a href="https://disney-animation.s3.amazonaws.com/library/s2012_pbs_disney_brdf_notes_v2.pdf">Disney</a>.
I also implemented FXAA 3.11 to smooth out some of the aliasing produced by the normal maps.
The results of this experiment are now available as a library called <a href="https://github.com/jwagner/normalmap.js/">normalmap.js</a>. Check out the demos.
It’s <strong>a lot faster</strong> and better looking than the old canvas version. Maybe you find a use for it. :)</p>
<h2 id="demos">Demos</h2>
<p>You can view larger and sharper versions of these demos on <a href="https://29a.ch/sandbox/2016/normalmap.js/">29a.ch/sandbox/2016/normalmap.js/</a>.</p>
<p><iframe style="width:100%;height:800px;" data-lazy-src="https://29a.ch/sandbox/2016/normalmap.js/#embed"></iframe>
You can get the source code for this library on <a href="https://github.com/jwagner/normalmap.js/">github</a>.</p>
<h2 id="future">Future</h2>
<p>I plan to create some more demos as well as tutorials on creating normalmaps in the future.</p>

          <p class="comment-count"><a href="https://29a.ch/2016/03/08/normalmap-javascript-lighting-effects#disqus_thread" data-disqus-identifier="2016/03/08/normalmap-javascript-lighting-effects">Comments</a></p>
        </article>
        <article>
          <h1><a href="https://29a.ch/2015/12/28/lets-encrypt">Let's encrypt 29a.ch</a></h1>
          <div class="meta">By   <a href="https://29a.ch/about" rel="author">Jonas Wagner</a>,&nbsp;
            <time>2015-12-28</time>
            <div class="social"><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2F29a.ch%2F2015%2F12%2F28%2Flets-encrypt&amp;text=Let's%20encrypt%2029a.ch&amp;via=29a_ch" target="_blank" class="twitter-share">Tweet</a><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2F29a.ch%2F2015%2F12%2F28%2Flets-encrypt" target="_blank" class="facebook-share">Share on Facebook</a>
            </div>
          </div><p>I migrated this website HTTPS using certificates by <a href="https://letsencrypt.org/">Let’s Encrypt</a>.
This has several benefits. The one I’m most excited about is being able to use
<a href="http://www.html5rocks.com/en/tutorials/service-worker/introduction/">Service Workers</a> to provide offline support
for my little apps.</p>
<p><a href="https://letsencrypt.org/"><img src="https://29a.ch/2015/12/28/lets-encrypt/lets-encrypt-logo.svg" alt="Let&apos;s Encrypt"></a></p>
<p><a href="https://letsencrypt.org/">Let’s Encrypt</a> is an amazing new certificate authority which
allows you to install a SSL/TLS certificate <em>automatically</em> and for <em>free</em>.
This means getting a certificate installed on your server can be as little work as running a command on your server:</p>
<p><code>./letsencrypt-auto --apache</code></p>
<p>The service is currently still in beta but as you can hopefully see the certificates it produces are working just fine.
I encourage you to give it a try.</p>
<p><strong>If anything on this website got broken because of the move to HTTPS, please let me know!</strong></p>

          <p class="comment-count"><a href="https://29a.ch/2015/12/28/lets-encrypt#disqus_thread" data-disqus-identifier="2015/12/28/lets-encrypt">Comments</a></p>
        </article>
        <p><i class="icon-double-angle-right"></i>&nbsp;<a href="https://29a.ch/articles/">View &amp; search all my articles</a></p>
      </div>
    </main>
    <script>
      var disqus_shortname = '29a';
      (function() {
       var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
       dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
       (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
       })();
    </script>
    <footer class="links">
      <ul>
        <li><i class="icon-envelope"></i>&nbsp;<a href="mailto:jonas@29a.ch">jonas@29a.ch</a></li>
        <li><i class="icon-github-alt"></i>&nbsp;<a href="https://github.com/jwagner" rel="me">jwagner</a></li>
        <li><i class="icon-twitter"></i>&nbsp;<a href="https://twitter.com/29a_ch" rel="me">@29a_ch</a></li>
        <li><i class="icon-google-plus"></i>&nbsp;<a href="https://plus.google.com/107896782168573495211/" rel="me">Jonas Wagner</a></li>
        <li><i class="icon-linkedin"></i>&nbsp;<a href="http://ch.linkedin.com/pub/jonas-wagner/11/812/175" rel="me">Linkedin</a></li>
        <li><i class="icon-flickr"></i>&nbsp;<a href="https://www.flickr.com/photos/80225884@N06/">Flickr</a></li>
      </ul>
      <ul>
        <li><i class="icon-camera"></i>&nbsp;<a href="/film-emulator/" title="Free online analog photo film simulator">Film Emulator</a></li>
        <li><i class="icon-play"></i>&nbsp;<a href="/timestretch/" title="Free online mp3 time stretching app">Timestretch Player</a></li>
        <li><i class="icon-search"></i>&nbsp;<a href="/forensically/" title="Free online photo forensics tool">Photo Forensics</a></li>
        <li><i class="icon-fire"></i>&nbsp;<a href="/sandbox/2011/neonflames/" title="Free online space nebula drawing app">Neon Flames</a></li>
      </ul>
    </footer>
    <script src="https://29a.ch/js/main.cache-8b1b42b9a6673513.js"></script>
    <script src="//www.google-analytics.com/ga.js" async defer></script>
  </body>
</html>