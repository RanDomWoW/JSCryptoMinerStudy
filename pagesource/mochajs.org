<!DOCTYPE html><html lang="en" data-version="v4.0.1-485-g19b764d-dirty"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Mocha - the fun, simple, flexible JavaScript test framework</title><!--[if lt IE 8]><link rel="stylesheet" href="static/bundle-571.2a1c7c27bc.css"><![endif]--><!--[if gte IE 8]><!--><style>/*! normalize.css v4.1.1 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:16px/1.6 Helvetica Neue,Helvetica,Arial,sans-serif}body{color:#2c2c2c;border-top:2px solid #ddd}@keyframes fadein{0%{opacity:0}to{opacity:1}}@keyframes slideright{0%{transform:translateX(-45px)}to{transform:translateX(0)}}#content,header{max-width:920px;margin:0 auto;padding-left:30px;padding-right:30px}header{padding-top:20px}#content{padding-bottom:60px}#_header h1{margin-top:0;margin-left:-19px;opacity:0;animation:fadein 1s forwards}#tag{color:#c29d7f;font-weight:100;font-size:30px;margin-top:-158px;margin-left:185px;margin-bottom:125px;letter-spacing:2px;animation:fadein 1s forwards,slideright 1s forwards}#tag em{font-style:normal}nav.badges a+a{margin-left:3px}.image-list{overflow:hidden}.image-list a{float:left;margin:6px}.image-list a img{display:block;height:64px}.faded-images img{opacity:0;transition:opacity .3s}.faded-images.is-loaded img{opacity:1}#_backers a img{width:64px;background:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2030.9%2030.9%22%20height%3D%2264%22%3E%3Cpath%20fill%3D%22%237FADF2%22%20d%3D%22M15.5%200C6.9%200%200%206.9%200%2015.5c0%204.2%201.7%208%204.4%2010.8.3.3.5.5.8.7.3.2.5.5.8.7%202.6%202%205.9%203.3%209.5%203.3%203.6%200%206.9-1.2%209.5-3.3.3-.2.5-.4.8-.7.3-.2.5-.5.8-.7%202.7-2.8%204.4-6.6%204.4-10.8C30.9%206.9%2024%200%2015.5%200zm0%2029.4c-3.4%200-6.4-1.2-8.8-3.2%201.2-2.2%203.3-3.9%205.8-4.7.4-.1.7-.5.7-.9s-.2-.8-.5-1c-1.9-1.1-3.2-3.1-3.2-5.3%200-3.3%202.7-6%206-6s6%202.7%206%206c0%202.2-1.2%204.2-3.2%205.3-.4.2-.6.6-.5%201%200%20.4.3.7.7.9%202.5.8%204.6%202.5%205.8%204.7-2.4%202-5.5%203.2-8.8%203.2zm10.3-4.6c-1.2-1.9-2.9-3.5-4.9-4.5%201.6-1.5%202.6-3.6%202.6-5.9%200-4.4-3.6-8-8-8s-8%203.6-8%208c0%202.3%201%204.4%202.6%205.9-2.1%201-3.8%202.6-4.9%204.5C3%2022.3%201.6%2019%201.6%2015.4c0-7.7%206.3-14%2014-14s14%206.3%2014%2014c-.2%203.7-1.6%206.9-3.8%209.4z%22%2F%3E%3C%2Fsvg%3E") 50% no-repeat}h2{margin-top:80px;font-weight:400;border-bottom:1px solid #ddd}h2,h3{letter-spacing:1px;text-transform:uppercase}h3{font-weight:200;border-bottom:1px solid #eee;margin-top:40px}h3>code{text-transform:none;font-size:14px}#content>p:first-child{font-size:20px;font-weight:200;letter-spacing:1px}a{color:#8d6748}a:hover{color:#717171}ul{margin-top:20px;padding:0 15px;column-gap:30px;column-count:2;box-sizing:content-box}ul li{margin-top:5px;list-style:none;border-bottom:1px solid #eee;padding:5px 0;break-inside:avoid}code{font:14px monaco,monospace;line-height:1.8}pre{margin:20px 0;padding:20px;border:1px solid #ddd;border-bottom-color:#ccc;background-color:#f3f3f3;border-radius:3px;box-shadow:inset 0 0 10px #ddd;overflow-x:auto}img.screenshot{display:block;margin:30px auto;border-radius:3px;box-shadow:0 3px 10px #dedede,0 1px 5px #888;max-width:100%}footer{background-color:#eee;padding:50px 0;text-align:right;border-top:1px solid #ddd}footer span{display:block;margin-right:30px;color:#888;font-size:.8em}@media (max-width:600px){#tag{margin-top:0;margin-left:0;margin-bottom:0}ul{column-count:1}pre{padding:10px;margin:20px -11px}}blockquote{padding:10px;border-left:1px solid #eee}.highlight .hll{background-color:#ffc}.highlight .c{color:#998;font-style:italic}.highlight .err{color:#a61717;background-color:#e3d2d2}.highlight .k,.highlight .o{font-weight:700}.highlight .cm{color:#998;font-style:italic}.highlight .cp{color:#999;font-weight:700}.highlight .c1{color:#998;font-style:italic}.highlight .cs{color:#999;font-weight:700;font-style:italic}.highlight .gd{color:#000;background-color:#fdd}.highlight .ge{font-style:italic}.highlight .gr{color:#a00}.highlight .gh{color:#999}.highlight .gi{color:#000;background-color:#dfd}.highlight .go{color:#888}.highlight .gp{color:#555}.highlight .gs{font-weight:700}.highlight .gu{color:#aaa}.highlight .gt{color:#a00}.highlight .kc,.highlight .kd,.highlight .kn,.highlight .kp,.highlight .kr,.highlight .kt{font-weight:700}.highlight .kt{color:#458}.highlight .m{color:#099}.highlight .s{color:#b84}.highlight .na{color:teal}.highlight .nb{color:#999}.highlight .nc{color:#458;font-weight:700}.highlight .no{color:teal}.highlight .ni{color:purple}.highlight .ne,.highlight .nf{color:#900;font-weight:700}.highlight .nn{color:#555}.highlight .nt{color:navy}.highlight .nv{color:teal}.highlight .ow{font-weight:700}.highlight .w{color:#bbb}.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:#099}.highlight .s2,.highlight .sb,.highlight .sc,.highlight .sd,.highlight .se,.highlight .sh,.highlight .si,.highlight .sx{color:#b84}.highlight .sr{color:olive}.highlight .s1,.highlight .ss{color:#b84}.highlight .bp{color:#999}.highlight .vc,.highlight .vg,.highlight .vi{color:teal}.highlight .il{color:#099}</style><!--<![endif]--><link rel="shortcut icon" href="static/favicon.copy.f17f048f84.ico"><!--[if lt IE 9]><script src=static/html5shiv.min.d67bb25739.js async></script><![endif]--></head><body><header id="_header"><h1><a href="/"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20192%20191.99999%22%20width%3D%22192%22%20height%3D%22192%22%3E%3Ctitle%3EMocha%20Logo%3C%2Ftitle%3E%3Cpath%20d%3D%22M169.47386%20143.90113l-68.70282%2039.69498c-2.958045%201.71756-6.584028%201.71756-9.542066%200L22.52614%20143.90113c-2.958038-1.71757-4.77103-4.86645-4.77103-8.20617V56.305021c0-3.435142%201.812992-6.488601%204.77103-8.206172L91.228974%208.403878c2.958038-1.717571%206.584021-1.717571%209.542056%200l68.70282%2039.694971c2.95804%201.717571%204.77104%204.866451%204.77104%208.206172v79.389939c-.0954%203.33972-1.90842%206.4886-4.77104%208.20617z%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%238d6748%22%20fill-rule%3D%22evenodd%22%2F%3E%3Cpath%20d%3D%22M95.904583%2022.049024c.954207%200%201.812992.286262%202.671781.763365l59.351606%2034.255996c1.62216.954206%202.67177%202.767198%202.67177%204.67561v68.511985c0%201.90842-1.04962%203.72141-2.67177%204.67562l-59.351606%2034.25599c-.858789.47711-1.717574.76336-2.671781.76336-.954206%200-1.908412-.28625-2.671777-.76336L33.881192%20134.9316c-1.62215-.95421-2.671778-2.7672-2.671778-4.67562V61.743995c0-1.908412%201.049628-3.721404%202.671778-4.67561l59.351614-34.255996c.858785-.477103%201.812992-.763365%202.671777-.763365m0-2.862618c-1.431309%200-2.862618.381683-4.103085%201.145048L32.449883%2054.58745c-2.576357%201.431309-4.103086%204.198506-4.103086%207.061124v68.511996c0%202.95803%201.526729%205.62981%204.103086%207.06112l59.351615%2034.25599c1.240467.76337%202.671776%201.14506%204.103085%201.14506%201.431309%200%202.862617-.38169%204.103097-1.14506l59.35159-34.25599c2.57636-1.43131%204.10309-4.1985%204.10309-7.06112V61.648574c0-2.958038-1.52673-5.629815-4.10309-7.061124l-59.35159-34.255996c-1.24048-.763365-2.671788-1.145048-4.103097-1.145048z%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20d%3D%22M104.3493%2061.648574c0-.477103-.381682-.954206-.954206-.954206H85.456021c-.477103%200-.954206.381682-.954206.954206%200%203.2443.477103%2014.40851%205.248133%2019.847485.190841.190841.381683.286262.667944.286262h8.01533c.286263%200%20.477104-.09542.667945-.286262%204.77103-5.343554%205.248133-16.507764%205.248133-19.847485zm-7.061124%2017.36655H91.65836c-.286262%200-.477103-.095421-.667944-.286263-3.2443-3.816824-3.625983-11.450472-3.721403-14.122249%200-.477103.381682-.954206.954206-.954206h12.595519c.477103%200%20.954206.381683.954206.954206%200%202.671777-.477103%2010.210005-3.721403%2014.12225-.286262.19084-.477103.286261-.763365.286261zM96.23855%2058.785956s3.43514-2.003833%201.335888-5.629816c-1.240468-1.908412-1.812992-3.530562-1.335889-4.198506-1.240468%201.52673-3.339721%203.14888-1.049627%206.584021.763365.858786%201.145048%202.671777%201.049627%203.2443zM92.421725%2059.072217s2.290094-1.335888.858785-3.816824c-.858785-1.240467-1.240467-2.385515-.858785-2.767197-.858785%201.049627-2.194674%202.099253-.667944%204.484768.477103.477103.667944%201.717571.667944%202.099253z%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20d%3D%22M100.246214%2070.141007c-.381682%202.576357-1.145047%205.534395-2.767197%207.442807-.190841.190841-.381682.286262-.572524.286262h-4.77103c-.190841%200-.477103-.09542-.572523-.286262-1.145048-1.431309-1.908412-3.33972-2.385515-5.343553%200%200%205.534394.763364%208.683274-.381683%202.290095-.858785%202.385515-1.71757%202.385515-1.71757z%22%20fill%3D%22%23fff%22%2F%3E%3Cg%20fill%3D%22%23fff%22%3E%3Cpath%20d%3D%22M37.554879%2085.599145h3.530562l5.820657%208.969536%205.820657-8.969536h3.530562v19.08412h-3.339721V91.03812l-6.011498%208.969537h-.09542L40.8946%2091.13354v13.645146h-3.339721V85.599145zM73.528446%20104.969527c-1.43131%200-2.767198-.286262-4.007665-.763365-1.240468-.477103-2.290095-1.240468-3.14888-2.099253-.858786-.858785-1.52673-1.908412-2.003833-3.14888-.477103-1.145047-.763365-2.480936-.763365-3.816824v-.09542c0-1.335889.286262-2.576357.763365-3.816825.477103-1.145047%201.145047-2.194674%202.099253-3.14888.858786-.858785%201.908412-1.62215%203.14888-2.099253%201.240468-.572523%202.576356-.763365%204.007665-.763365%201.43131%200%202.767198.286262%204.007666.763365%201.240468.477103%202.290094%201.240468%203.14888%202.099253.858785.858786%201.52673%201.908412%202.003832%203.14888.477103%201.145048.763365%202.480936.763365%203.816824v.095421c0%201.335888-.286262%202.576356-.763365%203.816824-.477103%201.145047-1.145047%202.194674-2.099253%203.14888-.858785.858785-1.908412%201.62215-3.14888%202.099253-1.240468.572524-2.576356.763365-4.007665.763365zm0-3.05346c.954206%200%201.812991-.19084%202.576356-.572523.763365-.381682%201.43131-.858785%202.003833-1.431309.572523-.572524.954206-1.335888%201.335888-2.099253.286262-.858786.477103-1.717571.477103-2.576356v-.095421c0-.954206-.190841-1.812991-.477103-2.671777-.286262-.858785-.763365-1.52673-1.335888-2.194674-.572524-.572523-1.240468-1.049626-2.003833-1.431309-.763365-.381682-1.62215-.572523-2.576356-.572523-.954206%200-1.812992.19084-2.576356.572523-.763365.381683-1.43131.858786-2.003833%201.43131-.572524.572523-.954206%201.335888-1.335888%202.099253-.286262.858785-.477104%201.71757-.477104%202.576356v.09542c0%20.954206.190842%201.812992.477104%202.671777.286261.858786.763364%201.52673%201.335888%202.194674.572524.572524%201.240468%201.049627%202.003833%201.43131.763364.381682%201.71757.572523%202.576356.572523zM99.67369%20104.969527c-1.431308%200-2.671776-.286262-3.816823-.763365-1.145048-.477103-2.194674-1.240468-3.05346-2.099253-.858785-.858785-1.52673-1.908412-2.003832-3.14888-.477103-1.240468-.763365-2.480936-.763365-3.816824v-.09542c0-1.335889.286262-2.671777.763365-3.816825.477103-1.145047%201.145047-2.194674%202.003832-3.14888.858786-.858785%201.908412-1.62215%203.14888-2.099253%201.240468-.477103%202.480936-.763365%204.007666-.763365.858785%200%201.62215.095421%202.385515.190842.763364.19084%201.335888.381682%202.003832.572523.572524.286262%201.145047.572524%201.62215.954206.477104.381683.954207.763365%201.43131%201.240468l-2.194674%202.480936c-.763365-.667945-1.52673-1.240468-2.385515-1.717571-.858786-.477103-1.812992-.667944-2.958039-.667944-.954206%200-1.71757.19084-2.480936.572523-.763364.381683-1.431309.858786-2.003832%201.43131-.572524.572523-.954206%201.335888-1.335889%202.099253-.286262.858785-.477103%201.71757-.477103%202.576356v.09542c0%20.954206.190841%201.812992.477103%202.671777.286262.858786.763365%201.52673%201.335889%202.194674.572523.572524%201.240468%201.145047%202.003832%201.43131.763365.28626%201.62215.572523%202.480936.572523%201.145047%200%202.194674-.190841%202.958039-.667944.763364-.477103%201.62215-1.049627%202.480935-1.812992l2.194674%202.194674c-.477103.572524-.954206.954206-1.52673%201.431309-.572523.477103-1.145047.763365-1.71757%201.049627-.572524.286261-1.335889.572523-2.003833.667944-.858785.190841-1.71757.190841-2.576356.190841zM114.177622%2085.599145h3.339721v7.91991h9.160378v-7.91991h3.339721v19.08412h-3.33972v-8.01533h-9.160379v8.01533h-3.33972v-19.08412zM144.807636%2085.503724h3.053459l8.397013%2019.179541h-3.530563l-1.908412-4.580189h-8.969536l-2.003833%204.58019h-3.435141l8.397013-19.179542zm4.77103%2011.641314l-3.2443-7.633649-3.244301%207.633649h6.4886z%22%2F%3E%3C%2Fg%3E%3Cpath%20fill%3D%22%23fff%22%20d%3D%22M35.169365%20110.69476h121.66127v1.049627H35.169365zM156.83062%2074.816618h-51.71797c0%20.381682-.0954.667943-.0954%201.049626h51.81338v-1.049626zM35.169364%2074.816618v1.049626h48.759928c0-.381683-.09542-.667944-.09542-1.049626H35.169365z%22%2F%3E%3C%2Fsvg%3E" alt="Mocha" width="192" height="192"></a></h1><p id="tag"><em>simple</em>, <em>flexible</em>, <em>fun</em></p></header><main id="content"><p>Mocha is a feature-rich JavaScript test framework running on <a href="https://nodejs.org">Node.js</a> and in the browser, making asynchronous testing <em>simple</em> and <em>fun</em>. Mocha tests run serially, allowing for flexible and accurate reporting, while mapping uncaught exceptions to the correct test cases. Hosted on <a href="https://github.com/mochajs/mocha">GitHub</a>.</p><nav class="badges"><a href="https://gitter.im/mochajs/mocha"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5OSIgaGVpZ2h0PSIyMCI+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4Mj0iMCIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2JiYiIgc3RvcC1vcGFjaXR5PSIuMSIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1vcGFjaXR5PSIuMSIvPjwvbGluZWFyR3JhZGllbnQ+PG1hc2sgaWQ9ImEiPjxyZWN0IHdpZHRoPSI5OSIgaGVpZ2h0PSIyMCIgcng9IjMiIGZpbGw9IiNmZmYiLz48L21hc2s+PGcgbWFzaz0idXJsKCNhKSI+PHBhdGggZmlsbD0iIzU1NSIgZD0iTTAgMGg0MHYyMEgweiIvPjxwYXRoIGZpbGw9IiM0NkJDOTkiIGQ9Ik00MCAwaDU5djIwSDQweiIvPjxwYXRoIGZpbGw9InVybCgjYikiIGQ9Ik0wIDBoOTl2MjBIMHoiLz48L2c+PGcgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkRlamFWdSBTYW5zLFZlcmRhbmEsR2VuZXZhLHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiPjx0ZXh0IHg9IjIwIiB5PSIxNSIgZmlsbD0iIzAxMDEwMSIgZmlsbC1vcGFjaXR5PSIuMyI+Z2l0dGVyPC90ZXh0Pjx0ZXh0IHg9IjIwIiB5PSIxNCI+Z2l0dGVyPC90ZXh0Pjx0ZXh0IHg9IjY4LjUiIHk9IjE1IiBmaWxsPSIjMDEwMTAxIiBmaWxsLW9wYWNpdHk9Ii4zIj5qb2luIGNoYXQ8L3RleHQ+PHRleHQgeD0iNjguNSIgeT0iMTQiPmpvaW4gY2hhdDwvdGV4dD48L2c+PC9zdmc+" alt="Gitter"></a><a href="#backers"><img src="//opencollective.com/mochajs/backers/badge.svg" alt="OpenCollective backers"></a><a href="#sponsors"><img src="//opencollective.com/mochajs/sponsors/badge.svg" alt="OpenCollective sponsors"></a></nav><h2 id="backers">Backers</h2><p>Find Mocha helpful? Become a <a href="https://opencollective.com/mochajs#support">backer</a> and support Mocha with a monthly donation.</p><p class="image-list" id="_backers"><a href="https://opencollective.com/mochajs/backer/0/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/0/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/1/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/1/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/2/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/2/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/3/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/3/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/4/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/4/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/5/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/5/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/6/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/6/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/7/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/7/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/8/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/8/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/9/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/9/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/10/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/10/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/11/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/11/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/12/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/12/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/13/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/13/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/14/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/14/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/15/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/15/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/16/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/16/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/17/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/17/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/18/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/18/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/19/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/19/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/20/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/20/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/21/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/21/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/22/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/22/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/23/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/23/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/24/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/24/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/25/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/25/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/26/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/26/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/27/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/27/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/28/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/28/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/backer/29/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/backer/29/avatar.jpg" alt=""></a></p><h2 id="sponsors">Sponsors</h2><p>Use Mocha at Work? Ask your manager or marketing team if they’d help <a href="https://opencollective.com/mochajs#support">support</a> our project. Your company’s logo will also be displayed on <a href="http://npmjs.com/package/mocha">npmjs.com</a> and our <a href="https://github.com/mochajs/mocha#sponsors">GitHub repository</a>.</p><p class="image-list faded-images"><a href="https://opencollective.com/mochajs/sponsor/0/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/sponsor/0/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/sponsor/1/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/sponsor/1/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/sponsor/2/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/sponsor/2/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/sponsor/3/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/sponsor/3/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/sponsor/4/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/sponsor/4/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/sponsor/5/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/sponsor/5/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/sponsor/6/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/sponsor/6/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/sponsor/7/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/sponsor/7/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/sponsor/8/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/sponsor/8/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/sponsor/9/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/sponsor/9/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/sponsor/10/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/sponsor/10/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/sponsor/11/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/sponsor/11/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/sponsor/12/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/sponsor/12/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/sponsor/13/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/sponsor/13/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/sponsor/14/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/sponsor/14/avatar.jpg" alt=""></a><a href="https://opencollective.com/mochajs/sponsor/15/website" target="_blank" rel="noopener"><img src="https://opencollective.com/mochajs/sponsor/15/avatar.jpg" alt=""></a></p><h2 id="features">Features</h2><ul><li><a href="#running-mocha-in-the-browser">browser support</a></li><li><a href="#asynchronous-code">simple async support, including promises</a></li><li><a href="#wallabyjs">test coverage reporting</a></li><li><a href="#diffs">string diff support</a></li><li><a href="#more-information">javascript API for running tests</a></li><li>proper exit status for CI support etc</li><li><a href="#reporters">auto-detects and disables coloring for non-ttys</a></li><li><a href="#browser-specific-methods">maps uncaught exceptions to the correct test case</a></li><li><a href="#delayed-root-suite">async test timeout support</a></li><li><a href="#retry-tests">test retry support</a></li><li><a href="#test-level">test-specific timeouts</a></li><li><a href="#mochaopts">growl notification support</a></li><li><a href="#test-duration">reports test durations</a></li><li><a href="#dot-matrix">highlights slow tests</a></li><li><a href="#min">file watcher support</a></li><li><a href="#--check-leaks">global variable leak detection</a></li><li><a href="#-g---grep-pattern">optionally run tests that match a regexp</a></li><li><a href="#--exit----no-exit">auto-exit to prevent “hanging” with an active loop</a></li><li><a href="#markdown">easily meta-generate suites</a> &amp; <a href="#list">test-cases</a></li><li><a href="#mochaopts">mocha.opts file support</a></li><li>clickable suite titles to filter test execution</li><li><a href="#-d---debug">node debugger support</a></li><li><a href="#detects-multiple-calls-to-done">detects multiple calls to <code class="highlighter-rouge">done()</code></a></li><li><a href="#assertions">use any assertion library you want</a></li><li><a href="#reporters">extensible reporting, bundled with 9+ reporters</a></li><li><a href="#interfaces">extensible test DSLs or “interfaces”</a></li><li><a href="#hooks">before, after, before each, after each hooks</a></li><li><a href="#--compilers">arbitrary transpiler support (coffee-script etc)</a></li><li><a href="#textmate">TextMate bundle</a></li><li><a href="https://mochajs.org">and more!</a></li></ul><h2 id="table-of-contents">Table of Contents</h2><ul><li><a href="#installation">Installation</a></li><li><a href="#getting-started">Getting Started</a></li><li><a href="#detects-multiple-calls-to-done">Detects Multiple Calls to <code class="highlighter-rouge">done()</code></a></li><li><a href="#assertions">Assertions</a></li><li><a href="#asynchronous-code">Asynchronous Code</a></li><li><a href="#synchronous-code">Synchronous Code</a></li><li><a href="#arrow-functions">Arrow Functions</a></li><li><a href="#hooks">Hooks</a></li><li><a href="#pending-tests">Pending Tests</a></li><li><a href="#exclusive-tests">Exclusive Tests</a></li><li><a href="#inclusive-tests">Inclusive Tests</a></li><li><a href="#retry-tests">Retry Tests</a></li><li><a href="#dynamically-generating-tests">Dynamically Generating Tests</a></li><li><a href="#timeouts">Timeouts</a></li><li><a href="#diffs">Diffs</a></li><li><a href="#usage">Usage</a></li><li><a href="#interfaces">Interfaces</a></li><li><a href="#reporters">Reporters</a></li><li><a href="#running-mocha-in-the-browser">Running Mocha in the Browser</a></li><li><a href="#mochaopts"><code class="highlighter-rouge">mocha.opts</code></a></li><li><a href="#the-test-directory">The <code class="highlighter-rouge">test/</code> Directory</a></li><li><a href="#editor-plugins">Editor Plugins</a></li><li><a href="#examples">Examples</a></li><li><a href="#testing-mocha">Testing Mocha</a></li><li><a href="#more-information">More Information</a></li></ul><h2 id="installation">Installation</h2><p>Install with <a href="https://npmjs.org">npm</a> globally:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm install <span class="nt">--global</span> mocha
</code></pre></div></div><p>or as a development dependency for your project:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm install <span class="nt">--save-dev</span> mocha
</code></pre></div></div><blockquote><p>To install Mocha v3.0.0 or newer with <code class="highlighter-rouge">npm</code>, you will need <code class="highlighter-rouge">npm</code> v2.14.2 or newer. Additionally, to run Mocha, you will need Node.js v4 or newer.</p></blockquote><p>Mocha can also be installed via <a href="https://bower.io">Bower</a> (<code class="highlighter-rouge">bower install mocha</code>), and is available at <a href="https://cdnjs.com/libraries/mocha">cdnjs</a>.</p><h2 id="getting-started">Getting Started</h2><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm install mocha
<span class="nv">$ </span>mkdir <span class="nb">test</span>
<span class="nv">$ $EDITOR</span> <span class="nb">test</span>/test.js <span class="c"># or open with your favorite editor</span>
</code></pre></div></div><p>In your editor:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'assert'</span><span class="p">);</span>
<span class="nx">describe</span><span class="p">(</span><span class="s1">'Array'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">'#indexOf()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">'should return -1 when the value is not present'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><p>Back in the terminal:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>./node_modules/mocha/bin/mocha

  Array
    <span class="c">#indexOf()</span>
      ✓ should <span class="k">return</span> <span class="nt">-1</span> when the value is not present


  1 passing <span class="o">(</span>9ms<span class="o">)</span>
</code></pre></div></div><p>Set up a test script in package.json:</p><div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s2">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"test"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mocha"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div></div><p>Then run tests with:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">test</span>
</code></pre></div></div><h2 id="detects-multiple-calls-to-done">Detects Multiple Calls to <code class="highlighter-rouge">done()</code></h2><p>If you use callback-based async tests, Mocha will throw an error if <code class="highlighter-rouge">done()</code> is called multiple times. This is handy for catching accidental double callbacks.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">it</span><span class="p">(</span><span class="s1">'double done'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Calling `done()` twice is an error</span>
  <span class="nx">setImmediate</span><span class="p">(</span><span class="nx">done</span><span class="p">);</span>
  <span class="nx">setImmediate</span><span class="p">(</span><span class="nx">done</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div><p>Running the above test will give you the below error message:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>./node_modules/.bin/mocha mocha.test.js


  ✓ double <span class="k">done
  </span>1<span class="o">)</span> double <span class="k">done

  </span>1 passing <span class="o">(</span>6ms<span class="o">)</span>
  1 failing

  1<span class="o">)</span> double <span class="k">done</span>:
     Error: <span class="k">done</span><span class="o">()</span> called multiple <span class="nb">times
      </span>at Object.&lt;anonymous&gt; <span class="o">(</span>mocha.test.js:1:63<span class="o">)</span>
      at require <span class="o">(</span>internal/module.js:11:18<span class="o">)</span>
      at Array.forEach <span class="o">(</span>&lt;anonymous&gt;<span class="o">)</span>
      at startup <span class="o">(</span>bootstrap_node.js:187:16<span class="o">)</span>
      at bootstrap_node.js:608:3
</code></pre></div></div><h2 id="assertions">Assertions</h2><p>Mocha allows you to use any assertion library you wish. In the above example, we’re using Node.js’ built-in <a href="https://nodejs.org/api/assert.html">assert</a> module–but generally, if it throws an <code class="highlighter-rouge">Error</code>, it will work! This means you can use libraries such as:</p><ul><li><a href="https://github.com/shouldjs/should.js">should.js</a> - BDD style shown throughout these docs</li><li><a href="https://github.com/LearnBoost/expect.js">expect.js</a> - <code class="highlighter-rouge">expect()</code> style assertions</li><li><a href="http://chaijs.com/">chai</a> - <code class="highlighter-rouge">expect()</code>, <code class="highlighter-rouge">assert()</code> and <code class="highlighter-rouge">should</code>-style assertions</li><li><a href="https://github.com/visionmedia/better-assert">better-assert</a> - C-style self-documenting <code class="highlighter-rouge">assert()</code></li><li><a href="http://unexpected.js.org">unexpected</a> - “the extensible BDD assertion toolkit”</li></ul><h2 id="asynchronous-code">Asynchronous Code</h2><p>Testing asynchronous code with Mocha could not be simpler! Simply invoke the callback when your test is complete. By adding a callback (usually named <code class="highlighter-rouge">done</code>) to <code class="highlighter-rouge">it()</code>, Mocha will know that it should wait for this function to be called to complete the test. This callback accepts both an <code class="highlighter-rouge">Error</code> instance (or subclass thereof) <em>or</em> a falsy value; anything else will cause a failed test.</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'User'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">'#save()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">'should save without error'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">User</span><span class="p">(</span><span class="s1">'Luna'</span><span class="p">);</span>
      <span class="nx">user</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="nx">done</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
        <span class="k">else</span> <span class="nx">done</span><span class="p">();</span>
      <span class="p">});</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><p>To make things even easier, the <code class="highlighter-rouge">done()</code> callback also accepts an <code class="highlighter-rouge">Error</code> instance (i.e. <code class="highlighter-rouge">new Error()</code>), so we may use this directly:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'User'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">'#save()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">'should save without error'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">User</span><span class="p">(</span><span class="s1">'Luna'</span><span class="p">);</span>
      <span class="nx">user</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">done</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><h3 id="working-with-promises">Working with Promises</h3><p>Alternately, instead of using the <code class="highlighter-rouge">done()</code> callback, you may return a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>. This is useful if the APIs you are testing return promises instead of taking callbacks:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">db</span><span class="p">.</span><span class="nx">clear</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">db</span><span class="p">.</span><span class="nx">save</span><span class="p">([</span><span class="nx">tobi</span><span class="p">,</span> <span class="nx">loki</span><span class="p">,</span> <span class="nx">jane</span><span class="p">]);</span>
    <span class="p">});</span>
<span class="p">});</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">'#find()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">it</span><span class="p">(</span><span class="s1">'respond with matching records'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">db</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="s1">'User'</span> <span class="p">}).</span><span class="nx">should</span><span class="p">.</span><span class="nx">eventually</span><span class="p">.</span><span class="nx">have</span><span class="p">.</span><span class="nx">length</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><blockquote><p>The latter example uses <a href="https://www.npmjs.com/package/chai-as-promised">Chai as Promised</a> for fluent promise assertions.</p></blockquote><p>In Mocha v3.0.0 and newer, returning a <code class="highlighter-rouge">Promise</code> <em>and</em> calling <code class="highlighter-rouge">done()</code> will result in an exception, as this is generally a mistake:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'assert'</span><span class="p">);</span>

<span class="nx">it</span><span class="p">(</span><span class="s1">'should complete this test'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">resolve</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">assert</span><span class="p">.</span><span class="nx">ok</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="nx">resolve</span><span class="p">();</span>
  <span class="p">})</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">done</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div><p>The above test will fail with <code class="highlighter-rouge">Error: Resolution method is overspecified. Specify a callback *or* return a Promise; not both.</code>. In versions older than v3.0.0, the call to <code class="highlighter-rouge">done()</code> is effectively ignored.</p><h3 id="using-async--await">Using async / await</h3><p>If your JS environment supports <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Statements/async_function">async / await</a> you can also write asynchronous tests like this:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">beforeEach</span><span class="p">(</span><span class="k">async</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kr">await</span> <span class="nx">db</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
  <span class="kr">await</span> <span class="nx">db</span><span class="p">.</span><span class="nx">save</span><span class="p">([</span><span class="nx">tobi</span><span class="p">,</span> <span class="nx">loki</span><span class="p">,</span> <span class="nx">jane</span><span class="p">]);</span>
<span class="p">});</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">'#find()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">it</span><span class="p">(</span><span class="s1">'responds with matching records'</span><span class="p">,</span> <span class="k">async</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">users</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">db</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="s1">'User'</span> <span class="p">});</span>
    <span class="nx">users</span><span class="p">.</span><span class="nx">should</span><span class="p">.</span><span class="nx">have</span><span class="p">.</span><span class="nx">length</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><h2 id="synchronous-code">Synchronous Code</h2><p>When testing synchronous code, omit the callback and Mocha will automatically continue on to the next test.</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'Array'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">'#indexOf()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">'should return -1 when the value is not present'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span><span class="mi">5</span><span class="p">).</span><span class="nx">should</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
      <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">should</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><h2 id="arrow-functions">Arrow Functions</h2><p>Passing <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">arrow functions</a> (“lambdas”) to Mocha is discouraged. Lambdas lexically bind <code class="highlighter-rouge">this</code> and cannot access the Mocha context. For example, the following code will fail:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'my suite'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">it</span><span class="p">(</span><span class="s1">'my test'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// should set the timeout of this test to 1000 ms; instead will fail</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">timeout</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
    <span class="nx">assert</span><span class="p">.</span><span class="nx">ok</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><p><em>If you do not need to use</em> Mocha’s context, lambdas should work. However, the result will be more difficult to refactor if the need eventually arises.</p><h2 id="hooks">Hooks</h2><p>With its default “BDD”-style interface, Mocha provides the hooks <code class="highlighter-rouge">before()</code>, <code class="highlighter-rouge">after()</code>, <code class="highlighter-rouge">beforeEach()</code>, and <code class="highlighter-rouge">afterEach()</code>. These should be used to set up preconditions and clean up after your tests.</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'hooks'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="nx">before</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// runs before all tests in this block</span>
  <span class="p">});</span>

  <span class="nx">after</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// runs after all tests in this block</span>
  <span class="p">});</span>

  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// runs before each test in this block</span>
  <span class="p">});</span>

  <span class="nx">afterEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// runs after each test in this block</span>
  <span class="p">});</span>

  <span class="c1">// test cases</span>
<span class="p">});</span>
</code></pre></div></div><blockquote><p>Tests can appear before, after, or interspersed with your hooks. Hooks will run in the order they are defined, as appropriate; all <code class="highlighter-rouge">before()</code> hooks run (once), then any <code class="highlighter-rouge">beforeEach()</code> hooks, tests, any <code class="highlighter-rouge">afterEach()</code> hooks, and finally <code class="highlighter-rouge">after()</code> hooks (once).</p></blockquote><h3 id="describing-hooks">Describing Hooks</h3><p>Any hook can be invoked with an optional description, making it easier to pinpoint errors in your tests. If a hook is given a named function, that name will be used if no description is supplied.</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// beforeEach hook</span>
<span class="p">});</span>

<span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span> <span class="nx">namedFun</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// beforeEach:namedFun</span>
<span class="p">});</span>

<span class="nx">beforeEach</span><span class="p">(</span><span class="s1">'some description'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// beforeEach:some description</span>
<span class="p">});</span>
</code></pre></div></div><h3 id="asynchronous-hooks">Asynchronous Hooks</h3><p>All hooks (<code class="highlighter-rouge">before()</code>, <code class="highlighter-rouge">after()</code>, <code class="highlighter-rouge">beforeEach()</code>, <code class="highlighter-rouge">afterEach()</code>) may be sync or async as well, behaving much like a regular test-case. For example, you may wish to populate database with dummy content before each test:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'Connection'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">db</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Connection</span><span class="p">,</span>
    <span class="nx">tobi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">User</span><span class="p">(</span><span class="s1">'tobi'</span><span class="p">),</span>
    <span class="nx">loki</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">User</span><span class="p">(</span><span class="s1">'loki'</span><span class="p">),</span>
    <span class="nx">jane</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">User</span><span class="p">(</span><span class="s1">'jane'</span><span class="p">);</span>

  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">db</span><span class="p">.</span><span class="nx">clear</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">return</span> <span class="nx">done</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
      <span class="nx">db</span><span class="p">.</span><span class="nx">save</span><span class="p">([</span><span class="nx">tobi</span><span class="p">,</span> <span class="nx">loki</span><span class="p">,</span> <span class="nx">jane</span><span class="p">],</span> <span class="nx">done</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>

  <span class="nx">describe</span><span class="p">(</span><span class="s1">'#find()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">'respond with matching records'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">db</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span><span class="na">type</span><span class="p">:</span> <span class="s1">'User'</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">return</span> <span class="nx">done</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">should</span><span class="p">.</span><span class="nx">have</span><span class="p">.</span><span class="nx">length</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
        <span class="nx">done</span><span class="p">();</span>
      <span class="p">});</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><h3 id="root-level-hooks">Root-Level Hooks</h3><p>You may also pick any file and add “root”-level hooks. For example, add <code class="highlighter-rouge">beforeEach()</code> outside of all <code class="highlighter-rouge">describe()</code> blocks. This will cause the callback to <code class="highlighter-rouge">beforeEach()</code> to run before any test case, regardless of the file it lives in (this is because Mocha has an <em>implied</em> <code class="highlighter-rouge">describe()</code> block, called the “root suite”).</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'before every test in every file'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div><h3 id="delayed-root-suite">Delayed Root Suite</h3><p>If you need to perform asynchronous operations before any of your suites are run, you may delay the root suite. Run <code class="highlighter-rouge">mocha</code> with the <code class="highlighter-rouge">--delay</code> flag. This will attach a special callback function, <code class="highlighter-rouge">run()</code>, to the global context:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// do some setup</span>

  <span class="nx">describe</span><span class="p">(</span><span class="s1">'my suite'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
  <span class="p">});</span>

  <span class="nx">run</span><span class="p">();</span>
<span class="p">},</span> <span class="mi">5000</span><span class="p">);</span>
</code></pre></div></div><h2 id="pending-tests">Pending Tests</h2><p>“Pending”–as in “someone should write these test cases eventually”–test-cases are simply those <em>without</em> a callback:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'Array'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">'#indexOf()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// pending test below</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">'should return -1 when the value is not present'</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><p>Pending tests will be included in the test results, and marked as pending. A pending test is not considered a failed test.</p><h2 id="exclusive-tests">Exclusive Tests</h2><p>The exclusivity feature allows you to run <em>only</em> the specified suite or test-case by appending <code class="highlighter-rouge">.only()</code> to the function. Here’s an example of executing only a particular suite:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'Array'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">describe</span><span class="p">.</span><span class="nx">only</span><span class="p">(</span><span class="s1">'#indexOf()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><p><em>Note</em>: All nested suites will still be executed.</p><p>Here’s an example of executing an individual test case:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'Array'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">'#indexOf()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">.</span><span class="nx">only</span><span class="p">(</span><span class="s1">'should return -1 unless present'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// ...</span>
    <span class="p">});</span>

    <span class="nx">it</span><span class="p">(</span><span class="s1">'should return the index when present'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// ...</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><p>Previous to v3.0.0, <code class="highlighter-rouge">.only()</code> used string matching to decide which tests to execute. As of v3.0.0, this is no longer the case. In v3.0.0 or newer, <code class="highlighter-rouge">.only()</code> can be used multiple times to define a subset of tests to run:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'Array'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">'#indexOf()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">.</span><span class="nx">only</span><span class="p">(</span><span class="s1">'should return -1 unless present'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// this test will be run</span>
    <span class="p">});</span>

    <span class="nx">it</span><span class="p">.</span><span class="nx">only</span><span class="p">(</span><span class="s1">'should return the index when present'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// this test will also be run</span>
    <span class="p">});</span>

    <span class="nx">it</span><span class="p">(</span><span class="s1">'should return -1 if called with a non-Array context'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// this test will not be run</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><p>You may also choose multiple suites:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'Array'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">describe</span><span class="p">.</span><span class="nx">only</span><span class="p">(</span><span class="s1">'#indexOf()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">'should return -1 unless present'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// this test will be run</span>
    <span class="p">});</span>

    <span class="nx">it</span><span class="p">(</span><span class="s1">'should return the index when present'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// this test will also be run</span>
    <span class="p">});</span>
  <span class="p">});</span>

  <span class="nx">describe</span><span class="p">.</span><span class="nx">only</span><span class="p">(</span><span class="s1">'#concat()'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">'should return a new Array'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="c1">// this test will also be run</span>
    <span class="p">});</span>
  <span class="p">});</span>

  <span class="nx">describe</span><span class="p">(</span><span class="s1">'#slice()'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">'should return a new Array'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="c1">// this test will not be run</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><p>But <em>tests will have precedence</em>:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'Array'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">describe</span><span class="p">.</span><span class="nx">only</span><span class="p">(</span><span class="s1">'#indexOf()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">.</span><span class="nx">only</span><span class="p">(</span><span class="s1">'should return -1 unless present'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// this test will be run</span>
    <span class="p">});</span>

    <span class="nx">it</span><span class="p">(</span><span class="s1">'should return the index when present'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// this test will not be run</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><p><em>Note</em>: Hooks, if present, will still be executed.</p><blockquote><p>Be mindful not to commit usages of <code class="highlighter-rouge">.only()</code> to version control, unless you really mean it!</p></blockquote><h2 id="inclusive-tests">Inclusive Tests</h2><p>This feature is the inverse of <code class="highlighter-rouge">.only()</code>. By appending <code class="highlighter-rouge">.skip()</code>, you may tell Mocha to simply ignore these suite(s) and test case(s). Anything skipped will be marked as <a href="#pending-tests">pending</a>, and reported as such. Here’s an example of skipping an entire suite:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'Array'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">describe</span><span class="p">.</span><span class="nx">skip</span><span class="p">(</span><span class="s1">'#indexOf()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><p>Or a specific test-case:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'Array'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">'#indexOf()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">.</span><span class="nx">skip</span><span class="p">(</span><span class="s1">'should return -1 unless present'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// this test will not be run</span>
    <span class="p">});</span>

    <span class="nx">it</span><span class="p">(</span><span class="s1">'should return the index when present'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// this test will be run</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><blockquote><p><em>Best practice</em>: Use <code class="highlighter-rouge">.skip()</code> instead of commenting tests out.</p></blockquote><p>You may also skip <em>at runtime</em> using <code class="highlighter-rouge">this.skip()</code>. If a test needs an environment or configuration which cannot be detected beforehand, a runtime skip is appropriate. For example:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">it</span><span class="p">(</span><span class="s1">'should only test in the correct environment'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="cm">/* check test environment */</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// make assertions</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">skip</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div><p>The above test will be reported as <a href="#pending-tests">pending</a>. It’s also important to note that calling <code class="highlighter-rouge">this.skip()</code> will effectively <em>abort</em> the test.</p><blockquote><p><em>Best practice</em>: To avoid confusion, do not execute further instructions in a test or hook after calling <code class="highlighter-rouge">this.skip()</code>.</p></blockquote><p>Contrast the above test with the following code:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">it</span><span class="p">(</span><span class="s1">'should only test in the correct environment'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="cm">/* check test environment */</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// make assertions</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// do nothing</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div><p>Because this test <em>does nothing</em>, it will be reported as <em>passing</em>.</p><blockquote><p><em>Best practice</em>: Don’t do nothing! A test should make an assertion or use <code class="highlighter-rouge">this.skip()</code>.</p></blockquote><p>To skip <em>multiple</em> tests in this manner, use <code class="highlighter-rouge">this.skip()</code> in a “before” hook:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">before</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="cm">/* check test environment */</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// setup code</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">skip</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div><blockquote><p>Before Mocha v3.0.0, <code class="highlighter-rouge">this.skip()</code> was not supported in asynchronous tests and hooks.</p></blockquote><h2 id="retry-tests">Retry Tests</h2><p>You can choose to retry failed tests up to a certain number of times. This feature is designed to handle end-to-end tests (functional tests/Selenium…) where resources cannot be easily mocked/stubbed. <strong>It’s not recommended to use this feature for unit tests</strong>.</p><p>This feature does re-run <code class="highlighter-rouge">beforeEach/afterEach</code> hooks but not <code class="highlighter-rouge">before/after</code> hooks.</p><p><strong>NOTE</strong>: Example below was written using Selenium webdriver (which <a href="https://github.com/SeleniumHQ/selenium/blob/c10e8a955883f004452cdde18096d70738397788/javascript/node/selenium-webdriver/testing/index.js">overwrites global Mocha hooks</a> for <code class="highlighter-rouge">Promise</code> chain).</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'retries'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Retry all tests in this suite up to 4 times</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">retries</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>

  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">browser</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s1">'http://www.yahoo.com'</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="s1">'should succeed on the 3rd try'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Specify this test to only retry up to 2 times</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">retries</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'.foo'</span><span class="p">).</span><span class="nx">isDisplayed</span><span class="p">()).</span><span class="nx">to</span><span class="p">.</span><span class="nx">eventually</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="kc">true</span><span class="p">;</span>
  <span class="p">});</span>
<span class="p">});</span>

</code></pre></div></div><h2 id="dynamically-generating-tests">Dynamically Generating Tests</h2><p>Given Mocha’s use of <code class="highlighter-rouge">Function.prototype.call</code> and function expressions to define suites and test cases, it’s straightforward to generate your tests dynamically. No special syntax is required — plain ol’ JavaScript can be used to achieve functionality similar to “parameterized” tests, which you may have seen in other frameworks.</p><p>Take the following example:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'chai'</span><span class="p">).</span><span class="nx">assert</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">add</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="kr">arguments</span><span class="p">).</span><span class="nx">reduce</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">prev</span><span class="p">,</span> <span class="nx">curr</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">prev</span> <span class="o">+</span> <span class="nx">curr</span><span class="p">;</span>
  <span class="p">},</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">'add()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">tests</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="na">args</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>       <span class="na">expected</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span>
    <span class="p">{</span><span class="na">args</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>    <span class="na">expected</span><span class="p">:</span> <span class="mi">6</span><span class="p">},</span>
    <span class="p">{</span><span class="na">args</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="na">expected</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
  <span class="p">];</span>

  <span class="nx">tests</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">'correctly adds '</span> <span class="o">+</span> <span class="nx">test</span><span class="p">.</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="s1">' args'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">add</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">test</span><span class="p">.</span><span class="nx">args</span><span class="p">);</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">res</span><span class="p">,</span> <span class="nx">test</span><span class="p">.</span><span class="nx">expected</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><p>The above code will produce a suite with three specs:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mocha

  add<span class="o">()</span>
    ✓ correctly adds 2 args
    ✓ correctly adds 3 args
    ✓ correctly adds 4 args
</code></pre></div></div><h2 id="test-duration">Test duration</h2><p>Many reporters will display test duration, as well as flagging tests that are slow, as shown here with the “spec” reporter:</p><p><img src="static/reporter-spec-duration.resize920,9999.f3601d937d.png" alt="test duration" class="screenshot"></p><p>To tweak what’s considered “slow”, you can use the <code class="highlighter-rouge">slow()</code> method:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'something slow'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">slow</span><span class="p">(</span><span class="mi">10000</span><span class="p">);</span>

  <span class="nx">it</span><span class="p">(</span><span class="s1">'should take long enough for me to go make a sandwich'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><h2 id="timeouts">Timeouts</h2><h3 id="suite-level">Suite-level</h3><p>Suite-level timeouts may be applied to entire test “suites”, or disabled via <code class="highlighter-rouge">this.timeout(0)</code>. This will be inherited by all nested suites and test-cases that do not override the value.</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'a suite of tests'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">timeout</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>

  <span class="nx">it</span><span class="p">(</span><span class="s1">'should take less than 500ms'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">){</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">done</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="s1">'should take less than 500ms as well'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">){</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">done</span><span class="p">,</span> <span class="mi">250</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">})</span>
</code></pre></div></div><h3 id="test-level">Test-level</h3><p>Test-specific timeouts may also be applied, or the use of <code class="highlighter-rouge">this.timeout(0)</code> to disable timeouts all together:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">it</span><span class="p">(</span><span class="s1">'should take less than 500ms'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">){</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">timeout</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
  <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">done</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div><h3 id="hook-level">Hook-level</h3><p>Hook-level timeouts may also be applied:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'a suite of tests'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">timeout</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span> <span class="c1">// A very long environment setup.</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">done</span><span class="p">,</span> <span class="mi">2500</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><p>Again, use <code class="highlighter-rouge">this.timeout(0)</code> to disable the timeout for a hook.</p><blockquote><p>In v3.0.0 or newer, a parameter passed to <code class="highlighter-rouge">this.timeout()</code> greater than the <a href="https://developer.mozilla.org/docs/Web/API/WindowTimers/setTimeout#Maximum_delay_value">maximum delay value</a> will cause the timeout to be disabled.</p></blockquote><h2 id="diffs">Diffs</h2><p>Mocha supports the <code class="highlighter-rouge">err.expected</code> and <code class="highlighter-rouge">err.actual</code> properties of any thrown <code class="highlighter-rouge">AssertionError</code>s from an assertion library. Mocha will attempt to display the difference between what was expected, and what the assertion actually saw. Here’s an example of a “string” diff:</p><p><img src="static/reporter-string-diffs.resize920,9999.7b631dd246.png" alt="string diffs" class="screenshot"></p><h2 id="usage">Usage</h2><div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Usage: mocha [debug] [options] [files]


  Options:

    -V, --version                           output the version number
    -A, --async-only                        force all tests to take a callback (async) or return a promise
    -c, --colors                            force enabling of colors
    -C, --no-colors                         force disabling of colors
    -G, --growl                             enable growl notification support
    -O, --reporter-options &lt;k=v,k2=v2,...&gt;  reporter-specific options
    -R, --reporter &lt;name&gt;                   specify the reporter to use
    -S, --sort                              sort test files
    -b, --bail                              bail after first test failure
    -d, --debug                             enable node's debugger, synonym for node --debug
    -g, --grep &lt;pattern&gt;                    only run tests matching &lt;pattern&gt;
    -f, --fgrep &lt;string&gt;                    only run tests containing &lt;string&gt;
    -gc, --expose-gc                        expose gc extension
    -i, --invert                            inverts --grep and --fgrep matches
    -r, --require &lt;name&gt;                    require the given module
    -s, --slow &lt;ms&gt;                         "slow" test threshold in milliseconds [75]
    -t, --timeout &lt;ms&gt;                      set test-case timeout in milliseconds [2000]
    -u, --ui &lt;name&gt;                         specify user-interface (bdd|tdd|qunit|exports)
    -w, --watch                             watch files for changes
    --check-leaks                           check for global variable leaks
    --full-trace                            display the full stack trace
    --compilers &lt;ext&gt;:&lt;module&gt;,...          use the given module(s) to compile files
    --debug-brk                             enable node's debugger breaking on the first line
    --globals &lt;names&gt;                       allow the given comma-delimited global [names]
    --es_staging                            enable all staged features
    --file &lt;file&gt;                           include a file to be ran during the suite [file]
    --harmony&lt;_classes,_generators,...&gt;     all node --harmony* flags are available
    --preserve-symlinks                     Instructs the module loader to preserve symbolic links when resolving and caching modules
    --icu-data-dir                          include ICU data
    --inline-diffs                          display actual/expected differences inline within each string
    --inspect                               activate devtools in chrome
    --inspect-brk                           activate devtools in chrome and break on the first line
    --interfaces                            display available interfaces
    --no-deprecation                        silence deprecation warnings
    --exit                                  force shutdown of the event loop after test run: mocha will call process.exit
    --no-timeouts                           disables timeouts, given implicitly with --debug
    --no-warnings                           silence all node process warnings
    --opts &lt;path&gt;                           specify opts path
    --perf-basic-prof                       enable perf linux profiler (basic support)
    --napi-modules                          enable experimental NAPI modules
    --prof                                  log statistical profiling information
    --log-timer-events                      Time events including external callbacks
    --recursive                             include sub directories
    --reporters                             display available reporters
    --retries &lt;times&gt;                       set numbers of time to retry a failed test case
    --throw-deprecation                     throw an exception anytime a deprecated function is used
    --trace                                 trace function calls
    --trace-deprecation                     show stack traces on deprecations
    --trace-warnings                        show stack traces on node process warnings
    --use_strict                            enforce strict mode
    --watch-extensions &lt;ext&gt;,...            additional extensions to monitor with --watch
    --delay                                 wait for async suite definition
    --allow-uncaught                        enable uncaught errors to propagate
    --forbid-only                           causes test marked with only to fail the suite
    --forbid-pending                        causes pending tests and test marked with skip to fail the suite
    -h, --help                              output usage information


  Commands:

    init &lt;path&gt;  initialize a client-side mocha setup at &lt;path&gt;
</code></pre></div></div><h3 id="-w---watch"><code class="highlighter-rouge">-w, --watch</code></h3><p>Executes tests on changes to JavaScript in the CWD, and once initially.</p><h3 id="--exit----no-exit"><code class="highlighter-rouge">--exit</code> / <code class="highlighter-rouge">--no-exit</code></h3><blockquote><p><em>Updated in Mocha v4.0.0</em></p></blockquote><p><em>Prior to</em> version v4.0.0, <em>by default</em>, Mocha would force its own process to exit once it was finished executing all tests. This behavior enables a set of potential problems; it’s indicative of tests (or fixtures, harnesses, code under test, etc.) which don’t clean up after themselves properly. Ultimately, “dirty” tests can (but not always) lead to <em>false positive</em> or <em>false negative</em> results.</p><p>“Hanging” most often manifests itself if a server is still listening on a port, or a socket is still open, etc. It can also be something like a runaway <code class="highlighter-rouge">setInterval()</code>, or even an errant <code class="highlighter-rouge">Promise</code> that never fulfilled.</p><p>The <em>default behavior</em> in v4.0.0 is <code class="highlighter-rouge">--no-exit</code>, where previously it was <code class="highlighter-rouge">--exit</code>.</p><p><strong>The easiest way to “fix” the issue is to simply pass <code class="highlighter-rouge">--exit</code> to the Mocha process.</strong> It <em>can</em> be time-consuming to debug–because it’s not always obvious where the problem is–but it <em>is</em> recommended to do so.</p><p>To ensure your tests aren’t leaving messes around, here are some ideas to get started:</p><ul><li>See the <a href="https://nodejs.org/en/docs/inspector/">Node.js guide to debugging</a></li><li>Use the new <a href="https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md"><code class="highlighter-rouge">async_hooks</code></a> API (<a href="https://git.io/vdlNM">example</a>)</li><li>Try something like <a href="https://npm.im/why-is-node-running">why-is-node-running</a></li><li>Use <a href="#exclusive-tests"><code class="highlighter-rouge">.only</code></a> until you find the test that causes Mocha to hang</li></ul><h3 id="--compilers"><code class="highlighter-rouge">--compilers</code></h3><blockquote><p><em>Updated in Mocha v4.0.0</em></p></blockquote><p><strong><code class="highlighter-rouge">--compilers</code> is deprecated as of Mocha v4.0.0. See <a href="https://github.com/mochajs/mocha/wiki/compilers-deprecation">further explanation and workarounds</a>.</strong></p><p>CoffeeScript is no longer supported out of the box. CS and similar transpilers may be used by mapping the file extensions (for use with <code class="highlighter-rouge">--watch</code>) and the module name. For example <code class="highlighter-rouge">--compilers coffee:coffee-script</code> with CoffeeScript 1.6- or <code class="highlighter-rouge">--compilers coffee:coffee-script/register</code> with CoffeeScript 1.7+.</p><h4 id="about-babel">About Babel</h4><p>If your ES6 modules have extension <code class="highlighter-rouge">.js</code>, you can <code class="highlighter-rouge">npm install --save-dev babel-register</code> and use <code class="highlighter-rouge">mocha --require babel-register</code>; <code class="highlighter-rouge">--compilers</code> is only necessary if you need to specify a file extension.</p><h3 id="-b---bail"><code class="highlighter-rouge">-b, --bail</code></h3><p>Only interested in the first exception? use <code class="highlighter-rouge">--bail</code>!</p><h3 id="-d---debug"><code class="highlighter-rouge">-d, --debug</code></h3><p>Enables node’s debugger support, this executes your script(s) with <code class="highlighter-rouge">node debug &lt;file ...&gt;</code> allowing you to step through code and break with the <code class="highlighter-rouge">debugger</code> statement. Note the difference between <code class="highlighter-rouge">mocha debug</code> and <code class="highlighter-rouge">mocha --debug</code>: <code class="highlighter-rouge">mocha debug</code> will fire up node’s built-in debug client, <code class="highlighter-rouge">mocha --debug</code> will allow you to use a different interface — such as the Blink Developer Tools. Implies <code class="highlighter-rouge">--no-timeouts</code>.</p><h3 id="--globals-names"><code class="highlighter-rouge">--globals &lt;names&gt;</code></h3><p>Accepts a comma-delimited list of accepted global variable names. For example, suppose your app deliberately exposes a global named <code class="highlighter-rouge">app</code> and <code class="highlighter-rouge">YUI</code>, you may want to add <code class="highlighter-rouge">--globals app,YUI</code>. It also accepts wildcards. You could do <code class="highlighter-rouge">--globals '*bar'</code> and it would match <code class="highlighter-rouge">foobar</code>, <code class="highlighter-rouge">barbar</code>, etc. You can also simply pass in <code class="highlighter-rouge">'*'</code> to ignore all globals.</p><p>By using this option in conjunction with <code class="highlighter-rouge">--check-leaks</code>, you can specify a whitelist of known global variables that you would expect to leak into global scope.</p><h3 id="--check-leaks"><code class="highlighter-rouge">--check-leaks</code></h3><p>Use this option to have Mocha check for global variables that are leaked while running tests. Specify globals that are acceptable via the <code class="highlighter-rouge">--globals</code> option (for example: <code class="highlighter-rouge">--check-leaks --globals jQuery,MyLib</code>).</p><h3 id="-r---require-module-name"><code class="highlighter-rouge">-r, --require &lt;module-name&gt;</code></h3><p>The <code class="highlighter-rouge">--require</code> option is useful for libraries such as <a href="https://github.com/shouldjs/should.js">should.js</a>, so you may simply <code class="highlighter-rouge">--require should</code> instead of manually invoking <code class="highlighter-rouge">require('should')</code> within each test file. Note that this works well for <code class="highlighter-rouge">should</code> as it augments <code class="highlighter-rouge">Object.prototype</code>, however if you wish to access a module’s exports you will have to require them, for example <code class="highlighter-rouge">var should = require('should')</code>. Furthermore, it can be used with relative paths, e.g. <code class="highlighter-rouge">--require ./test/helper.js</code></p><h3 id="-u---ui-name"><code class="highlighter-rouge">-u, --ui &lt;name&gt;</code></h3><p>The <code class="highlighter-rouge">--ui</code> option lets you specify the interface to use, defaulting to “bdd”.</p><h3 id="-r---reporter-name"><code class="highlighter-rouge">-R, --reporter &lt;name&gt;</code></h3><p>The <code class="highlighter-rouge">--reporter</code> option allows you to specify the reporter that will be used, defaulting to “spec”. This flag may also be used to utilize third-party reporters. For example if you <code class="highlighter-rouge">npm install mocha-lcov-reporter</code> you may then do <code class="highlighter-rouge">--reporter mocha-lcov-reporter</code>.</p><h3 id="-t---timeout-ms"><code class="highlighter-rouge">-t, --timeout &lt;ms&gt;</code></h3><p>Specifies the test-case timeout, defaulting to 2 seconds. To override you may pass the timeout in milliseconds, or a value with the <code class="highlighter-rouge">s</code> suffix, ex: <code class="highlighter-rouge">--timeout 2s</code> or <code class="highlighter-rouge">--timeout 2000</code> would be equivalent.</p><h3 id="--no-timeouts"><code class="highlighter-rouge">--no-timeouts</code></h3><p>Disables timeouts. Equivalent to <code class="highlighter-rouge">--timeout 0</code>.</p><h3 id="-s---slow-ms"><code class="highlighter-rouge">-s, --slow &lt;ms&gt;</code></h3><p>Specify the “slow” test threshold, defaulting to 75ms. Mocha uses this to highlight test-cases that are taking too long.</p><h3 id="--file-file"><code class="highlighter-rouge">--file &lt;file&gt;</code></h3><p>Add a file you want included first in a test suite. This is useful if you have some generic setup code that must be included within the test suite. The file passed is not affected by any other flags (<code class="highlighter-rouge">--recursive</code> or <code class="highlighter-rouge">--sort</code> have no effect). Accepts multiple <code class="highlighter-rouge">--file</code> flags to include multiple files, the order in which the flags are given are the order in which the files are included in the test suite. Can also be used in <code class="highlighter-rouge">mocha.opts</code>.</p><h3 id="-g---grep-pattern"><code class="highlighter-rouge">-g, --grep &lt;pattern&gt;</code></h3><p>The <code class="highlighter-rouge">--grep</code> option when specified will trigger mocha to only run tests matching the given <code class="highlighter-rouge">pattern</code> which is internally compiled to a <code class="highlighter-rouge">RegExp</code>.</p><p>Suppose, for example, you have “api” related tests, as well as “app” related tests, as shown in the following snippet; One could use <code class="highlighter-rouge">--grep api</code> or <code class="highlighter-rouge">--grep app</code> to run one or the other. The same goes for any other part of a suite or test-case title, <code class="highlighter-rouge">--grep users</code> would be valid as well, or even <code class="highlighter-rouge">--grep GET</code>.</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'api'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">'GET /api/users'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">'respond with an array of users'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// ...</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">'app'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">'GET /users'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">'respond with an array of users'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// ...</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><h2 id="interfaces">Interfaces</h2><p>Mocha’s “interface” system allows developers to choose their style of DSL. Mocha has <strong>BDD</strong>, <strong>TDD</strong>, <strong>Exports</strong>, <strong>QUnit</strong> and <strong>Require</strong>-style interfaces.</p><h3 id="bdd">BDD</h3><p>The <strong>BDD</strong> interface provides <code class="highlighter-rouge">describe()</code>, <code class="highlighter-rouge">context()</code>, <code class="highlighter-rouge">it()</code>, <code class="highlighter-rouge">specify()</code>, <code class="highlighter-rouge">before()</code>, <code class="highlighter-rouge">after()</code>, <code class="highlighter-rouge">beforeEach()</code>, and <code class="highlighter-rouge">afterEach()</code>.</p><p><code class="highlighter-rouge">context()</code> is just an alias for <code class="highlighter-rouge">describe()</code>, and behaves the same way; it just provides a way to keep tests easier to read and organized. Similarly, <code class="highlighter-rouge">specify()</code> is an alias for <code class="highlighter-rouge">it()</code>.</p><blockquote><p>All of the previous examples were written using the <strong>BDD</strong> interface.</p></blockquote><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">describe</span><span class="p">(</span><span class="s1">'Array'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">before</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// ...</span>
    <span class="p">});</span>

    <span class="nx">describe</span><span class="p">(</span><span class="s1">'#indexOf()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">context</span><span class="p">(</span><span class="s1">'when not present'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">it</span><span class="p">(</span><span class="s1">'should not throw an error'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
          <span class="p">}).</span><span class="nx">should</span><span class="p">.</span><span class="nx">not</span><span class="p">.</span><span class="k">throw</span><span class="p">();</span>
        <span class="p">});</span>
        <span class="nx">it</span><span class="p">(</span><span class="s1">'should return -1'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span><span class="mi">4</span><span class="p">).</span><span class="nx">should</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="p">});</span>
      <span class="p">});</span>
      <span class="nx">context</span><span class="p">(</span><span class="s1">'when present'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">it</span><span class="p">(</span><span class="s1">'should return the index where the element first appears in the array'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span><span class="mi">3</span><span class="p">).</span><span class="nx">should</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
        <span class="p">});</span>
      <span class="p">});</span>
    <span class="p">});</span>
  <span class="p">});</span>
</code></pre></div></div><h3 id="tdd">TDD</h3><p>The <strong>TDD</strong> interface provides <code class="highlighter-rouge">suite()</code>, <code class="highlighter-rouge">test()</code>, <code class="highlighter-rouge">suiteSetup()</code>, <code class="highlighter-rouge">suiteTeardown()</code>, <code class="highlighter-rouge">setup()</code>, and <code class="highlighter-rouge">teardown()</code>:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">suite</span><span class="p">(</span><span class="s1">'Array'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">setup</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
  <span class="p">});</span>

  <span class="nx">suite</span><span class="p">(</span><span class="s1">'#indexOf()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">test</span><span class="p">(</span><span class="s1">'should return -1 when not present'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span><span class="mi">4</span><span class="p">));</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><h3 id="exports">Exports</h3><p>The <strong>Exports</strong> interface is much like Mocha’s predecessor <a href="https://github.com/tj/expresso">expresso</a>. The keys <code class="highlighter-rouge">before</code>, <code class="highlighter-rouge">after</code>, <code class="highlighter-rouge">beforeEach</code>, and <code class="highlighter-rouge">afterEach</code> are special-cased, object values are suites, and function values are test-cases:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">before</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
  <span class="p">},</span>

  <span class="s1">'Array'</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'#indexOf()'</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">'should return -1 when not present'</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span><span class="mi">4</span><span class="p">).</span><span class="nx">should</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div><h3 id="qunit">QUnit</h3><p>The <a href="https://qunitjs.com">QUnit</a>-inspired interface matches the “flat” look of QUnit, where the test suite title is simply defined before the test-cases. Like TDD, it uses <code class="highlighter-rouge">suite()</code> and <code class="highlighter-rouge">test()</code>, but resembling BDD, it also contains <code class="highlighter-rouge">before()</code>, <code class="highlighter-rouge">after()</code>, <code class="highlighter-rouge">beforeEach()</code>, and <code class="highlighter-rouge">afterEach()</code>.</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">ok</span><span class="p">(</span><span class="nx">expr</span><span class="p">,</span> <span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">expr</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">suite</span><span class="p">(</span><span class="s1">'Array'</span><span class="p">);</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'#length'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">];</span>
  <span class="nx">ok</span><span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">3</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'#indexOf()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">];</span>
  <span class="nx">ok</span><span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>
  <span class="nx">ok</span><span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
  <span class="nx">ok</span><span class="p">(</span><span class="nx">arr</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">suite</span><span class="p">(</span><span class="s1">'String'</span><span class="p">);</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'#length'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">ok</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">3</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div><h3 id="require">Require</h3><p>The <code class="highlighter-rouge">require</code> interface allows you to require the <code class="highlighter-rouge">describe</code> and friend words directly using <code class="highlighter-rouge">require</code> and call them whatever you want. This interface is also useful if you want to avoid global variables in your tests.</p><p><em>Note</em>: The <code class="highlighter-rouge">require</code> interface cannot be run via the <code class="highlighter-rouge">node</code> executable, and must be run via <code class="highlighter-rouge">mocha</code>.</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">testCase</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'mocha'</span><span class="p">).</span><span class="nx">describe</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">pre</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'mocha'</span><span class="p">).</span><span class="nx">before</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">assertions</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'mocha'</span><span class="p">).</span><span class="nx">it</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'chai'</span><span class="p">).</span><span class="nx">assert</span><span class="p">;</span>

<span class="nx">testCase</span><span class="p">(</span><span class="s1">'Array'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">pre</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
  <span class="p">});</span>

  <span class="nx">testCase</span><span class="p">(</span><span class="s1">'#indexOf()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">assertions</span><span class="p">(</span><span class="s1">'should return -1 when not present'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><h2 id="reporters">Reporters</h2><p>Mocha reporters adjust to the terminal window, and always disable ANSI-escape coloring when the stdio streams are not associated with a TTY.</p><h3 id="spec">Spec</h3><p>This is the default reporter. The “spec” reporter outputs a hierarchical view nested just as the test cases are.</p><p><img src="static/reporter-spec.resize920,9999.8d740d75fa.png" alt="spec reporter" class="screenshot"> <img src="static/reporter-spec-fail.resize920,9999.03cbd785fc.png" alt="spec reporter with failure" class="screenshot"></p><h3 id="dot-matrix">Dot Matrix</h3><p>The dot matrix (or “dot”) reporter is simply a series of characters which represent test cases. Failures highlight in red exclamation marks (<code class="highlighter-rouge">!</code>), pending tests with a blue comma (<code class="highlighter-rouge">,</code>), and slow tests as yellow. Good if you prefer minimal output.</p><p><img src="static/reporter-dot.resize920,9999.9ffd220569.png" alt="dot matrix reporter" class="screenshot"></p><h3 id="nyan">Nyan</h3><p>The “nyan” reporter is exactly what you might expect:</p><p><img src="static/reporter-nyan.resize920,9999.7d9b249982.png" alt="js nyan cat reporter" class="screenshot"></p><h3 id="tap">TAP</h3><p>The TAP reporter emits lines for a <a href="https://en.wikipedia.org/wiki/Test_Anything_Protocol">Test-Anything-Protocol</a> consumer.</p><p><img src="static/reporter-tap.resize920,9999.cbd1e7f62c.png" alt="test anything protocol" class="screenshot"></p><h3 id="landing-strip">Landing Strip</h3><p>The Landing Strip (<code class="highlighter-rouge">landing</code>) reporter is a gimmicky test reporter simulating a plane landing :) unicode ftw</p><p><img src="static/reporter-landing.resize920,9999.c76d9888af.png" alt="landing strip plane reporter" class="screenshot"> <img src="static/reporter-landing-fail.resize920,9999.d8b10c352e.png" alt="landing strip with failure" class="screenshot"></p><h3 id="list">List</h3><p>The “list” reporter outputs a simple specifications list as test cases pass or fail, outputting the failure details at the bottom of the output.</p><p><img src="static/reporter-list.resize920,9999.d8fec1347e.png" alt="list reporter" class="screenshot"></p><h3 id="progress">Progress</h3><p>The “progress” reporter implements a simple progress-bar:</p><p><img src="static/reporter-progress.resize920,9999.c53880c40f.png" alt="progress bar" class="screenshot"></p><h3 id="json">JSON</h3><p>The “JSON” reporter outputs a single large JSON object when the tests have completed (failures or not).</p><p><img src="static/reporter-json.resize920,9999.1338fb2e2a.png" alt="json reporter" class="screenshot"></p><h3 id="json-stream">JSON Stream</h3><p>The “JSON stream” reporter outputs newline-delimited JSON “events” as they occur, beginning with a “start” event, followed by test passes or failures, and then the final “end” event.</p><p><img src="static/reporter-json-stream.resize920,9999.4bd85880ed.png" alt="json stream reporter" class="screenshot"></p><h3 id="min">Min</h3><p>The “min” reporter displays the summary only, while still outputting errors on failure. This reporter works great with <code class="highlighter-rouge">--watch</code> as it clears the terminal in order to keep your test summary at the top.</p><p><img src="static/reporter-min.resize920,9999.8dbbdeaf42.png" alt="min reporter" class="screenshot"></p><h3 id="doc">Doc</h3><p>The “doc” reporter outputs a hierarchical HTML body representation of your tests. Wrap it with a header, footer, and some styling, then you have some fantastic documentation!</p><p><img src="static/reporter-doc.resize920,9999.29254f1b22.png" alt="doc reporter" class="screenshot"></p><p>For example, suppose you have the following JavaScript:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'Array'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">'#indexOf()'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">'should return -1 when the value is not present'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span><span class="mi">5</span><span class="p">).</span><span class="nx">should</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
      <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">should</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div><p>The command <code class="highlighter-rouge">mocha --reporter doc array</code> would yield:</p><div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">"suite"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h1&gt;</span>Array<span class="nt">&lt;/h1&gt;</span>
  <span class="nt">&lt;dl&gt;</span>
    <span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">"suite"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h1&gt;</span>#indexOf()<span class="nt">&lt;/h1&gt;</span>
      <span class="nt">&lt;dl&gt;</span>
      <span class="nt">&lt;dt&gt;</span>should return -1 when the value is not present<span class="nt">&lt;/dt&gt;</span>
      <span class="nt">&lt;dd&gt;&lt;pre&gt;&lt;code&gt;</span>[1,2,3].indexOf(5).should.equal(-1);
[1,2,3].indexOf(0).should.equal(-1);<span class="nt">&lt;/code&gt;&lt;/pre&gt;&lt;/dd&gt;</span>
      <span class="nt">&lt;/dl&gt;</span>
    <span class="nt">&lt;/section&gt;</span>
  <span class="nt">&lt;/dl&gt;</span>
<span class="nt">&lt;/section&gt;</span>
</code></pre></div></div><p>The SuperAgent request library <a href="https://visionmedia.github.io/superagent/docs/test.html">test documentation</a> was generated with Mocha’s doc reporter using this Bash command:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mocha <span class="nt">--reporter</span><span class="o">=</span>doc | <span class="nb">cat </span>docs/head.html - docs/tail.html <span class="o">&gt;</span> docs/test.html
</code></pre></div></div><p>View SuperAgent’s <a href="https://github.com/visionmedia/superagent/blob/master/Makefile">Makefile</a> for reference.</p><h3 id="markdown">Markdown</h3><p>The “markdown” reporter generates a markdown TOC and body for your test suite. This is great if you want to use the tests as documentation within a Github wiki page, or a markdown file in the repository that Github can render. For example here is the Connect <a href="https://github.com/senchalabs/connect/blob/90a725343c2945aaee637e799b1cd11e065b2bff/tests.md">test output</a>.</p><h3 id="xunit">XUnit</h3><p>The <code class="highlighter-rouge">xunit</code> reporter is also available. It outputs an XUnit-compatible XML document, often applicable in CI servers.</p><p>By default, it will output to the console. To write directly to a file, use <code class="highlighter-rouge">--reporter-options output=filename.xml</code>.</p><h3 id="third-party-reporters">Third-Party Reporters</h3><p>Mocha allows you to define custom reporters. For more information see the <a href="https://github.com/mochajs/mocha/wiki/Third-party-reporters">wiki</a>. An example is the <a href="https://github.com/travisjeffery/mocha-teamcity-reporter">TeamCity reporter</a>.</p><h3 id="html-reporter">HTML Reporter</h3><p><strong>The HTML reporter is not intended for use on the command-line.</strong></p><h2 id="running-mocha-in-the-browser">Running Mocha in the Browser</h2><p>Mocha runs in the browser. Every release of Mocha will have new builds of <code class="highlighter-rouge">./mocha.js</code> and <code class="highlighter-rouge">./mocha.css</code> for use in the browser.</p><h3 id="browser-specific-methods">Browser-specific methods</h3><p>The following method(s) <em>only</em> function in a browser context:</p><p><code class="highlighter-rouge">mocha.allowUncaught()</code> : If called, uncaught errors will not be absorbed by the error handler.</p><p>A typical setup might look something like the following, where we call <code class="highlighter-rouge">mocha.setup('bdd')</code> to use the <strong>BDD</strong> interface before loading the test scripts, running them <code class="highlighter-rouge">onload</code> with <code class="highlighter-rouge">mocha.run()</code>.</p><div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;title&gt;</span>Mocha Tests<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"https://cdn.rawgit.com/mochajs/mocha/2.2.5/mocha.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"mocha"</span><span class="nt">&gt;&lt;/div&gt;</span>

  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdn.rawgit.com/jquery/jquery/2.1.4/dist/jquery.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdn.rawgit.com/Automattic/expect.js/0.3.1/index.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdn.rawgit.com/mochajs/mocha/2.2.5/mocha.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

  <span class="nt">&lt;script&gt;</span><span class="nx">mocha</span><span class="p">.</span><span class="nx">setup</span><span class="p">(</span><span class="s1">'bdd'</span><span class="p">)</span><span class="nt">&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"test.array.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"test.object.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"test.xhr.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script&gt;</span>
    <span class="nx">mocha</span><span class="p">.</span><span class="nx">checkLeaks</span><span class="p">();</span>
    <span class="nx">mocha</span><span class="p">.</span><span class="nx">globals</span><span class="p">([</span><span class="s1">'jQuery'</span><span class="p">]);</span>
    <span class="nx">mocha</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
  <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div><h3 id="grep">Grep</h3><p>The browser may use the <code class="highlighter-rouge">--grep</code> as functionality. Append a query-string to your URL: <code class="highlighter-rouge">?grep=api</code>.</p><h3 id="browser-configuration">Browser Configuration</h3><p>Mocha options can be set via <code class="highlighter-rouge">mocha.setup()</code>. Examples:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Use "tdd" interface.  This is a shortcut to setting the interface;</span>
<span class="c1">// any other options must be passed via an object.</span>
<span class="nx">mocha</span><span class="p">.</span><span class="nx">setup</span><span class="p">(</span><span class="s1">'tdd'</span><span class="p">);</span>

<span class="c1">// This is equivalent to the above.</span>
<span class="nx">mocha</span><span class="p">.</span><span class="nx">setup</span><span class="p">({</span>
  <span class="na">ui</span><span class="p">:</span> <span class="s1">'tdd'</span>
<span class="p">});</span>

<span class="c1">// Use "tdd" interface, ignore leaks, and force all tests to be asynchronous</span>
<span class="nx">mocha</span><span class="p">.</span><span class="nx">setup</span><span class="p">({</span>
  <span class="na">ui</span><span class="p">:</span> <span class="s1">'tdd'</span><span class="p">,</span>
  <span class="na">ignoreLeaks</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">asyncOnly</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">});</span>
</code></pre></div></div><h3 id="browser-specific-options">Browser-specific Option(s)</h3><p>The following option(s) <em>only</em> function in a browser context:</p><p><code class="highlighter-rouge">noHighlighting</code>: If set to <code class="highlighter-rouge">true</code>, do not attempt to use syntax highlighting on output test code.</p><h3 id="reporting">Reporting</h3><p>The “HTML” reporter is what you see when running Mocha in the browser. It looks like this:</p><p><img src="static/reporter-html.resize920,9999.691972754f.png" alt="HTML test reporter" class="screenshot"></p><p><a href="https://www.npmjs.com/package/mochawesome">Mochawesome</a> is a great alternative to the default HTML reporter.</p><h2 id="mochaopts"><code class="highlighter-rouge">mocha.opts</code></h2><p>Back on the server, Mocha will attempt to load <code class="highlighter-rouge">./test/mocha.opts</code> as a configuration file of sorts. The lines in this file are combined with any command-line arguments. The command-line arguments take precedence. For example, suppose you have the following <code class="highlighter-rouge">mocha.opts</code> file:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">--require</span> should
  <span class="nt">--reporter</span> dot
  <span class="nt">--ui</span> bdd
</code></pre></div></div><p>This will default the reporter to <code class="highlighter-rouge">dot</code>, require the <code class="highlighter-rouge">should</code> library, and use <code class="highlighter-rouge">bdd</code> as the interface. With this, you may then invoke <code class="highlighter-rouge">mocha</code> with additional arguments, here enabling <a href="http://growl.info">Growl</a> support, and changing the reporter to <code class="highlighter-rouge">list</code>:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mocha <span class="nt">--reporter</span> list <span class="nt">--growl</span>
</code></pre></div></div><h2 id="the-test-directory">The <code class="highlighter-rouge">test/</code> Directory</h2><p>By default, <code class="highlighter-rouge">mocha</code> looks for the glob <code class="highlighter-rouge">./test/*.js</code>, so you may want to put your tests in <code class="highlighter-rouge">test/</code> folder. If you want to include sub directories, use <code class="highlighter-rouge">--recursive</code>, since <code class="highlighter-rouge">./test/*.js</code> only matches files in the first level of <code class="highlighter-rouge">test</code> and <code class="highlighter-rouge">./test/**/*.js</code> only matches files in the second level of <code class="highlighter-rouge">test</code>.</p><h2 id="editor-plugins">Editor Plugins</h2><p>The following editor-related packages are available:</p><h3 id="textmate">TextMate</h3><p>The <a href="https://github.com/mochajs/mocha.tmbundle">Mocha TextMate bundle</a> includes snippets to make writing tests quicker and more enjoyable.</p><h3 id="jetbrains">JetBrains</h3><p><a href="https://www.jetbrains.com/">JetBrains</a> provides a <a href="https://www.jetbrains.com/idea/features/nodejs.html">NodeJS plugin</a> for its suite of IDEs (IntelliJ IDEA, WebStorm, etc.), which contains a Mocha test runner, among other things.</p><p><img src="static/jetbrains-plugin.resize920,9999-pngquant.8775188e45.png" alt="JetBrains Mocha Runner Plugin in Action" class="screenshot"></p><p>The plugin is titled <strong>NodeJS</strong>, and can be installed via <strong>Preferences</strong> &gt; <strong>Plugins</strong>, assuming your license allows it.</p><h3 id="wallabyjs">Wallaby.js</h3><p><a href="https://wallabyjs.com/">Wallaby.js</a> is a continuous testing tool that enables real-time code coverage for Mocha with any assertion library in VS Code, Atom, JetBrains IDEs (IntelliJ IDEA, WebStorm, etc.), Sublime Text and Visual Studio for both browser and node.js projects.</p><p><img src="static/wallaby.resize920,9999-pngquant.7cb26ce5d9.png" alt="Wallaby.js in Action" class="screenshot"></p><h3 id="emacs">Emacs</h3><p><a href="https://www.gnu.org/software/emacs/">Emacs</a> support for running Mocha tests is available via a 3rd party package <a href="https://github.com/scottaj/mocha.el">mocha.el</a>. The package is available on MELPA, and can be installed via <code class="highlighter-rouge">M-x package-install mocha</code>.</p><p><img src="static/emacs.resize920,9999-pngquant.a31a282d54.png" alt="Emacs Mocha Runner in Action" class="screenshot"></p><h3 id="mocha-sidebar-vs-code">Mocha Sidebar (VS Code)</h3><p><a href="https://marketplace.visualstudio.com/items?itemName=maty.vscode-mocha-sidebar">Mocha sidebar</a> is the most complete mocha extension for vs code.</p><h4 id="features-1">Features</h4><ul><li>see all tests in VS Code sidebar menu</li><li>run &amp; debug tests for each level hierarchy from all tests to a single test (and each describe of course)</li><li>auto run tests on file save</li><li>see tests results directly in the code editor</li></ul><p><img src="static/mocha_side_bar.resize920,9999-pngquant.985f40fc62.png" alt="mocha side bar in Action" class="screenshot"></p><h2 id="examples">Examples</h2><p>Real live example code:</p><ul><li><a href="https://github.com/visionmedia/express/tree/master/test">Express</a></li><li><a href="https://github.com/senchalabs/connect/tree/master/test">Connect</a></li><li><a href="https://github.com/visionmedia/superagent/tree/master/test/node">SuperAgent</a></li><li><a href="https://github.com/LearnBoost/websocket.io/tree/master/test">WebSocket.io</a></li><li><a href="https://github.com/mochajs/mocha/tree/master/test">Mocha</a></li></ul><h2 id="testing-mocha">Testing Mocha</h2><p>To run Mocha’s tests, you will need GNU Make or compatible; Cygwin should work.</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> /path/to/mocha
<span class="nv">$ </span>npm install
<span class="nv">$ </span>npm <span class="nb">test</span>
</code></pre></div></div><p>To use a different reporter:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ REPORTER</span><span class="o">=</span>nyan npm <span class="nb">test</span>
</code></pre></div></div><h2 id="more-information">More Information</h2><p>In addition to chatting with us on <a href="https://gitter.im/mochajs/mocha">Gitter</a>, for additional information such as using spies, mocking, and shared behaviours be sure to check out the <a href="https://github.com/mochajs/mocha/wiki">Mocha Wiki</a> on GitHub. For discussions join the <a href="https://groups.google.com/group/mochajs">Google Group</a>. For a running example of Mocha, view <a href="example/tests.html">example/tests.html</a>. For the JavaScript API, view the <a href="https://github.com/mochajs/mocha/blob/master/lib/mocha.js#L51">source</a>.</p></main><footer><span><a href="https://mochajs.org">mochajs.org</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.<p><em>Last updated: Tue Mar 20 17:05:53 2018</em></p></span></footer><script src="static/bundle-573.9bd2b3b02a.js" async=""></script></body></html>