<!DOCTYPE html>
<html>
<head>
    <title>Carte du réseau de transport TAN.</title>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <link rel="stylesheet" href="assets/css/leaflet.css" />
    <script src="assets/js/min/vendor.js"></script>
   <!--<script src="assets/js/leaflet.js"></script>-->
    <link rel="stylesheet" href="assets/css/L.Control.Sidebar.css" />
    <link rel="stylesheet" href="assets/css/Control.MiniMap.css" />
    <link rel="stylesheet" href="assets/css/leaflet.contextmenu.css" />
    <link rel="shortcut icon" href="docs-assets/ico/favicon.png">

<!-- <link href="assets/css/bootstrapOS7.min.css" rel="stylesheet"> -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">

<!-- Favicon -->
    <link rel="apple-touch-icon" sizes="57x57" href="icon/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="icon/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="icon/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="icon/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="icon/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="icon/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="icon/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icon/apple-touch-icon-152x152.png">
    <link rel="icon" type="image/png" href="icon/favicon-196x196.png" sizes="196x196">
    <link rel="icon" type="image/png" href="icon/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="icon/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="icon/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="icon/favicon-32x32.png" sizes="32x32">
    <meta name="msapplication-TileColor" content="#2b5797">
    <meta name="msapplication-TileImage" content="icon/mstile-144x144.png">
        <script type="text/javascript"> if (!window.console) console = {log: function() {}}; </script>

<!-- Bootstrap -->

   <!-- <script src="assets/js/jquery-1.10.2.min.js"></script>-->

   <!-- <script src="assets/js/bootstrap.min.js"></script>-->
   <!-- <script src="assets/js/holder.js"></script>-->

<style type="text/css">
  div.tooltip {
        background: rgb(235, 235, 235);
        background-clip: padding-box;
        border-color: #777;
        border-color: rgba(0,0,0,0.25);
        border-radius: 4px;
        border-style: solid;
        border-width: 4px;
        color: #111;
        display: block;
        font: 12px/20px "Helvetica Neue", Arial, Helvetica, sans-serif;
        font-weight: bold;
        padding: 0;
        position: absolute;
        -webkit-user-select: none;
           -moz-user-select: none;
            -ms-user-select: none;
                user-select: none;
        white-space: nowrap;
        z-index: 9999;
}
path{
   cursor: pointer;
}
.autocomplete-suggestions { border: 1px solid #999; background: #FFF; overflow: auto; }
.autocomplete-suggestion { padding: 2px 5px; white-space: nowrap; overflow: hidden; }
.autocomplete-selected { background: #F0F0F0; }
.autocomplete-suggestions strong { font-weight: normal; color: #3399FF; }
</style>

    <script type="text/javascript">
   /*   $(window).load(function() {
          actishow();
          console.log("actiShow");
      });*/
      $(document).on("map:ready", function(){
        console.log("ok fini");
        actishow();
      });
      function actishow() {
          $('#loadacti').fadeOut();
          $('.sidebar').css({"display":"block"})
      };
      //setTimeout(actishow, 3000);
    </script>

    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/css/L.Control.ToggleIti.css" />
    <!--[if lte IE 8]><link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.ie.css" /><![endif]-->

    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="assets/js/html5shiv.js"></script>
      <script src="assets/js/respond.min.js"></script>
    <![endif]-->



</head>
<body >

  <div id="loadacti">
    <div class="container">
      <div class="row">
        <div class="col-sm-4 col-sm-offset-4">
          <div class="panel panel-default">
            <div class="panel-body panel-loading text-center">
             Chargement de la carte en cours
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <nav class="navbar navbar-default navbar-tan navbar-inverse navbar-fixed-top" role="navigation">
    <div class="col-xs-3 col-sm-2 col-md-1 col-lg-1">	<!-- Brand and toggle get grouped for better mobile display -->
	<div class="navbar-header ">
	  <a class="navbar-brand" href="#">TAN</a>
	</div>
</div>

	<!-- Collect the nav links, forms, and other content for toggling -->
	<div class="collapse in navbar-collapse" id="bs-example-navbar-collapse-1">

<!--<div class="col-xs-9 col-sm-4 col-md-5 col-lg-7">-->
<div class="col-xs-9 col-sm-10 col-md-11">

	<div class="row">



<!-- TOP BAR SEARCH -->
	<div id="topbar1">
		<div class="navbar-form" >
		    
		  
		      <div class="input-group">
		        <input id="input_search_top" type="text" class="form-control" placeholder="Rechercher une adresse, un lieu, un arr&ecirc;t…">
		        <span class="input-group-btn">
		        	<button id="btn_search_top"  class="btn btn-success" type="button"><span class="ion-search"></span></button>
		    		<button id="btn_search_load_top"  class="btn btn-success" type="button"><span class="ion-refreshing"></span></button>
		    	</span>
		      </div>


		</div>
	</div>



<!-- TOP BAR SEARCH 2 -->
		<div id="topbar2">
			<div class="navbar-form" >

			      <div class="input-group">
			        <select id="select_result_top" class="form-control">
		            </select>
			        <span class="input-group-btn">
			          <button id="btn_locate_search_top" class="btn btn-default" type="button"><span class="ion-location"></span></button>
			          <button id="btn_clear_search_top" class="btn btn-danger" type="button"><span class="ion-close-round"></span></button>
			        </span>
			      </div>


			</div>
		</div> 





	</div>
</div>
<!---
<div class="col-xs-12 col-sm-6 col-md-6 col-lg-4 droptravaux">
	<ul class="nav navbar-nav navbar-right"  style="width: 100%;">
        <li class="dropdown" style="width: 100%;text-align: left;">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="width: 100%;padding:0 15px 0 0; margin-top:-10px; color:#fff;background-color:#ea711e">
          	<img src="assets/images/les_grands_travaux_d-ete.png" alt="Les grands travaux d'été">
          	<span class="hidden-sm hidden-xs zoneCurrentMode">
          		<span class="badge" style="font-size: 16px;color: #ea711e;background-color: #fff;border-radius: 50%;">1</span>
          		 Du 4 au 10 juillet</span> <span aria-hidden="true" class="pull-right glyphicon glyphicon-chevron-down" style="margin-top:25px">
          		</span>
          </a>
          <ul class="dropdown-menu listePhasesTravaux" style="width: 100%;">
          	<li class="dropdown-header" style="font-size: 14px;color: #333; padding-right:10px; padding-left:10px">Cliquez sur les différentes phases pour découvrir les grands travaux d’été…</li>
            <li role="separator" class="divider" style="margin: 0;"></li>

            <li class="phase0"><a href="#" style="padding: 6px 10px;">Votre réseau habituel</a></li>

<li role="separator" class="divider" style="margin: 0;"></li>
            <li class="phase1 phase1-4-10"><a href="#" style="padding: 6px 10px 3px 10px"><span class="badge" style="margin-right:5px;font-size: 16px;color: #fff;background-color: #ea711e;border-radius: 50%;visibility:hidden">1</span> Du 4 au 10 juillet</a></li>
            <li class="phase1 phase2-4-10"><a href="#" style="padding: 3px 10px;"><span class="badge" style="margin-right:5px;font-size: 16px;color: #fff;background-color: #ea711e;border-radius: 50%;">1</span> Du 11 au 17 juillet </a></li>
            <li class="phase1 phase3-11-17"><a href="#" style="padding: 3px 10px 6px 10px"><span class="badge" style="margin-right:5px;font-size: 16px;color: #fff;background-color: #ea711e;border-radius: 50%;visibility:hidden">1</span> Du 18 au 24 juillet </a></li>

<li role="separator" class="divider" style="margin: 0;"></li>

            <li class="phase2 phase4-25-15"><a href="#" style="padding: 6px 10px;"><span class="badge" style="margin-right:5px;font-size: 16px;color: #fff;background-color: #ea711e;border-radius: 50%;">2</span> Du 25 juillet au 15 août </a></li>

<li role="separator" class="divider" style="margin: 0;"></li>

            <li class="phase3 phase3-16-28"><a href="#" style="padding: 6px 10px;"><span class="badge" style="margin-right:5px;font-size: 16px;color: #fff;background-color: #ea711e;border-radius: 50%;">3</span> Du 16 au 28 août </a></li>

<li role="separator" class="divider" style="margin: 0;"></li>

            <li class="dropdown-header" style="color: #333;padding: 6px 10px; "><a class="btn btn-warning" target="_blank" style="padding: 6px 20px; background:rgb(234, 113, 30); color:#fff;font-size: 18px;" href="https://www.tan.fr/fr/menu/se-deplacer/tan/info-trafic-br-nbsp-/travaux-d-ete-2016-26187.kjsp">En savoir plus sur les travaux</a></li>
          </ul>
        </li>
      </ul>
</div>
-->
	</div><!-- /.navbar-collapse -->
  </nav>
    <!--
    <a href="https://www.tan.fr/folle-journee-2017-37251.kjsp?" target="_blank" style="position: absolute; z-index: 999;top: 80px;right: 60px;" class="hidden-xs"><img src="/assets/images/folle-journee.png" alt="Se rendre à la folle journée 2017"></a>
  
  <a href="https://www.tan.fr/folle-journee-2017-37251.kjsp?" target="_blank" class="visible-xs" style="background: #f1914b;position: absolute;top: 65px;width: 100%;text-align: center;"><img src="/assets/images/folle-journee.png" alt="Se rendre à la folle journée 2017">
</a>-->
      <div id="sidebarleft">
          <h1>Votre itin&eacute;raire avec <img src="assets/images/destineo.png" alt="Destineo"></h1>
          <hr style="padding: 5px 0">
              <div class="row">
                  <div class="col-xs-12">
                    <!-- ===========================   ETAPE 1   ===================================== -->

<div id="iti_etap1">
  <div class="row">
  <div class="col-xs-12">

    <form role="form" class="form-inline" >


    <div id="search_departure" class="input-group">
        <span class="input-group-btn">
          <button id="btn_locate_user_position_departure" class="btn btn-default" type="button" title="Me localiser" ><span class="ion-android-locate"></span></button>
        </span>
        <label for="input_search_departure" class="sr-only">Point de d&eacute;part</label>
        <input type="text" class="form-control" id="input_search_departure" placeholder="Point de d&eacute;part">
        <span class="input-group-btn">
          <button id="btn_search_departure" class="btn btn-primary" type="button"><span class="ion-search"></span></button>
          <button id="btn_search_load_departure" class="btn btn-primary" type="button"><span class="ion-refreshing"></span></button>
        </span>

      </div><!-- /input-group -->

      <select id="departure_results" class="form-control">
      </select>

    <div id="departure" class="input-group">
        
        <label for="input_departure" class="sr-only">Point de d&eacute;part</label>
        <input type="text" class="form-control" id="input_departure" placeholder="Point de d&eacute;part" disabled>
        <span class="input-group-btn">
          <button id="btn_locate_departure" class="btn btn-default" type="button" title="Localiser" ><span class="ion-location"></span></button>
          <button id="btn_clear_departure" class="btn btn-danger" type="button"><span class="ion-close-round"></span></button>
       
        </span>
          

      </div><!-- /input-group -->

  <hr>

    <div id="search_arrival" class="input-group">
        <span class="input-group-btn">
          <button id="btn_locate_user_position_arrival" class="btn btn-default" type="button" title="Me localiser"><span class="ion-android-locate"></span></button>
        </span>
        <label for="input_search_arrival" class="sr-only">Point de d'arriv&eacute;e</label>
      <input type="text" class="form-control" id="input_search_arrival" placeholder="Point de d'arriv&eacute;e">
        <span class="input-group-btn">
          <button id="btn_search_arrival" class="btn btn-primary" type="button"><span class="ion-search"></span></button>
          <button id="btn_search_load_arrival" class="btn btn-primary" type="button"><span class="ion-refreshing"></span></button>
        </span>
      </div><!-- /input-group -->

      <select id="arrival_results" class="form-control">
      </select>

    <div id="arrival" class="input-group">

        <label for="input_arrival" class="sr-only">Point de d'arriv&eacute;e</label>
        <input type="text" class="form-control" id="input_arrival" placeholder="Point de d'arriv&eacute;e" disabled>
        <span class="input-group-btn">
            <button id="btn_locate_arrival" class="btn btn-default" type="button" title="Localiser" ><span class="ion-location"></span></button>
        
          <button id="btn_clear_arrival" class="btn btn-danger" type="button"><span class="ion-close-round"></span></button>
        </span>
      </div><!-- /input-group -->

  <hr>  

    <div class="input-group date input-group-sm" data-date="" data-date-format="dd-mm-yyyy">
      <span class="input-group-addon">Le</span>
      <input id="input_date" class="form-control" type="text" readonly="" value="">
    </div>

  <hr>  
  <select id="select_sens" class="form-control input-sm">
          <option value="1" selected="selected">Partir apr&egrave;s</option>
          <option value="-1">Arriver avant</option>        
      </select>
      <br>
      <br>



          <div class="input-group input-group-sm">
            <select id="select_heure" class="form-control">
                <option value="00" selected="selected">00</option>
                <option value="01">01</option>
                <option value="02">02</option>
                <option value="03">03</option>
                <option value="04">04</option>
                <option value="05">05</option>
                <option value="06">06</option>
                <option value="07">07</option>
                <option value="08">08</option>
                <option value="09">09</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
                <option value="21">21</option>
                <option value="22">22</option>
                <option value="23">23</option>       
            </select>
            <span class="input-group-addon input-group-addon-default">H</span>
            <select id="select_minute" class="form-control">
                <option value="00" selected="selected">00</option>
                <option value="05">05</option>
                <option value="10">10</option>
                <option value="15">15</option>
                <option value="20">20</option>
                <option value="25">25</option>
                <option value="30">30</option>
                <option value="35">35</option>
                <option value="40">40</option>
                <option value="45">45</option>
                <option value="50">50</option>
                <option value="55">55</option>      
            </select>





            <span class="input-group-addon input-group-addon-default">minutes</span>
          </div>
      <br>
  <select id="select_criteria" class="form-control input-sm" style="display:none">
        <option value="0" selected="selected"></option>
          <option value="1">Arriver le plus rapidement</option>
          <option value="2">Eviter les correpondances</option>    
          <option value="3">Eviter la marche &agrave; pied</option>        
          <option value="4">Eviter le temps d'attente</option>        
      </select>

  <hr>  

    <button type="button" id="btn_search_iti" class="btn btn-block btn-sm btn-success">Rechercher l'itin&eacute;raire</button>

  <hr>  

<div class="well well-sm">
  Saisir une adresse postale, un lieu public ou un nom d'arr&ecirc;t. Pour pr&eacute;ciser votre recherche, indiquer la date et l'heure de d&eacute;part ou d'arriv&eacute;e souhait&eacute;es et vos pr&eacute;f&eacute;rences d'itin&eacute;raire.
</div> 
  </form>
  </div>
  </div>
</div>


<!-- ===========================   ETAPE 2   ===================================== -->

<div id="iti_etap2">
  <div class="row">
  <div class="col-xs-12">

    <div class="well well-sm">
      <div class="row">
        <div class="col-sm-2 col-xs-1"><span class="label label-success"><span class="ion-flag"></span></span></div>
        <div id="div_departure_step2" class="col-sm-10 col-xs-11"></div>
      </div>
      <hr>
      <div class="row">
        <div class="col-sm-2 col-xs-1"><span class="label label-danger"><span class="ion-flag"></span></span></div>
        <div id="div_arrival_step2" class="col-sm-10 col-xs-11"></div>
      </div>
      <hr>
      <div class="row">
        <div class="col-sm-2 col-xs-1"><span class="label label-primary"><span class="ion-android-information"></span></span></div>
        <div id="div_recap_step2" class="col-sm-10 col-xs-11"></div>
      </div>
    </div>
 
    <a type="button" id="btn_modif_iti_step2" class="btn btn-block btn-sm btn-warning">Modifier l'itin&eacute;raire</a>
    <a type="button" id="btn_newsearch_iti_step2" class="btn btn-block btn-sm btn-primary">Nouvelle recherche</a>

  <hr> 
  <table class="table table-striped table-hover table-condensed">
    <thead>
      <tr >
        <th class="text-center"><small>Horaires</small></th>
        <th class="text-center"><small>Dur&eacute;e</small></th>
        <th colspan="2"><small>Modes de transport</small></th>
      </tr>
    </thead>
    <tbody>
      <tr id="journey_result_1">
        <td class="text-center" id="journey_result_1_hour">
          10h50
          <br>
          11h44
        </td>
        <td class="text-center" id="journey_result_1_duration">
          <strong>54 min</strong>
        </td>
        <td id="journey_result_1_modes">

          <span class="icomod icomod_bus"></span> <span class="icomod icomod_bus"></span> 
        </td>
        <td class="text-right">
          <a type="button" class="btn btn-default btn-xs btn-detail-iti"><span class="ion-arrow-right-b"></span></a>
        </td>
      </tr>
      <tr id="journey_result_2">
        <td class="text-center" id="journey_result_2_hour">
          10h50
          <br>
          11h44
        </td>
        <td class="text-center" id="journey_result_2_duration">
          <strong>54 min</strong>
        </td>
        <td id="journey_result_2_modes">
          <span class="icomod icomod_bus"></span> <span class="icomod icomod_bus"></span> </td>
        <td class="text-right">
          <a type="button" class="btn btn-default btn-xs btn-detail-iti"><span class="ion-arrow-right-b"></span></a>
        </td>
      </tr>
      <tr  id="journey_result_3">
        <td class="text-center" id="journey_result_3_hour">
          10h50
          <br>
          11h44
        </td>
        <td class="text-center" id="journey_result_3_duration">
          <strong>54 min</strong>
        </td>
        <td id="journey_result_3_modes" >
          <span class="icomod icomod_bus"></span> <span class="icomod icomod_bus"></span> 
        </td>
        <td class="text-right">
          <a type="button" class="btn btn-default btn-xs btn-detail-iti"><span class="ion-arrow-right-b"></span></a>
        </td>
      </tr>
      <tr id="journey_result_4">
          <td class="text-center" id="journey_result_4_hour">
              10h50
              <br>
              11h44
          </td>
          <td class="text-center" id="journey_result_4_duration">
              <strong>54 min</strong>
          </td>
          <td id="journey_result_4_modes" >
              <span class="icomod icomod_bus"></span> <span class="icomod icomod_bus"></span>
          </td>
          <td class="text-right">
              <a type="button" class="btn btn-default btn-xs btn-detail-iti"><span class="ion-arrow-right-b"></span></a>
          </td>
      </tr>
      <tr  id="journey_result_5">
          <td class="text-center" id="journey_result_5_hour">
              10h50
              <br>
              11h44
          </td>
          <td class="text-center" id="journey_result_5_duration">
              <strong>54 min</strong>
          </td>
          <td id="journey_result_5_modes" >
              <span class="icomod icomod_bus"></span> <span class="icomod icomod_bus"></span>
          </td>
          <td class="text-right">
              <a type="button" class="btn btn-default btn-xs btn-detail-iti"><span class="ion-arrow-right-b"></span></a>
          </td>
      </tr>
      <tr  id="journey_result_6">
          <td class="text-center" id="journey_result_6_hour">
              10h50
              <br>
              11h44
          </td>
          <td class="text-center" id="journey_result_6_duration">
              <strong>54 min</strong>
          </td>
          <td id="journey_result_6_modes" >
              <span class="icomod icomod_bus"></span> <span class="icomod icomod_bus"></span>
          </td>
          <td class="text-right">
              <a type="button" class="btn btn-default btn-xs btn-detail-iti"><span class="ion-arrow-right-b"></span></a>
          </td>
      </tr>
    </tbody>
  </table>


  <div class="btn-group btn-group-sm btn-group-justified">
    <a id="btn_plus_tot" type="button" class="btn btn-default "><span class="ion-arrow-left-b"></span> Plus t&ocirc;t</a>
    <a id="btn_plus_tard" type="button" class="btn btn-default ">Plus tard <span class="ion-arrow-right-b"></span></a>
  </div>

  <hr>


<button id="btn_retour_step2" type="button" id="btn_retour_iti" class="btn btn-block btn-sm btn-success">Trajet retour</button>
  
  </div>
  </div>

</div>

<!-- ===========================   ETAPE 3   ===================================== -->

<div id="iti_etap3">
  <div class="row">
  <div class="col-xs-12">
    
  <div class="well well-sm">
      <div class="row">
        <div class="col-sm-2 col-xs-1"><span class="label label-primary"><span class="ion-android-data"></span></span></div>
        <div id="div_duration_step3" class="col-sm-10 col-xs-11">Temps de parcours : <strong>54 min</strong></div>
      </div>
      <hr>
      <div class="row">
        <div class="col-sm-2 col-xs-1"><span class="label label-primary"><span class="ion-android-information"></span></span></div>
        <div id="div_recap_step3" class="col-sm-10 col-xs-11"></div>
      </div>
    </div>
    <a type="button" id="btn_retour_list" class="btn btn-block btn-sm btn-primary">Retour &agrave; la liste des r&eacute;sultats</a>
    
  <hr> 
<h3>Feuille de route</h3>
<table class="table table-bordered table-condensed">
  <thead>
    <tr >
        <th class="col-xs-2"><small>Heure</small></th>
        <th class="col-xs-6"><small>Indications</small></th>
        <th class="col-xs-4 text-center"><small>Dur&eacute;e</small></th>
      </tr>
  </thead>
  <tbody id="table_iti_result">

<!-- Cas de figure 1 -->

    <tr>
      <td><strong>10h50</strong></td>
      <td>
        <small>De l'arr&egrave;t prendre…</small>
      </td>
      <td class="text-center">
        <strong>03 min</strong><br>
        <span class="icomod icomod_bus"></span> <span class="icoindice icoindice_A"></span>
      </td>
    </tr>

<!-- Cas de figure 2 -->

    <tr>
      <td ><strong>10h53</strong></td>
      <td><small>De l'arr&egrave;t Mairie de Bouguenais, prendre le Bus 36 en direction de Croix Jeannette</small></td>
      <td class="text-center" rowspan="2">
        <strong>03 min</strong><br>
        <span class="icomod icomod_tram"></span> <span class="icoindice icoindice_1"></span>
      </td>
    </tr>

    <tr>
      <td><strong>10h56</strong></td>
      <td><small>Descendre &agrave;…</small></td>
    </tr>

  
<!-- Cas de figure 3 -->

    <tr>
      <td ><strong>10h57</strong></td>
      <td  rowspan="2"><small>De l'arr&egrave;t prendre…</small></td>
      <td class="text-center" rowspan="2">
        <strong>03 min</strong><br>
        <span class="icomod icomod_bus"></span> <span class="icoindice icoindice_A"></span>
      </td>
    </tr>

    <tr>
      <td><strong>10h59</strong></td>
    </tr>

  </tbody>
</table>
    
  

  <div class="btn-group btn-group-justified btn-group-sm ">
    <a id="btn_modif_iti_step3" type="button" class="btn btn-warning "><span class="ion-edit"></span> Modifier</a>
    <a id="btn_retour_step3" type="button" class="btn btn-success "><span class="ion-arrow-return-left"></span> Trajet retour</a>
  </div>
<br>
  <div class="btn-group btn-group-justified btn-group-sm ">
    <a id="btn_print" type="button" class="btn btn-primary "><span class="ion-printer"></span> Imprimer</a>
    <a id="btn_newsearch_iti_step3" type="button" class="btn btn-danger "><span class="ion-close-circled"></span> Annuler</a>
  </div>

  
  </div>
  </div>

</div>











<script type="text/javascript">
  $(".input-group.date").datepicker({ 
    todayBtn: "linked",
    language: "fr",
    autoclose: true,
    todayHighlight: true });
  </script>                  </div>
              </div>
      </div>
      <div id="sidebarright">
          <h1>Sidebar</h1>
              <div class="row">
                  <div class="col-xs-6">TEST</div>
                  <div class="col-xs-6">TEST</div>
              </div>
      </div>

      <div id="map" style=""></div>

<nav class="navbar navbar-default navbar-inverse navbar-fixed-bottom" role="navigation">

    <div class="navbar-form hidden-xs" >
        <p id="survolStopAreaName"class="navbar-text pull-left"></p>
      <div class="btn-group pull-right btn-group-sm">
        <a type="button" class="btn btn-sm btn-primary" href="http://dev.actigraph.fr/cartes/TAN_DEV/aide.php" target="_blank"><span class="ion-help-circled"></span> Aide</a>
        <a type="button" class="btn btn-sm btn-primary" id="printMap"><span class="ion-printer"></span> Imprimer</a>
      </div>
    </div>
</nav>

      <div class="modal fade" id="modalStreetView" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title" id="myModalLabel">StreetView</h4>
            </div>
            <div class="modal-body">
              <div id="streetviewcontainer" style="width:550px;height:400px"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Layer Control -->
      <!--<script src="assets/js/leaflet.groupedlayercontrol.js"></script>-->
      <!-- Sidebar -->
      <!--<script src="assets/js/L.Control.Sidebar.js"></script>-->
      <!-- MiniMap -->
      <!--<script src="assets/js/Control.MiniMap.js" type="text/javascript"></script>-->
      <!-- Toggle Iti -->
      <!--<script src="assets/js/L.Control.ToggleIti.js" type="text/javascript"></script>-->
      <!-- Lable -->
      <!--<script src="assets/js/L.label.js" type="text/javascript"></script>-->



      <!--<script src="assets/js/jquery.autocomplete.min.js"></script>-->
      <!--<script src="assets/js/d3.v3.min.js"></script>-->
      <!--<script src="assets/js/device.min.js"></script>-->
      <!--<script src="assets/js/leaflet.contextmenu.js"></script>-->


      <script type="text/javascript">
        window.config = {
	"center_lat":"47.215837",
	"center_lng":"-1.550499",
	"center_zoom":"-1.550499",
	"max_zoom":"18",
	"min_zoom":"12",
	"navitia_base_url":"http://paysdelaloire1.prod.navitia.com/cgi-bin/gwnavitia.dll/API?Interface=1_7&",
	"serviceURL":"https://plan-tan.fr/services/",
	"serveurURL":"https://plan-tan.fr",
	"hasInitineraire":true,
	"hasMinimap":true,
	"hasenSavoirPlus":true,
	"enableDefaultZoomControl":true,
	"hasUserLocalisation":true,
	"enableRightSidebar":false,
	"PopUpPaddingsLines": {
		"left":0,
		"top":0
	},
	"tileLinesUrl":"/lignestiles.php?z={z}&x={x}&y={y}",
	"tileUrl":"/tiles/{z}/{x}/{y}.png",
	"tileMiniMapUrl":"/tiles/{z}/{x}/{y}.png",
	//"tileMiniMapUrl":"http://{s}.tile.osm.org/{z}/{x}/{y}.png",
	"creditsTile":"Map data &copy; 2011 OpenStreetMap contributors, Imagery &copy; 2011 CloudMade. Réalisation <a href='http://actigraph.fr' target='_blank'>Actigraph</a>",
	"creditsMiniMapTile":"Map data &copy; 2011 OpenStreetMap contributors, Imagery &copy; 2011 CloudMade",
	"hasSecondTile":false,
	"secondTileUrl":"http://{s}.tile.osm.org/{z}/{x}/{y}.png",
	"creditsSecondTileUrl":"Map data &copy; 2011 OpenStreetMap contributors, Imagery &copy; 2011 CloudMade",
	"epaisseurLignes": [0, 1.8, 3.1, 3.3, 5.3, 8.3],
	"epaisseurDot": ["0", "0.75, 3.5", "1.4, 6", "1.5, 6.5", "2.5, 11", "3, 18"],
	"epaisseurDash": ["0", "3.6, 3.6", "6.2, 6.2", "6.6, 6.6", "10.6, 10.6", "16.6, 16.6"],
	"epaisseurType": {
		"bold":1.5,
		"normal":1,
		"thin":0.7
	},
	"rightClick":{
		"enabled":true,
		"streetview":true,
		"itineraire":true
	},
	"isNavitiaoIO":true,
	"lineBackgroundAlwaysShow":false,
	"advancedItineraireSegments":false,
	"nordouest_lat": "47.4083",
	"nordouest_lng": "-1.8873",
	"sudest_lat": "47.0572",
	"sudest_lng": "-1.2089",
	"adminMode":false,
	"importantLines":["line:NAN:1-0","line:NAN:2-0","line:NAN:3-0","line:NAN:4-0"],
	"importantLinesZoomLevel":"12-12",
	"survolstoparealigne":false,
};
window.generatePopUpLine = function(data){
	if(data.properties.isPopupLigne == undefined || data.properties.isPopupLigne == true){
		var inficeFileName = data.properties.code_ligne.replace(/:/g, "_");
		if(data.properties.code_ligne == 'line:NAN:1-0'){
			data.properties.desc = 'François Mitterrand / Jamet < > Beaujoire / Ranzay';
		}
		if(data.properties.code_ligne == 'line:NAN:96-0'){
			data.properties.desc = 'Beauséjour < > La Chapelle - Aulnay';
		}
		var popupContent = "<div class='etiquette'><div class='row'><div class='col-xs-3'><img style='width :20px; margin-right:10px' src='"+window.config.serveurURL+"/assets/images/indicesRoute/" + inficeFileName + ".png'></div><div class='col-xs-9 col-padding'><b>" + data.properties.titre_ligne + "</b></div></div><hr>" + data.properties.desc;
		if (!window.config.adminMode)
			popupContent += "<hr>" + "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-horaires.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a class='btn btn-block btn-success btn-sm' href='https://www.tan.fr/fr/menu/se-deplacer/tan/horaires/' target='_blank'>Voir les horaires</a></div></div>" + "";
			if(currentPhase == 3 || currentPhase == 4){
				if(data.properties.code_ligne == 'line:NAN:2-0')
					popupContent += "<hr>" + "<div class='row'><div class='col-xs-12' style='padding:0'><a class='btn btn-block btn-warning btn-sm' style='background:rgb(234, 113, 30) none repeat scroll 0% 0%' href='"+window.config.serveurURL+"/assets/BRT.pdf' target='_blank'>Voir le tracé dévié de cet été</a></div></div>" + "";
			}
		else if(window.config.editlines)
			popupContent += "<hr>" + "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-modif.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a class='btn btn-block btn-success btn-sm handlemodifline' href='#' data-line='"+data.properties.code_ligne+"'>Modifier le tracer</a></div></div>" + "";
		return popupContent+"</div>";
	}else{
		if(data.properties.isMarche){
			return "<div class='etiquette'><b>Marche à pied</b></div>";
		}else if(data.properties.isVelo){
			return "<div class='etiquette'><b>Vélo</b></div>";
		}
	}
};
window.generatePopUpAgence = function(data){
	var popUpContent =  "<div class='etiquette'><div class='row'><div class='col-xs-3 col-padding'><img src='"+window.config.serveurURL+"/assets/js/images/agence.png'></div><div class='col-xs-9 col-padding'><b>" + capitaliseFirstLetter(data.libelle) + "</b></div></div><hr>" +
                        "<div class='etiquette-text-info'>" + data.adresseAgence + "<br>" + data.cp + " " + data.communeAgence + "<br>" + data.horaireAgence + "</div><hr>";
    if (window.config.hasInitineraire) {
        popUpContent +=    "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-depart.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='D_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-success btn-sm btn-enpartir'  target='_blank' onClick=\"setSelectedDeparturePoint('" + escape(JSON.stringify(data)) + "');\" >En partir</a></div></div>" +
                        "<div class='row row-padding'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-arrivee.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='A_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-danger btn-sm btn-yaller'  target='_blank' onClick=\"setSelectedArrivalPoint('" + escape(JSON.stringify(data)) + "');\" >Y Aller</a></div></div>"+"<hr>";
    }

    if(window.config.adminMode){
    	popUpContent +=     "<div class='row'><div class='col-xs-12'><a onClick=\"editPoi('" + escape(JSON.stringify(data)) + "');\"  class='btn btn-block btn-default btn-xs'  target='_blank' >Modifier</a></div></div>";
    	popUpContent +=     "<div class='row row-padding'><div class='col-xs-12'><a onClick=\"deletePoi('" + escape(JSON.stringify(data)) + "');\"  class='btn btn-block btn-danger btn-xs'  target='_blank' >Supprimer</a></div></div>"+"<hr>";
    }

    popUpContent +=     "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-pegman.png' ></div><div class='col-xs-9 col-padding'><a onClick=\"streetview('" + data.coord.lat + "','" + data.coord.lng + "')\" class='btn btn-block btn-default btn-xs btn-streetview'  target='_blank' >StreetView&hellip;</a></div></div>";
    if(window.config.hasenSavoirPlus)
			popUpContent += "<div class='row row-padding'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-information.png' ></div><div class='col-xs-9 col-padding'><a href='https://www.tan.fr/fr/menu/titres-tarifs/points-de-vente/espace-mobilite/' class='btn btn-block btn-default btn-xs'  target='_blank' >En savoir plus...</a></div></div>";
		popUpContent += "</div></div>";
    return popUpContent;
};
window.generatePopUpCoVoiturage = function(data){
	var popUpContent = "<div class='etiquette'><div class='row'><div class='col-xs-3 col-padding'><img src='"+window.config.serveurURL+"/assets/js/images/covoiturage.png'></div><div class='col-xs-9 col-padding'><b>" + capitaliseFirstLetter(data.libelle) + "</b></div></div><hr>";
    if (window.config.hasInitineraire) {
        popUpContent += "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-depart.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='D_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-success btn-sm btn-enpartir'  target='_blank' onClick=\"setSelectedDeparturePoint('" + escape(JSON.stringify(data)) + "');\" >En partir</a></div></div>" +
                        "<div class='row row-padding'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-arrivee.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='A_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-danger btn-sm btn-yaller'  target='_blank' onClick=\"setSelectedArrivalPoint('" + escape(JSON.stringify(data)) + "');\" >Y Aller</a></div></div>" +
                        "<hr>";
	}

    if(window.config.adminMode){
    	popUpContent +=     "<div class='row'><div class='col-xs-12'><a onClick=\"editPoi('" + escape(JSON.stringify(data)) + "');\"  class='btn btn-block btn-default btn-xs'  target='_blank' >Modifier</a></div></div>";
    	popUpContent +=     "<div class='row row-padding'><div class='col-xs-12'><a onClick=\"deletePoi('" + escape(JSON.stringify(data)) + "');\"  class='btn btn-block btn-danger btn-xs'  target='_blank' >Supprimer</a></div></div>"+"<hr>";
    }

    popUpContent +=    "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-pegman.png'></div><div class='col-xs-9 col-padding'><a onClick=\"streetview('" + data.coord.lat + "','" + data.coord.lng + "')\" class='btn btn-block btn-default btn-xs btn-streetview'  target='_blank' >StreetView&hellip;</a></div></div>" +
                        "</div>";
    return popUpContent;
};
window.generatePopUpPointService = function(data){
	var popUpContent =  "<div class='etiquette'><div class='row'><div class='col-xs-3 col-padding'><img src='"+window.config.serveurURL+"/assets/js/images/pointservice.png'></div><div class='col-xs-9 col-padding'><b>" + capitaliseFirstLetter(data.libelle) + "</b></div></div><hr>" +
                        "<div>" + data.adressePointService + "<br>" + data.cpPointService + " " + data.communePointService + "<br>" + data.precisionPointService + "</div><hr>";
        if (window.config.hasInitineraire) {
            popUpContent += "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-depart.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='D_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-success btn-sm btn-enpartir'  target='_blank' onClick=\"setSelectedDeparturePoint('" + escape(JSON.stringify(data)) + "');\" >En partir</span></a></div></div>" +
                        	"<div class='row row-padding'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-arrivee.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='A_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-danger btn-sm btn-yaller'  target='_blank' onClick=\"setSelectedArrivalPoint('" + escape(JSON.stringify(data)) + "');\" >Y Aller</span></a></div></div>" +
                        	"<hr>";
        }
    if(window.config.adminMode){
    	popUpContent +=     "<div class='row'><div class='col-xs-12'><a onClick=\"editPoi('" + escape(JSON.stringify(data)) + "');\"  class='btn btn-block btn-default btn-xs'  target='_blank' >Modifier</a></div></div>";
    	popUpContent +=     "<div class='row row-padding'><div class='col-xs-12'><a onClick=\"deletePoi('" + escape(JSON.stringify(data)) + "');\"  class='btn btn-block btn-danger btn-xs'  target='_blank' >Supprimer</a></div></div>"+"<hr>";
    }

        popUpContent += "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-pegman.png' ></div><div class='col-xs-9 col-padding'><a onClick=\"streetview('" + data.coord.lat + "','" + data.coord.lng + "')\" class='btn btn-block btn-default btn-xs btn-streetview'  target='_blank' >StreetView&hellip;</a></div></div>";
				if(window.config.hasenSavoirPlus)
					popUpContent += "<div class='row row-padding'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-information.png' ></div><div class='col-xs-9 col-padding'><a href='https://www.tan.fr/fr/menu/titres-tarifs/points-de-vente/relais-tan/' class='btn btn-block btn-default btn-xs'  target='_blank' >En savoir plus...</a></div></div>";
				popUpContent += "</div></div>";
    return popUpContent;
};
window.generatePopUpAutoPartage = function(data){
	var popUpContent =  "<div class='etiquette'><div class='row'><div class='col-xs-3 col-padding'><img src='"+window.config.serveurURL+"/assets/js/images/autopartage.png'></div><div class='col-xs-9 col-padding'><b>" + capitaliseFirstLetter(data.libelle) + "</b></div></div><hr>";
	popUpContent += '<div class="etiquette">'+data.adresseAutoPartage+'<br>'+data.communeAutoPartage+'<br><br/><div class="autopartagedispo">Recherche de la disponibilité</div><br/></div>';
    if (window.config.hasInitineraire) {
        popUpContent += "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-depart.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='D_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-success btn-sm btn-enpartir'  target='_blank' onClick=\"setSelectedDeparturePoint('" + escape(JSON.stringify(data)) + "');\" >En partir</span></a></div></div>" +
                        "<div class='row row-padding'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-arrivee.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='A_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-danger btn-sm btn-yaller'  target='_blank' onClick=\"setSelectedArrivalPoint('" + escape(JSON.stringify(data)) + "');\" >Y Aller</span></a></div></div>" +
                        "<hr>";
	}
	/*if(window.config.adminMode){
    	popUpContent +=     "<div class='row'><div class='col-xs-12'><a onClick=\"editPoi('" + escape(JSON.stringify(data)) + "');\"  class='btn btn-block btn-default btn-xs'  target='_blank' >Modifier</a></div></div>";
    	popUpContent +=     "<div class='row row-padding'><div class='col-xs-12'><a onClick=\"deletePoi('" + escape(JSON.stringify(data)) + "');\"  class='btn btn-block btn-danger btn-xs'  target='_blank' >Supprimer</a></div></div>"+"<hr>";
    }*/

    popUpContent +=     "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-pegman.png'></div><div class='col-xs-9 col-padding'><a onClick=\"streetview('" + data.coord.lat + "','" + data.coord.lng + "')\" class='btn btn-block btn-default btn-xs btn-streetview'  target='_blank' >StreetView&hellip;</a></div></div>" +
                        "</div>";
    return popUpContent;
};
window.generatePopUpParcRelais = function(data){
	var popUpContent =  "<div class='etiquette'><div class='row'><div class='col-xs-3 col-padding'><img src='"+window.config.serveurURL+"/assets/js/images/ParcRelaisTan.png'></div><div class='col-xs-9 col-padding'><b>" + capitaliseFirstLetter(data.libelle) + "</b></div></div><hr>" +
                        "<div class='etiquette-text-info'>" + data.adresseParcRelais + "<br>" + data.cpParcRelais + " " + data.communeParcRelais + "<br>Capacit&eacute; : " + data.capaciteParRelais + " places<br>" + data.horaireParcRelais + "<br>" + data.precisionParcRelais + "</div><hr>";
	if (window.config.hasInitineraire) {
        popUpContent += "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-depart.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='D_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-success btn-sm btn-enpartir'  target='_blank' onClick=\"setSelectedDeparturePoint('" + escape(JSON.stringify(data)) + "');\" >En partir</span></a></div></div>" +
                        "<div class='row row-padding'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-arrivee.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='A_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-danger btn-sm btn-yaller'  target='_blank' onClick=\"setSelectedArrivalPoint('" + escape(JSON.stringify(data)) + "');\" >Y Aller</span></a></div></div>" +
                        "<hr>";
    }
    if(window.config.adminMode){
    	popUpContent +=     "<div class='row'><div class='col-xs-12'><a onClick=\"editPoi('" + escape(JSON.stringify(data)) + "');\"  class='btn btn-block btn-default btn-xs'  target='_blank' >Modifier</a></div></div>";
    	popUpContent +=     "<div class='row row-padding'><div class='col-xs-12'><a onClick=\"deletePoi('" + escape(JSON.stringify(data)) + "');\"  class='btn btn-block btn-danger btn-xs'  target='_blank' >Supprimer</a></div></div>"+"<hr>";
    }

    popUpContent +=     "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-pegman.png'></div><div class='col-xs-9 col-padding'><a onClick=\"streetview('" + data.coord.lat + "','" + data.coord.lng + "')\" class='btn btn-block btn-default btn-xs btn-streetview'  target='_blank' >StreetView&hellip;</a></div></div>";
		if(window.config.hasenSavoirPlus)
			popUpContent += "<div class='row row-padding'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-information.png'></div><div class='col-xs-9 col-padding'><a href='https://www.tan.fr/fr/menu/se-deplacer/tan-/voiture/les-parkings-relais/' class='btn btn-block btn-default btn-xs'  target='_blank' >En savoir plus...</a></div>";
		popUpContent += "</div></div>";
	return popUpContent;
};
window.generatePopUpGare = function(data){
	var popUpContent =  "<div class='etiquette'><div class='row'><div class='col-xs-3 col-padding'><img src='"+window.config.serveurURL+"/assets/js/images/Gare.png'></div><div class='col-xs-9 col-padding'><b>" + capitaliseFirstLetter(data.libelle) + "</b></div></div><hr>";
    if (window.config.hasInitineraire) {
        popUpContent += "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-depart.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='D_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-success btn-sm btn-enpartir'  target='_blank' onClick=\"setSelectedDeparturePoint('" + escape(JSON.stringify(data)) + "');\" >En partir</span></a></div></div>" +
                        "<div class='row row-padding'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-arrivee.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='A_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-danger btn-sm btn-yaller'  target='_blank' onClick=\"setSelectedArrivalPoint('" + escape(JSON.stringify(data)) + "');\" >Y Aller</span></a></div></div>" +
                        "<hr>";
        }
    popUpContent +=   "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-pegman.png'></div><div class='col-xs-9 col-padding'><a onClick=\"streetview('" + data.coord.lat + "','" + data.coord.lng + "')\" class='btn btn-block btn-default btn-xs btn-streetview'  target='_blank' >StreetView&hellip;</a></div></div>" +
                        "</div>";
	return popUpContent;
};
window.generatePopUpRelaisTANPlus = function(data){
	var popUpContent =  "<div class='etiquette'><div class='row'><div class='col-xs-3 col-padding'><img src='"+window.config.serveurURL+"/assets/js/images/relaisTANplus.png'></div><div class='col-xs-9 col-padding'><b>" + capitaliseFirstLetter(data.libelle) + "</b></div></div><hr>" +
												"<div>" + data.adresseTanPlus + "<br>" + data.cpTanPlus + " " + data.villeTanPlus + "<br>" + data.commentaireTanPlus + "</div><hr>";

			if (window.config.hasInitineraire) {
        popUpContent += "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-depart.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='D_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-success btn-sm btn-enpartir'  target='_blank' onClick=\"setSelectedDeparturePoint('" + escape(JSON.stringify(data)) + "');\" >En partir</span></a></div></div>" +
                        "<div class='row row-padding'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-arrivee.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='A_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-danger btn-sm btn-yaller'  target='_blank' onClick=\"setSelectedArrivalPoint('" + escape(JSON.stringify(data)) + "');\" >Y Aller</span></a></div></div>" +
                        "<hr>";
        }
				if(window.config.adminMode){
					popUpContent +=     "<div class='row'><div class='col-xs-12'><a onClick=\"editPoi('" + escape(JSON.stringify(data)) + "');\"  class='btn btn-block btn-default btn-xs'  target='_blank' >Modifier</a></div></div>";
					popUpContent +=     "<div class='row row-padding'><div class='col-xs-12'><a onClick=\"deletePoi('" + escape(JSON.stringify(data)) + "');\"  class='btn btn-block btn-danger btn-xs'  target='_blank' >Supprimer</a></div></div>"+"<hr>";
				}
    popUpContent +=   "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-pegman.png'></div><div class='col-xs-9 col-padding'><a onClick=\"streetview('" + data.coord.lat + "','" + data.coord.lng + "')\" class='btn btn-block btn-default btn-xs btn-streetview'  target='_blank' >StreetView&hellip;</a></div></div>";
    	
    	popUpContent += "<div class='row row-padding'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-information.png' ></div><div class='col-xs-9 col-padding'><a href='https://www.tan.fr/fr/menu/titres-tarifs/points-de-vente/relais-tan/' class='btn btn-block btn-default btn-xs'  target='_blank' >En savoir plus...</a></div></div>";

           popUpContent += "</div>";
	return popUpContent;
};
window.generatePopUpVeloparcs = function(data){
	var popUpContent =  "<div class='etiquette'><div class='row'><div class='col-xs-3 col-padding'><img src='"+window.config.serveurURL+"/assets/js/images/veloparc.png'></div><div class='col-xs-9 col-padding'><b>" + capitaliseFirstLetter(data.libelle) + "</b></div></div><hr>" +
				"<div>" + data.adresseVeloparc + "<br>" + data.cpVeloparc + " " + data.villeVeloparc + "<br>" + data.commentaireVeloparc + "</div><hr>";

			if (window.config.hasInitineraire) {
        popUpContent += "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-depart.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='D_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-success btn-sm btn-enpartir'  target='_blank' onClick=\"setSelectedDeparturePoint('" + escape(JSON.stringify(data)) + "');\" >En partir</span></a></div></div>" +
                        "<div class='row row-padding'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-arrivee.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='A_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-danger btn-sm btn-yaller'  target='_blank' onClick=\"setSelectedArrivalPoint('" + escape(JSON.stringify(data)) + "');\" >Y Aller</span></a></div></div>" +
                        "<hr>";
        }
				if(window.config.adminMode){
					popUpContent +=     "<div class='row'><div class='col-xs-12'><a onClick=\"editPoi('" + escape(JSON.stringify(data)) + "');\"  class='btn btn-block btn-default btn-xs'  target='_blank' >Modifier</a></div></div>";
					popUpContent +=     "<div class='row row-padding'><div class='col-xs-12'><a onClick=\"deletePoi('" + escape(JSON.stringify(data)) + "');\"  class='btn btn-block btn-danger btn-xs'  target='_blank' >Supprimer</a></div></div>"+"<hr>";
				}
    popUpContent +=   "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-pegman.png'></div><div class='col-xs-9 col-padding'><a onClick=\"streetview('" + data.coord.lat + "','" + data.coord.lng + "')\" class='btn btn-block btn-default btn-xs btn-streetview'  target='_blank' >StreetView&hellip;</a></div></div>";

    	popUpContent += "<div class='row row-padding'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-information.png' ></div><div class='col-xs-9 col-padding'><a href='https://www.tan.fr/fr/menu/se-deplacer/tan-/velo/veloparcs/' class='btn btn-block btn-default btn-xs'  target='_blank' >En savoir plus...</a></div></div>";

           popUpContent += "</div>";    
	return popUpContent;
};
window.generatePopUpLayerSites = function(data){
	var popUpContent =   "<div class='etiquette'><b>" + capitaliseFirstLetter(data.libelle) + "</b><hr>";
	    if (window.config.hasInitineraire) {
            popUpContent += "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-depart.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='D_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-success btn-sm btn-enpartir'  target='_blank' onClick=\"setSelectedDeparturePoint('" + escape(JSON.stringify(data)) + "');\" >En partir</span></a></div></div>" +
                            "<div class='row row-padding'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-arrivee.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='A_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-danger btn-sm btn-yaller'  target='_blank' onClick=\"setSelectedArrivalPoint('" + escape(JSON.stringify(data)) + "');\" >Y Aller</span></a></div></div>" +
                            "<hr>";
		}
		if (data.siteType.siteTypeExternalCode == "VLS") {
			popUpContent += "<div class='velostationdispo'>Chargement des places disponibles</div><br/>";
		}
    popUpContent += "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-pegman.png' ></div><div class='col-xs-9 col-padding'><a onClick=\"streetview('" + data.coord.lat + "','" + data.coord.lng + "')\" class='btn btn-block btn-default btn-xs btn-streetview'  target='_blank' >StreetView&hellip;</a></div></div>";
		if(window.config.hasenSavoirPlus)
			popUpContent += "<div class='row row-padding'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-information.png' ></div><div class='col-xs-9 col-padding'><a href='https://www.tan.fr/fr/menu/se-deplacer/tan-/velo/velo-en-libre-service/' id='horaire_arret" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-default btn-xs'  target='_blank' >En savoir plus </a></div></div>";
		popUpContent += "</div>";
	return popUpContent;
};

window.generatePopUpStopArea = function(data){
	var popUpContent = "<div class='etiquette'><b>" + capitaliseFirstLetter(data.libelle) + "</b><hr>";
    if (window.config.hasInitineraire) {
        popUpContent += "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-depart.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='D_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-success btn-sm btn-enpartir'  target='_blank' onClick=\"setSelectedDeparturePoint('" + escape(JSON.stringify(data)) + "');\" >En partir</span></a></div></div>";
        popUpContent += "<div class='row row-padding'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-arrivee.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='A_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-danger btn-sm btn-yaller'  target='_blank' onClick=\"setSelectedArrivalPoint('" + escape(JSON.stringify(data)) + "');\" >Y Aller</span></a></div></div>";
        popUpContent += "<hr>";
    }

    popUpContent += "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-pegman.png'></div><div class='col-xs-9 col-padding'><a onClick=\"streetview('" + data.coord.lat + "','" + data.coord.lng + "')\" class='btn btn-block btn-default btn-xs btn-streetview'  target='_blank' >StreetView&hellip;</a></div></div>" +
        "<div class='row row-padding'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-horaires.png'></div><div class='col-xs-9 col-padding'><a id='horaire_arret" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-default btn-xs' target='_blank' href='https://www.tan.fr/ewp/mhv.php/arrets.html'>Horaires &agrave; l'arr&ecirc;t&hellip;</a></div></div></div>";
    return popUpContent;
};
window.generatePopUpResultSearch = function(data){
	var popUpContent = "<div class='etiquette'><b>" + capitaliseFirstLetter(data.libelle) + "</b><hr>";
    if (window.config.hasInitineraire) {
        popUpContent += "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-depart.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='D_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-success btn-sm btn-enpartir'  target='_blank' onClick=\"setSelectedDeparturePoint('" + escape(JSON.stringify(data)) + "');\" >En partir</span></a></div></div>";
        popUpContent += "<div class='row row-padding'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-arrivee.png' class='icon-btn-etiquette'></div><div class='col-xs-9 col-padding'><a id='A_" + data._explicitType + "_" + data.externalCode + "' class='btn btn-block btn-danger btn-sm btn-yaller'  target='_blank' onClick=\"setSelectedArrivalPoint('" + escape(JSON.stringify(data)) + "');\" >Y Aller</span></a></div></div>";
        popUpContent += "<hr>";
    }

    popUpContent += "<div class='row'><div class='col-xs-3'><img src='"+window.config.serveurURL+"/assets/images/icon-pegman.png'></div><div class='col-xs-9 col-padding'><a onClick=\"streetview('" + data.coord.lat + "','" + data.coord.lng + "')\" class='btn btn-block btn-default btn-xs btn-streetview'  target='_blank' >StreetView&hellip;</a></div></div>";
    return popUpContent;
}

window.generatePopUpPerturbation = function(data){
var popUpContent =  "<div class='etiquette'><div class='row'><div class='col-xs-3 col-padding'><img src='"+window.config.serveurURL+"/assets/js/images/picto-perturb.png'></div><div class='col-xs-9 col-padding'><b>" + capitaliseFirstLetter(data.titre) + "</b></div></div><hr>" +
                        "<div class='etiquette-text-info'>" + data.libelle + "<br></div><hr>";

    if(window.config.adminMode){
    	if(data.associe == 0){
	    	popUpContent +=     "<div class='row'><div class='col-xs-12'><a onClick=\"editPerturbation('" + escape(JSON.stringify(data)) + "');\"  class='btn btn-block btn-default btn-xs'  target='_blank' >Modifier</a></div></div>";
	    	popUpContent +=     "<div class='row row-padding'><div class='col-xs-12'><a onClick=\"deletePerturbation('" + escape(JSON.stringify(data)) + "');\"  class='btn btn-block btn-danger btn-xs'  target='_blank' >Supprimer</a></div></div>"+"<hr>";
	    }else{
	    	//C'est une perturbation lié a une autre
	    	popUpContent +=     "<div class='row'><div class='col-xs-12'><a onClick=\"deletePerturbation('" + escape(JSON.stringify(data)) + "');\"  class='btn btn-block btn-danger btn-xs'  target='_blank' >Supprimer</a></div></div>"+"<hr>";
	    }
    }

    popUpContent += "<div class='row'><div class='col-xs-12'><a href='"+data.url+"' class='btn btn-block btn-default btn-xs btn-streetview'  target='_blank' >En savoir plus</a></div></div>";
    return popUpContent;
}
window.generateVelostationDispo = function(dispoData){
	if(dispoData != undefined && dispoData.placelibre != undefined){
		if(dispoData.velos > 1){
			var velo = "vélos";
			var disponiblevelo = "disponibles";
		}else{
			var velo = "vélo";
			var disponiblevelo = "disponible";
		}
		if(dispoData.placelibre > 1){
			var places = "places";
			var disponibleplace = "disponibles";
		}else{
			var places = "place";
			var disponibleplace = "disponible";
		}
		return "<strong>"+dispoData.velos+" "+velo+" "+disponiblevelo+"<br/>"+dispoData.placelibre+" "+places+" "+disponibleplace+"</strong>";
	}else
		return "";
}
window.generateAutoPartageDispo = function(dispoData){
	console.log(dispoData);
	if(dispoData != undefined && dispoData.disponible != undefined){
		if(dispoData.disponible == 1 ){
			return "<strong>Véhicule(s) disponible(s) à cette station</strong>";
		}else{
			return "<strong>Aucun véhicule disponible à cette station</strong>";
		}
	} else
		return "";
}
window.ratioPanneaux = function(zoom,data){
	var ratioPaneaux = 0;
    if (map.getZoom() == 15) {
        var ratioPaneaux = 0.3;
    }
    else if (map.getZoom() == 16) {
        var ratioPaneaux = 0.4;
    }
    else if (map.getZoom() == 17) {
        var ratioPaneaux = 0.5;
    }
    else if (map.getZoom() >= 18) {
        var ratioPaneaux = 1;
    }
    return ratioPaneaux;
}
window.borderEpaisseur = function(epaisseur){
	return epaisseur + ((1 / 3) * epaisseur);
}
        if(device.mobile() || device.tablet()){
          window.config.hasMinimap = false;
          //window.config.min_zoom = 15
        }
      </script>


      <!--<script src="assets/js/map.geotranslator.js"></script>-->
      <!--<script src="assets/js/map.geolocator.js"></script>-->
      <script src="assets/js/map.js"></script>
      <script src="assets/js/map.iti.js"></script>
      <!--<script src="assets/js/map.topbar.js"></script>-->
      <!--<script src="assets/js/application.js"></script>-->
 <script src="assets/js/min/app.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-17703874-4', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>