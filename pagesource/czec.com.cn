<!DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> <title>中国中原对外工程有限公司电子邮件系统</title> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> <meta name="renderer" content="webkit" /> <script language="JavaScript" src="js/base64.js?v=67323cd31ec89518ddf47389790cb4dd" type="text/javascript"></script> <link rel="stylesheet" href="css/simple/webmail.css?v=67323cd31ec89518ddf47389790cb4dd" type="text/css"> <script language="javascript" src="js/jquery.js?v=67323cd31ec89518ddf47389790cb4dd" type="text/javascript"></script> <link rel="stylesheet" href="common/dialog/jquery.dialog.css?v=67323cd31ec89518ddf47389790cb4dd" type="text/css"> <script language="JavaScript" src="common/dialog/jquery.dialog.js?v=67323cd31ec89518ddf47389790cb4dd" type="text/javascript"></script> <script language="JavaScript" src="js/qrcode.js?v=67323cd31ec89518ddf47389790cb4dd" type="text/javascript"></script> <link rel="SHORTCUT ICON" href="favicon.ico"> </head> <script language="Javascript">
function contact(address) {
	location.href = 'mailto:'+address;
}

function encryptPwd(sVal) {
	if (sVal.substr(0, 10) == '{wm_crypt}')
		return sVal;
		
	var sResult = '' ;
	for(i = 0; i < sVal.length; i++) {
		sTemp = String.fromCharCode((sVal.charCodeAt(i) & 0x0f) | 0xa0);
		sResult = sResult + sTemp;
		sTemp = String.fromCharCode(((sVal.charCodeAt(i) >> 4) & 0x0f) | 0x80);
		sResult = sResult + sTemp;
	}
	
	sResult = '{wm_crypt}' + BASE64.encode(sResult);
		
	return sResult;
}

function getvalue(item) {
	if (item != '') {
		var obj = $('input[name="'+item+'"]');
		if (obj) {
			if (isPlaceholder())
				return obj.val();
			
			if (obj.hasClass('placeholder'))
				return '';
			else
				return obj.val();
		}
	}
	
	return '';
}

function selectLanguage() {
	var sUser = '';
	var sDomain = '';
	var sLanguage = '';
	var sTheme = '';
	
	var frm = document.form1;
	
	sUser = getvalue('f_user');
	if (frm.f_domain){
		if (frm.f_domain.options)
			sDomain = frm.f_domain.options[frm.f_domain.selectedIndex].value;
		else
			sDomain = frm.f_domain.value;
	}
	if (frm.f_lang)
		sLanguage = frm.f_lang.options[frm.f_lang.selectedIndex].value;
	if (frm.f_theme)
		sTheme = frm.f_theme.options[frm.f_theme.selectedIndex].value;

	sLocation = 'index.php?f_lang='+sLanguage+'&f_theme='+sTheme+'&f_user='+escape(sUser)+'&f_domain='+escape(sDomain)+'&retid='+Math.random().toString();
	location.replace(sLocation);
}

function lostUserFocus() {
	var frm = document.form1;
	if (!frm.f_domain || !frm.f_domain.options)
		return;
	
	var sUser = getvalue('f_user');
	var sDomain = '';
	
	pos = sUser.indexOf('@');
	if (pos != -1)
		sDomain = sUser.substring(pos+1).toLowerCase();
	
	if (sDomain == '')
		return;	
	
	for (i = 0; i < frm.f_domain.options.length; i++) {
		if (frm.f_domain.options[i].value == sDomain) {
			frm.f_domain.selectedIndex = i;
			break;
		}
	}
	
	frm.f_user.value = sUser.substring(0, pos);
}
	
function loginCheck() {
	sUser = '';
	sDomain	= '';
	sPassword = '';
	
	frm = document.form1;
	sUser = getvalue('f_user');

	if (frm.f_domain){
		if (frm.f_domain.options)
			sDomain = frm.f_domain.options[frm.f_domain.selectedIndex].value;
		else
			sDomain = frm.f_domain.value;
	}
	sPassword = getvalue('f_pass');

	if (sUser == '' || sPassword == ''){

		alert('用户名和密码栏不能为空！');

		if (sUser == '' || sDomain == '')
			frm.f_user.focus();
		if (sPassword == '')
			frm.f_pass.focus();

		return;
	}
	
	if (frm.f_checkcode) {
		var checkcode = getvalue('f_checkcode');
		if (checkcode == ''){

			alert('图形码不能为空！');

			frm.f_checkcode.focus();
			return;
		}
	}

	frm.f_pass.value = encryptPwd(sPassword);

	
	frm.submit();
}

function getPwd() {
	location.href = 'forgot.php';
}

function qrcode() {

	var qrcodetip = '扫描二维码，访问 Webmail。';


	jQuery.fn.dialog({
		title: false,
		content: '<div><div style="width:100%;height:16px"><div style="float:right;width:16px;height:16px" onclick="javascript:jQuery.fn.dlgclose();"><img src="images/close.gif"></div></div><div id="qrcode" style="padding-left:16px;width:160px;height:160px;"></div><div style="width:100%;height:20px;text-align:center;"><span style="color:#bbbbbb;">'+qrcodetip+'</span></div></div>',
		buttons: false,
		width: 200,
		height: 200
	});
	
	var str = location.protocol+'//'+location.host+location.pathname;
	var qrcode = new QRCode('qrcode', {
		text: str,
		width: 150,
		height: 150
	});
}

function keypress(keypressed) {
	var key;
	if (document.all) 
		key = window.event.keyCode
	else 
		key = keypressed.which;
		
	if (key == 13) {
		loginCheck();
	}
}

function isPlaceholder(){
    var input = document.createElement('input');
    return 'placeholder' in input;
}

$(document).ready(function() {
	var frm = document.form1;
	
	frm.f_user.focus();
	frm.f_user.onkeypress = keypress;
	frm.f_pass.onkeypress = keypress;
	if (frm.f_checkcode)
		frm.f_checkcode.onkeypress = keypress;

    if (!isPlaceholder()) {
        $('input').not('input[type=\'password\']').each(
            function(){
                if($(this).val() == '' && $(this).attr('placeholder') != '') { 
                    $(this).val($(this).attr('placeholder'));
                	$(this).addClass('placeholder');
                }
                    
                $(this).focus(function(){
                    if($(this).val() == $(this).attr('placeholder'))
                    	$(this).val('');
                    	$(this).removeClass('placeholder');
                });
                $(this).blur(function(){
                    if($(this).val() == '') {
                    	$(this).val($(this).attr('placeholder'));
                    	$(this).addClass('placeholder');
                    }
                });
        });

        var pwdField = $('input[type=password]');  
        var pwdVal = pwdField.attr('placeholder');  
        pwdField.after('<input id="pwdplaceholder" type="text" value="'+pwdVal+'" class="textbox placeholder" size=15 autocomplete="off" />');  

        var pwdPlaceholder = $('#pwdplaceholder');  
        pwdPlaceholder.show();  
        pwdField.hide();  
          
        pwdPlaceholder.focus(function(){
            pwdPlaceholder.hide();
            pwdField.show();
            pwdField.focus();
        });

        pwdField.blur(function(){
            if(pwdField.val() == '') {
                pwdPlaceholder.show();
                pwdField.hide();
            }
        });
    }
});

</script> <body> <table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0"> <tr> <td align="center" valign="middle"> <table width="820" border=0 align="center" cellpadding=0 cellspacing=0> <tr height="70"> <td valign="bottom" align="left"> <img src="customer/index_logo.gif" style="border:0;max-width:180px;max-height:60px;"> </td> </tr> <tr height="350"> <td align="center" valign="top"> <table border="0" cellpadding="0" cellspacing="0"> <tr> <td width=360 valign="top" align="right"> <img src="images/simple/index.jpg" border=0> </td> <td width=10 align="center"> <img src="images/simple/line.gif" border=0 width=1 height=240> </td> <td width=450 align="center"> <table width="100%" border=0 cellspacing=0 cellpadding=0 style="margin-left:20px"> <form name="form1" action="login.php" method=post> <input type="hidden" name="sessid" value=""> <tr height=30> <td align=left width="*%"><input type="text" size="15" name="f_user" value="" placeholder="用户名" maxlength=64 class="textbox" onblur="javascript:lostUserFocus();"></td> </tr> <tr height=30> <td align=left><input type="password" size="15" name="f_pass" value="" placeholder="密码" maxlength=64 autocomplete="off" class="textbox"> </td> </tr> <tr height=30> <td align="left"><select id="f_lang" name="f_lang" onChange="javascript:selectLanguage();"><option value="ch_gb" selected>简体中文</option><option value="ch_big5">繁体中文</option><option value="dk">Danish</option><option value="nl">Dutch</option><option value="en">English</option><option value="fr">French</option><option value="de">German</option><option value="gr">Greek</option><option value="it">Italian</option><option value="jp">Japanese</option><option value="kr">Korea</option><option value="no">Norwegian</option><option value="pt">Portuguese</option><option value="ru">Russian</option><option value="sp">Spanish</option><option value="se">Swedish</option><option value="vn">Vietnam</option></select></td> </tr> <tr height=30> <td align="left"><select name="f_theme" onChange="javascript:selectLanguage();"><option value="default">Default</option><option value="classic">Classic</option><option value="blue">Blue</option><option value="xp">XP</option><option value="simple" selected>Simple</option></select> <input type="checkbox" name="f_autologin" value="1"><acronym style="cursor:hand;cursor:pointer;" OnClick="f_autologin.click()">自动登录</acronym> </td> </tr> <tr height=50> <td align="left"> <table border="0" cellpadding="0" cellspacing="0"> <tr height="24"> <td width="80" align="center" class="loginbtn" onclick="javascript:loginCheck();">登录 &gt;&gt;</td> <td width="20">&nbsp;</td> <td>&nbsp;</td> </tr> </table> </td> </tr> </form> </table> </td> </tr> </table> </td> </tr> </table> </td> </tr> </table> </body> </html>